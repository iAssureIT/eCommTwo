{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/admin/categoryWiseReports/DailyReport.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport IAssureTable from \"../../coreadmin/IAssureTable/IAssureTable.jsx\";\nimport moment from 'moment';\nimport $ from 'jquery'; // axios.defaults.baseURL = 'http://gangaapi.iassureit.com';\n// axios.defaults.headers.post['Content-Type'] = 'application/json';\n\nclass DailyReport extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      \"twoLevelHeader\": {\n        apply: false\n      },\n      \"tableHeading\": {\n        orderID: \"Order ID\",\n        cratedAt: \"Order Date\",\n        userFullName: \"Customer Name\",\n        totalAmount: \"Amount\",\n        deliveryStatus: \"Delivery Status\"\n      },\n      \"tableData\": [],\n      \"tableObjects\": {\n        apiLink: '/api/annualPlans/',\n        editUrl: '/Plan/',\n        paginationApply: true\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      fields: {},\n      errors: {},\n      currentDate: '',\n      dataCount: 0\n    };\n  }\n\n  getReport(event) {\n    event.preventDefault();\n    this.setState({\n      currentDate: event.currentTarget.value\n    }, () => {\n      this.getData(event.currentTarget.value, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    });\n  }\n\n  getData(startDate, startRange, limitRange, section, category, subcategory) {\n    var formValues = {\n      \"startTime\": startDate,\n      \"endTime\": startDate,\n      \"section\": section,\n      \"category\": category,\n      \"subcategory\": subcategory\n    };\n    this.setState({\n      formValues: formValues\n    }, () => {\n      this.getTableData(startRange, limitRange);\n    });\n  }\n\n  getTableData(startRange, limitRange) {\n    axios.post(\"/api/orders/get/category-wise-report/\" + startRange + '/' + limitRange, this.state.formValues).then(response => {\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  getCount() {\n    axios.post(\"/api/orders/get/category-wise-report-count\", this.state.formValues).then(response => {\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {}\n\n  componentDidMount() {\n    axios.get(\"/api/sections/get/list/\").then(response => {\n      this.setState({\n        sections: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n    document.getElementsByClassName('reportsDateRef').value = moment().startOf('day').format(\"DD/MM/YYYY\");\n    this.setState({\n      currentDate: moment().startOf('day').format(\"YYYY-MM-DD\")\n    }, () => {\n      var formValues = {\n        \"startTime\": this.state.currentDate,\n        \"endTime\": this.state.currentDate,\n        \"section\": null,\n        \"category\": null,\n        \"subcategory\": null\n      };\n      this.setState({\n        formValues: formValues\n      }, () => {\n        this.getCount();\n      });\n      this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, null, null, null);\n    });\n  }\n\n  previousDate(event) {\n    event.preventDefault();\n    var selectedDate1 = $(\".reportsDayRef\").val();\n    this.setState({\n      currentDate: moment(selectedDate1).subtract(1, \"days\").format(\"YYYY-MM-DD\")\n    }, () => {\n      this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    });\n  }\n\n  nextDate(event) {\n    event.preventDefault();\n    var selectedDate1 = $(\".reportsDayRef\").val();\n    this.setState({\n      currentDate: moment(selectedDate1).add(1, \"days\").format(\"YYYY-MM-DD\")\n    }, () => {\n      this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    });\n  }\n\n  currentDate() {//       var setDate = Session.get('newDate');\n    // if(setDate){\n    //  var today = new Date(setDate);\n    // }else{\n    //  var today = new Date();\n    // }\n    // var dd = today.getDate();\n    // var mm = today.getMonth()+1; //January is 0!\n    // var yyyy = today.getFullYear();\n    // if(dd<10){\n    //     dd='0'+dd;\n    // }\n    // if(mm<10){\n    //     mm='0'+mm;\n    // }\n    //  var today = yyyy+'-'+mm+'-'+dd;\n    // return today;\n  }\n\n  handleSection(event) {\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, event.target.value, null, null);\n    axios.get(\"/api/category/get/list/\" + event.target.value).then(response => {\n      this.setState({\n        categories: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleCategory(event) {\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), event.target.value, null);\n    axios.get(\"/api/category/get/one/\" + event.target.value).then(response => {\n      this.setState({\n        subcategories: response.data.subCategory\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleSubCategory(event) {\n    event.preventDefault();\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), event.target.value);\n  }\n\n  render() {\n    var shown = {\n      display: this.state.shown ? \"block\" : \"none\"\n    };\n    var hidden = {\n      display: this.state.shown ? \"none\" : \"block\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 sales-report-main-class\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reports-select-date-boxmain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reports-select-date-boxsec\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reports-select-date-Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, \"Daily Reports\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.previousDate.bind(this),\n      className: \"commonReportArrowPoiner input-group-addon\",\n      id: \"basic-addon1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-chevron-circle-left\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 134\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.getReport.bind(this),\n      defaultValue: this.state.currentDate,\n      name: \"reportsDayRef\",\n      type: \"date\",\n      className: \"reportsDateRef reportsDayRef form-control\",\n      ref: \"reportsDayRef\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.nextDate.bind(this),\n      className: \"commonReportArrowPoiner input-group-addon\",\n      id: \"basic-addon1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-chevron-circle-right\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 130\n      }\n    }))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, \"Section\"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"section\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      ref: \"section\",\n      name: \"section\",\n      onChange: this.handleSection.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, \"-- Select --\"), this.state.sections && this.state.sections.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 26\n        }\n      }, data.section);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"category\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      ref: \"category\",\n      name: \"category\",\n      onChange: this.handleCategory.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, \"-- Select --\"), this.state.categories && this.state.categories.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 26\n        }\n      }, data.category);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, \"Subcategory\"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"subcategory\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      ref: \"subcategory\",\n      name: \"subcategory\",\n      onChange: this.handleSubCategory.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, \"-- Select --\"), this.state.subcategories && this.state.subcategories.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 26\n        }\n      }, data.subCategoryTitle);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row tablebg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getTableData.bind(this),\n      tableObjects: this.state.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 16\n      }\n    }))));\n  }\n\n}\n\nexport default DailyReport;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/admin/categoryWiseReports/DailyReport.js"],"names":["React","Component","axios","IAssureTable","moment","$","DailyReport","constructor","props","state","shown","apply","orderID","cratedAt","userFullName","totalAmount","deliveryStatus","apiLink","editUrl","paginationApply","fields","errors","currentDate","dataCount","getReport","event","preventDefault","setState","currentTarget","value","getData","startRange","limitRange","val","startDate","section","category","subcategory","formValues","getTableData","post","then","response","tableData","data","catch","error","console","log","getCount","componentWillReceiveProps","nextProps","componentDidMount","get","sections","document","getElementsByClassName","startOf","format","previousDate","selectedDate1","subtract","nextDate","add","handleSection","target","categories","handleCategory","subcategories","subCategory","handleSubCategory","render","display","hidden","bind","map","index","_id","subCategoryTitle","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport axios                  from 'axios';\nimport IAssureTable           from \"../../coreadmin/IAssureTable/IAssureTable.jsx\";\nimport moment from 'moment';\nimport $ from 'jquery';\n// axios.defaults.baseURL = 'http://gangaapi.iassureit.com';\n// axios.defaults.headers.post['Content-Type'] = 'application/json';\n\n\nclass DailyReport extends Component{\n  \n  constructor(props){\n    super(props); \n   \n    this.state = {\n      shown                 : true,\n       \"twoLevelHeader\"     : { \n        apply               : false,\n      },\n      \"tableHeading\"        : {\n        orderID                    : \"Order ID\",\n        cratedAt                   : \"Order Date\",\n        userFullName               : \"Customer Name\",\n        totalAmount                : \"Amount\",\n        deliveryStatus             : \"Delivery Status\",\n\n      },\n      \"tableData\"           : [],\n      \"tableObjects\"        : {\n        apiLink             : '/api/annualPlans/',\n        editUrl             : '/Plan/',\n        paginationApply     : true,\n      },\n      \"startRange\"          : 0,\n      \"limitRange\"          : 10,\n      fields                : {},\n      errors                : {},\n      currentDate           : '',\n      dataCount             : 0\n    }\n  }\n \n  getReport(event){\n    event.preventDefault(); \n    this.setState({currentDate : event.currentTarget.value},()=>{\n    this.getData(event.currentTarget.value, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val()); \n    })\n  }\n       \n  getData(startDate,startRange,limitRange,section,category, subcategory){\n    var formValues={\n      \"startTime\" : startDate,\n      \"endTime\"   : startDate,\n      \"section\"   : section,\n      \"category\"  : category,\n      \"subcategory\" : subcategory\n    }\n    \n    this.setState({formValues : formValues},()=>{\n        this.getTableData(startRange,limitRange);\n    });\n  }\n  getTableData(startRange,limitRange){\n    \n    axios.post(\"/api/orders/get/category-wise-report/\"+startRange+'/'+limitRange, this.state.formValues)\n    .then((response)=>{\n      this.setState({ \n        tableData : response.data\n      })\n    })\n    .catch((error)=>{\n        console.log('error', error);\n    })\n  }\n  getCount(){\n    axios.post(\"/api/orders/get/category-wise-report-count\", this.state.formValues)\n    .then((response)=>{\n      this.setState({ \n        dataCount : response.data.dataCount\n      })\n    })\n    .catch((error)=>{\n        console.log('error', error);\n    })\n  }\n  componentWillReceiveProps(nextProps){\n    \n  }\n\n  componentDidMount() {\n     \n    axios.get(\"/api/sections/get/list/\")\n    .then((response)=>{\n      this.setState({ sections : response.data })\n    })\n    .catch((error)=>{\n        console.log('error', error);\n    })\n    document.getElementsByClassName('reportsDateRef').value = moment().startOf('day').format(\"DD/MM/YYYY\") ;\n    \n    \n    this.setState({ currentDate:moment().startOf('day').format(\"YYYY-MM-DD\") },()=>{\n      var formValues={\n          \"startTime\" : this.state.currentDate,\n          \"endTime\"   : this.state.currentDate,\n          \"section\"   : null,\n          \"category\"  : null,\n          \"subcategory\" : null\n        }\n        this.setState({ formValues : formValues} ,()=>{ this.getCount();  });\n        \n        this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, null, null, null); \n    });\n  }\n\n  \n  previousDate(event){\n    event.preventDefault();\n\n    var selectedDate1 = $(\".reportsDayRef\").val();\n\n    this.setState({currentDate: moment(selectedDate1).subtract(1, \"days\").format(\"YYYY-MM-DD\")}, () => {\n        this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    }) \n  }\n  nextDate(event){\n    event.preventDefault();\n\n    var selectedDate1 = $(\".reportsDayRef\").val();\n\n    this.setState({currentDate: moment(selectedDate1).add(1, \"days\").format(\"YYYY-MM-DD\")}, () => {\n        this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    }) \n  }\n  \n  currentDate(){\n   //       var setDate = Session.get('newDate');\n\n    // if(setDate){\n    //  var today = new Date(setDate);\n    // }else{\n    //  var today = new Date();\n    // }\n    // var dd = today.getDate();\n    // var mm = today.getMonth()+1; //January is 0!\n    // var yyyy = today.getFullYear();\n    // if(dd<10){\n    //     dd='0'+dd;\n    // }\n    // if(mm<10){\n    //     mm='0'+mm;\n    // }\n    //  var today = yyyy+'-'+mm+'-'+dd;\n\n    // return today;\n\n  }\n  handleSection(event){\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, event.target.value, null, null);\n    axios.get(\"/api/category/get/list/\"+event.target.value)\n    .then((response)=>{\n      this.setState({ \n        categories : response.data\n      })\n    })\n    .catch((error)=>{\n        console.log('error', error);\n    })\n  }\n  handleCategory(event){\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), event.target.value, null);\n    axios.get(\"/api/category/get/one/\"+event.target.value)\n    .then((response)=>{\n      this.setState({ \n        subcategories : response.data.subCategory\n      })\n    })\n    .catch((error)=>{\n        console.log('error', error);\n    })\n  }\n\n  handleSubCategory(event){\n    event.preventDefault();\n    this.getData(this.state.currentDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), event.target.value);\n  }\n  render() {\n    \n    var shown = {\n      display: this.state.shown ? \"block\" : \"none\"\n    };\n    \n    var hidden = {\n      display: this.state.shown ? \"none\" : \"block\"\n    }\n\n    return (\n      <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 sales-report-main-class\">\n          <div className=\"reports-select-date-boxmain\">\n            <div className=\"reports-select-date-boxsec\">\n              <div className=\"reports-select-date-Title\">Daily Reports</div>\n              <div className=\"input-group\">\n                <span onClick={this.previousDate.bind(this)} className=\"commonReportArrowPoiner input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"></i></span>\n                <input onChange={this.getReport.bind(this)} defaultValue={this.state.currentDate} name=\"reportsDayRef\" type=\"date\" className=\"reportsDateRef reportsDayRef form-control\" \n                ref=\"reportsDayRef\"  />\n                <span onClick={this.nextDate.bind(this)} className=\"commonReportArrowPoiner input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"></i></span>\n              </div>\n            </div>\n          </div>\n          <br/>\n          <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n            <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Section \n            </label>\n            <select id=\"section\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n              ref=\"section\" name=\"section\" onChange={this.handleSection.bind(this)} >\n              <option selected={true} disabled={true}>-- Select --</option>\n              {\n                this.state.sections && this.state.sections.map((data,index)=>{\n                  return(<option value={data._id}>{data.section}</option>);\n                })\n              }\n            </select>\n          </div>\n          <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n            <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Category \n            </label>\n            <select id=\"category\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n              ref=\"category\" name=\"category\" onChange={this.handleCategory.bind(this)} >\n              <option selected={true} disabled={true}>-- Select --</option>\n              {\n                this.state.categories && this.state.categories.map((data,index)=>{\n                  return(<option value={data._id}>{data.category}</option>);\n                })\n              }\n            </select>\n          </div>\n          <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n            <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Subcategory \n            </label>\n            <select id=\"subcategory\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n              ref=\"subcategory\" name=\"subcategory\" onChange={this.handleSubCategory.bind(this)} >\n              <option selected={true} disabled={true}>-- Select --</option>\n              {\n                this.state.subcategories && this.state.subcategories.map((data,index)=>{\n                  return(<option value={data._id}>{data.subCategoryTitle}</option>);\n                })\n              }\n            </select>\n          </div>\n          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\" >\n            <div className=\"row tablebg\">  \n              {<IAssureTable \n                tableHeading={this.state.tableHeading}\n                twoLevelHeader={this.state.twoLevelHeader} \n                dataCount={this.state.dataCount}\n                tableData={this.state.tableData}\n                getData={this.getTableData.bind(this)}\n                tableObjects={this.state.tableObjects}\n              />}\n            </div>\n          </div> \n      </div>\n    );\n  }\n}\nexport default DailyReport\n"]},"metadata":{},"sourceType":"module"}