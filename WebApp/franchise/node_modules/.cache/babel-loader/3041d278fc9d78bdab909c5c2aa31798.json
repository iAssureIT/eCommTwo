{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/Master/OneFieldForm/OneFieldForm.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport IAssureTable from '../../IAssureTable/IAssureTable.jsx';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { withRouter } from 'react-router-dom';\nimport _ from 'underscore';\nimport S3FileUpload from 'react-s3';\nimport 'bootstrap/js/tab.js';\nimport './OneField.css';\nvar apiLink = \"\";\n\nclass OneFieldForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"user_ID\": \"\",\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": '',\n      \"fieldValue\": \"\",\n      \"profilePhoto\": \"\",\n      \"pageUrl\": \"\"\n    };\n  }\n\n  componentDidMount() {\n    apiLink = this.props.tableObjects.apiLink;\n    const user_ID = localStorage.getItem(\"user_ID\");\n    this.setState({\n      user_ID: user_ID\n    });\n    $.validator.addMethod(\"regxonefield\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid field value\");\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#vendorLocationType\").validate({\n      rules: {\n        fieldName: {\n          required: true,\n          regxonefield: /^[-a-zA-Z0-9-()]+(\\s+[-a-zA-Z0-9-()]+)*$/\n        }\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"fieldName\") {\n          error.insertAfter(\"#OneFieldInput\");\n        }\n      }\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.editId) {\n      this.edit(nextProps.editId);\n    } else {\n      this.setState({\n        fieldName: \"\",\n        iconUrl: \"\",\n        editId: \"\",\n        \"profilePhoto\": \"\"\n      });\n    }\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    var fieldName = this.props.fields.attributeName;\n    this.setState({\n      fieldName: event.target.value\n    });\n  }\n\n  submitType(event) {\n    event.preventDefault();\n\n    if (this.props.editId) {\n      var formValues = {\n        \"fieldID\": this.props.editId,\n        \"fieldValue\": this.state.fieldName,\n        \"iconUrl\": this.state.profilePhoto,\n        \"updatedBy\": this.state.user_ID\n      };\n\n      if ($('#vendorLocationType').valid()) {\n        axios.patch(apiLink + '/patch', formValues).then(response => {\n          this.setState({\n            fieldName: \"\",\n            profilePhoto: \"\",\n            editId: \"\"\n          }, () => {\n            this.props.history.push(this.props.tableObjects.editUrl);\n          });\n          this.getData(this.state.startRange, this.state.limitRange);\n          swal(this.props.fields.title + \" updated Successfully\");\n        }).catch(error => {});\n      }\n    } else {\n      var formValues = {\n        \"fieldValue\": this.state.fieldName,\n        \"iconUrl\": this.state.profilePhoto,\n        \"createdBy\": this.state.user_ID\n      };\n      console.log(\"formValues\", formValues, this.state.profilePhoto);\n\n      if ($('#vendorLocationType').valid()) {\n        console.log(\"apiLink\", apiLink);\n        axios.post(apiLink + 'post', formValues).then(response => {\n          // console.log(response.data)\n          if (response.data.created) {\n            swal(this.state.fieldName + \" \" + this.props.fields.title + \" submitted Successfully\");\n          } else {\n            swal(this.state.fieldName + \" \" + this.props.fields.title + \" already exists\");\n          }\n\n          this.getData(this.state.startRange, this.state.limitRange);\n          this.setState({\n            fieldName: \"\",\n            profilePhoto: \"\",\n            iconUrl: \"\"\n          });\n        }).catch(error => {});\n      }\n    }\n  }\n\n  updateType(event) {\n    event.preventDefault();\n    var formValues = {\n      \"fieldID\": this.props.editId,\n      \"fieldValue\": this.state.fieldName,\n      \"iconUrl\": this.state.profilePhoto,\n      \"updatedBy\": this.state.user_ID\n    };\n\n    if ($('#vendorLocationType').valid()) {\n      axios.patch(apiLink + '/patch', formValues).then(response => {\n        this.setState({\n          fieldName: \"\",\n          profilePhoto: \"\",\n          editId: \"\"\n        }, () => {\n          this.props.history.push(this.props.tableObjects.editUrl);\n        });\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal(this.props.fields.title + \" updated Successfully\");\n      }).catch(error => {});\n    }\n  }\n\n  getDataCount() {\n    axios.get('/api/vendorLocationType/get/count').then(response => {\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {});\n  }\n\n  getData(startRange, limitRange) {\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post(apiLink + 'get/list', data).then(response => {\n      // console.log(\" response.data ==>\", response.data);\n      var tableData = response.data.map((a, i) => {\n        // console.log(\" response A ==>\", a[this.props.fields.attributeName]);\n        return {\n          _id: a._id,\n          [this.props.fields.attributeName]: a[this.props.fields.attributeName],\n          iconUrl: \"<img class='uploadedImage' src=\" + a.iconUrl + \">\"\n        };\n      });\n      this.setState({\n        tableData: tableData\n      });\n      console.log(\"tableData\", this.state.tableData);\n    }).catch(error => {});\n  }\n\n  edit(id) {\n    $('label.error').html('');\n    var fieldName = this.props.fields.attributeName;\n    console.log(\"fieldName\", fieldName, id);\n    axios.get(apiLink + 'get/one/' + id).then(response => {\n      console.log(\"response\", response);\n\n      if (response.data) {\n        this.setState({\n          \"fieldName\": response.data[fieldName],\n          \"profilePhoto\": response.data.iconUrl\n        }, () => {// console.log(\"fieldName ++ \", this.state.fieldName);\n        });\n      }\n    }).catch(error => {});\n  }\n\n  docBrowse(event) {\n    event.preventDefault();\n    var name = event.target.name;\n    var docBrowse = [];\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      for (var i = 0; i < event.currentTarget.files.length; i++) {\n        var file = event.currentTarget.files[i];\n\n        if (file) {\n          var fileName = file.name;\n          var ext = fileName.split('.').pop();\n\n          if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n            if (file) {\n              var objTitle = {\n                fileInfo: file\n              };\n              docBrowse.push(objTitle);\n              console.log(\"docBrowse\", docBrowse);\n            } else {\n              swal(\"Files not uploaded\");\n            } //file\n\n          } else {\n            swal(\"Allowed images formats are (jpg,png,jpeg)\");\n          } //file types\n\n        } //file\n\n      } //for \n\n\n      if (event.currentTarget.files) {\n        main().then(formValues => {\n          console.log(\"formValues\", formValues);\n          this.setState({\n            [name]: formValues[0].docBrowse\n          }, () => {\n            console.log(\"profilePhoto0\", this.state.profilePhoto);\n          });\n        });\n\n        async function main() {\n          var formValues = [];\n\n          for (var j = 0; j < docBrowse.length; j++) {\n            var config = await getConfig();\n            var s3url = await s3upload(docBrowse[j].fileInfo, config, this);\n            const formValue = {\n              \"docBrowse\": s3url,\n              \"status\": \"New\"\n            };\n            formValues.push(formValue);\n          }\n\n          return Promise.resolve(formValues);\n        }\n\n        function s3upload(image, configuration) {\n          return new Promise(function (resolve, reject) {\n            S3FileUpload.uploadFile(image, configuration).then(Data => {\n              resolve(Data.location);\n            }).catch(error => {});\n          });\n        }\n\n        function getConfig() {\n          return new Promise(function (resolve, reject) {\n            axios.get('/api/projectsettings/get/S3').then(response => {\n              const config = {\n                bucketName: response.data.bucket,\n                dirName: 'propertiesImages',\n                region: response.data.region,\n                accessKeyId: response.data.key,\n                secretAccessKey: response.data.secret\n              };\n              resolve(config);\n            }).catch(function (error) {});\n          });\n        }\n      }\n    }\n  }\n\n  deleteDoc(event) {\n    event.preventDefault();\n    var name = event.target.getAttribute(\"name\");\n    this.setState({\n      [name]: \"\"\n    });\n  }\n\n  render() {\n    console.log(\"this.state.tableData=>\", this.state.tableData);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pageContent col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 37\n      }\n    }, this.props.fields.title === \"Location Type\" ? this.props.fields.title + \"s\" : this.props.fields.title, \" \")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 41\n      }\n    }, this.props.fields.hasImage === true ? /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: \"vendorLocationType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-lg-offset-1 col-md-6 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"OneFieldInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 61\n      }\n    }, this.props.fields.title, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 171\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      value: this.state.fieldName,\n      ref: this.props.fields.attributeName,\n      name: \"fieldName\",\n      onChange: this.handleChange.bind(this),\n      placeholder: this.props.fields.placeholder,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 61\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\",\n      id: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 OFFImageDiv \",\n      id: \"LogoImageUpOne\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-camera\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 66\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 99\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 105\n      }\n    }, \"UPLOAD IMAGE\")), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.docBrowse.bind(this),\n      id: \"LogoImageUp\",\n      type: \"file\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      title: \"\",\n      name: \"profilePhoto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 61\n      }\n    })), this.state.profilePhoto ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\",\n      id: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 67\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform deletelogo col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: this.state.profilePhoto,\n      name: \"profilePhoto\",\n      onClick: this.deleteDoc.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 71\n      }\n    }, \"x\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\",\n      id: \"profilePhoto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 71\n      }\n    }, this.state.profilePhoto.split('.').pop() === \"pdf\" || this.state.profilePhoto.split('.').pop() === \"PDF\" ? /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/pdfImg.png\",\n      className: \"img-responsive profileImageDivlogoStyleOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 77\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.profilePhoto,\n      className: \"img-responsive profileImageDivlogoStyleOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 76\n      }\n    })))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 53\n      }\n    }, this.props.editId ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.updateType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 61\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submitType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 61\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 53\n      }\n    })) : /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: \"vendorLocationType\",\n      onSubmit: this.submitType.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-8 col-lg-offset-2 col-md-6 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"OneFieldInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 52\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 57\n      }\n    }, this.props.fields.title, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 167\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      type20: \"text\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      value: this.state.fieldName,\n      ref: this.props.fields.attributeName,\n      name: \"fieldName\",\n      onChange: this.handleChange.bind(this),\n      placeholder: this.props.fields.placeholder,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 57\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.props.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getData.bind(this),\n      tableObjects: this.props.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 45\n      }\n    }))))))))));\n  }\n\n}\n\nexport default withRouter(OneFieldForm);","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/Master/OneFieldForm/OneFieldForm.js"],"names":["React","Component","$","jQuery","IAssureTable","axios","swal","withRouter","_","S3FileUpload","apiLink","OneFieldForm","constructor","props","state","componentDidMount","tableObjects","user_ID","localStorage","getItem","setState","validator","addMethod","value","element","regexpr","test","setDefaults","debug","success","validate","rules","fieldName","required","regxonefield","errorPlacement","error","attr","insertAfter","componentWillReceiveProps","nextProps","editId","edit","iconUrl","handleChange","event","preventDefault","target","name","fields","attributeName","submitType","formValues","profilePhoto","valid","patch","then","response","history","push","editUrl","getData","startRange","limitRange","title","catch","console","log","post","data","created","updateType","getDataCount","get","dataCount","tableData","map","a","i","_id","id","html","docBrowse","currentTarget","files","length","file","fileName","ext","split","pop","objTitle","fileInfo","main","j","config","getConfig","s3url","s3upload","formValue","Promise","resolve","image","configuration","reject","uploadFile","Data","location","bucketName","bucket","dirName","region","accessKeyId","key","secretAccessKey","secret","deleteDoc","getAttribute","render","hasImage","bind","placeholder","tableHeading","twoLevelHeader"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $                    from 'jquery';\nimport jQuery               from 'jquery';\nimport IAssureTable         from '../../IAssureTable/IAssureTable.jsx';\nimport axios                from 'axios';\nimport swal                 from 'sweetalert';\nimport { withRouter }       from 'react-router-dom';\nimport _                    from 'underscore';\nimport S3FileUpload         from 'react-s3';\nimport 'bootstrap/js/tab.js';\nimport './OneField.css'\nvar apiLink = \"\";\nclass OneFieldForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"user_ID\"      : \"\",\n            \"startRange\"   : 0,\n            \"limitRange\"   : 10,\n            \"editId\"       :  '',\n            \"fieldValue\"   : \"\",\n            \"profilePhoto\" :\"\",\n            \"pageUrl\"      : \"\",\n        };\n    }\n    componentDidMount() {\n        apiLink =  this.props.tableObjects.apiLink;\n        const user_ID = localStorage.getItem(\"user_ID\")\n        this.setState({\n            user_ID : user_ID,\n        })\n\n     $.validator.addMethod(\"regxonefield\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid field value\");\n        \n         jQuery.validator.setDefaults({\n          debug: true,\n          success: \"valid\"\n        });\n        $(\"#vendorLocationType\").validate({\n          rules: {\n            fieldName: {\n              required      : true,\n              regxonefield  :/^[-a-zA-Z0-9-()]+(\\s+[-a-zA-Z0-9-()]+)*$/,\n            },\n          },\n          errorPlacement: function (error, element) {\n            if (element.attr(\"name\") === \"fieldName\") {\n              error.insertAfter(\"#OneFieldInput\");\n            }\n          }\n        });\n    }\n   \n    componentWillReceiveProps(nextProps) {\n        if(nextProps.editId){\n            this.edit(nextProps.editId);\n        }else{\n            this.setState({\n                fieldName: \"\",\n                iconUrl  : \"\",\n                editId: \"\",\n                \"profilePhoto\":\"\",\n            })\n        }\n    }\n    handleChange(event) {\n        event.preventDefault();\n        const target = event.target;\n        const name = target.name;\n        var fieldName = this.props.fields.attributeName\n        this.setState({\n            fieldName : event.target.value\n        });\n\n    }\n    submitType(event) {\n        event.preventDefault();\n        if(this.props.editId)\n        {\n            var formValues ={\n                \"fieldID\"       : this.props.editId,\n                \"fieldValue\"    : this.state.fieldName,\n                \"iconUrl\"       : this.state.profilePhoto,\n                \"updatedBy\"     : this.state.user_ID\n            }\n        if ($('#vendorLocationType').valid()) {\n            axios.patch(apiLink+'/patch', formValues)\n                .then((response) => {\n                    this.setState({\n                        fieldName    : \"\",\n                        profilePhoto :\"\",\n                        editId       : \"\"\n                    },()=>{\n                        this.props.history.push(this.props.tableObjects.editUrl);\n                    })\n                    this.getData(this.state.startRange, this.state.limitRange);\n                    swal(this.props.fields.title+\" updated Successfully\");\n                })\n                .catch((error) => {\n                })\n        }\n        }else\n        {\n            var formValues = {\n                \"fieldValue\"    : this.state.fieldName,\n                \"iconUrl\"       : this.state.profilePhoto,\n                \"createdBy\"     : this.state.user_ID\n            }\n            console.log(\"formValues\",formValues,this.state.profilePhoto);\n        if ($('#vendorLocationType').valid()) {\n            console.log(\"apiLink\",apiLink);\n            axios.post(apiLink+'post', formValues)\n                .then((response) => {\n                    // console.log(response.data)\n                    if (response.data.created) {\n                        swal(this.state.fieldName+\" \"+this.props.fields.title+\" submitted Successfully\");\n                    }else{\n                        swal(this.state.fieldName+\" \"+this.props.fields.title+\" already exists\");\n                    }\n                    this.getData(this.state.startRange, this.state.limitRange);\n                    this.setState({\n                       fieldName    : \"\",\n                       profilePhoto : \"\",\n                       iconUrl      : \"\"\n                     })\n                })\n                .catch((error) => {\n                    \n                })\n        }\n\n        }\n      \n    }\n    updateType(event) {\n        event.preventDefault();\n         var formValues ={\n                \"fieldID\"       : this.props.editId,\n                \"fieldValue\"    : this.state.fieldName,\n                \"iconUrl\"       : this.state.profilePhoto,\n                \"updatedBy\"     : this.state.user_ID\n            }\n        if ($('#vendorLocationType').valid()) {\n            axios.patch(apiLink+'/patch', formValues)\n                .then((response) => {\n                    this.setState({\n                        fieldName    : \"\",\n                        profilePhoto :\"\",\n                        editId       : \"\"\n                    },()=>{\n                        this.props.history.push(this.props.tableObjects.editUrl);\n                    })\n                    this.getData(this.state.startRange, this.state.limitRange);\n                    swal(this.props.fields.title+\" updated Successfully\");\n                })\n                .catch((error) => {\n                })\n            }\n            \n    }\n    getDataCount() {\n        axios.get('/api/vendorLocationType/get/count')\n            .then((response) => {\n               \n                this.setState({\n                    dataCount: response.data.dataCount\n                })\n\n            })\n            .catch((error) => {\n                \n            });\n    }\n    getData(startRange, limitRange) {\n        var data = {\n            startRange: startRange,\n            limitRange: limitRange\n        }\n        axios.post(apiLink+'get/list', data)\n            .then((response) => {\n                // console.log(\" response.data ==>\", response.data);\n                var tableData = response.data.map((a, i)=>{\n                    // console.log(\" response A ==>\", a[this.props.fields.attributeName]);\n                    return({\n                        _id                                 : a._id,\n                        [this.props.fields.attributeName]   : a[this.props.fields.attributeName],\n                        iconUrl                             : \"<img class='uploadedImage' src=\"+a.iconUrl+\">\"\n                    })\n                })\n                this.setState({\n                    tableData: tableData\n                })\n                console.log(\"tableData\",this.state.tableData);\n            })\n            .catch((error) => {\n                \n            });\n    }\n    edit(id) {\n        $('label.error').html('')\n        var fieldName = this.props.fields.attributeName;\n        console.log(\"fieldName\",fieldName,id)\n        axios.get(apiLink+'get/one/' + id)\n            .then((response) => {\n                console.log(\"response\",response);\n                if (response.data) {\n                    this.setState({\n\n                        \"fieldName\": response.data[fieldName],\n                        \"profilePhoto\": response.data.iconUrl,\n                    },()=>{\n                        // console.log(\"fieldName ++ \", this.state.fieldName);\n                    });\n                }\n            })\n            .catch((error) => {\n                \n            });\n    }\n    docBrowse(event) {\n        event.preventDefault();\n        var name = event.target.name\n        var docBrowse = [];\n        if (event.currentTarget.files && event.currentTarget.files[0]) {\n            for (var i = 0; i < event.currentTarget.files.length; i++) {\n                var file = event.currentTarget.files[i];\n                if (file) {\n                    var fileName = file.name;\n                    var ext = fileName.split('.').pop();\n                    if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n                        if (file) {\n                            var objTitle = { fileInfo: file }\n                            docBrowse.push(objTitle);\n                          console.log(\"docBrowse\",docBrowse)\n\n                        } else {\n                            swal(\"Files not uploaded\");\n                        }//file\n                    } else {\n                        swal(\"Allowed images formats are (jpg,png,jpeg)\");\n                    }//file types\n                }//file\n            }//for \n\n            if (event.currentTarget.files) {\n                main().then(formValues => {\n                    console.log(\"formValues\",formValues);\n                        this.setState({\n                            [name]: formValues[0].docBrowse\n                        },()=>{\n                            console.log(\"profilePhoto0\",this.state.profilePhoto)\n                        })\n                });\n\n                async function main() {\n                    var formValues = [];\n                    for (var j = 0; j < docBrowse.length; j++) {\n                        var config = await getConfig();\n                        var s3url = await s3upload(docBrowse[j].fileInfo, config, this);\n                        const formValue = {\n                            \"docBrowse\": s3url,\n                            \"status\": \"New\"\n                        };\n                        formValues.push(formValue);\n                    }\n                    return Promise.resolve(formValues);\n                }\n\n\n                function s3upload(image, configuration) {\n\n                    return new Promise(function (resolve, reject) {\n                        S3FileUpload\n                            .uploadFile(image, configuration)\n                            .then((Data) => {\n                                resolve(Data.location);\n                            })\n                            .catch((error) => {\n                            })\n                    })\n                }\n                function getConfig() {\n                  return new Promise(function (resolve, reject) {\n                      axios\n                        .get('/api/projectsettings/get/S3')\n                        .then((response) => {\n                            const config = {\n                                bucketName: response.data.bucket,\n                                dirName: 'propertiesImages',\n                                region: response.data.region,\n                                accessKeyId: response.data.key,\n                                secretAccessKey: response.data.secret,\n                            }\n                            resolve(config);\n                        })\n                        .catch(function (error) {\n                        })\n                    })\n                }\n            }\n        }\n    }\n    deleteDoc(event){\n    event.preventDefault();\n        var name = event.target.getAttribute(\"name\");\n      \n        this.setState({\n            [name]: \"\"\n        })\n    }\n\n    render() {\n        console.log(\"this.state.tableData=>\",this.state.tableData)\n        return (\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                <div className=\"row\">\n                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\">\n                        <section className=\"content\">\n                            <div className=\"pageContent col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                                    <h4 className=\"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\">{this.props.fields.title === \"Location Type\"? this.props.fields.title+\"s\" : this.props.fields.title } </h4>\n                                </div>\n                                <section className=\"Content\">\n                                    <div className=\"row\">\n                                        <div className=\"col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-12 col-xs-12\">\n                                        {\n                                            this.props.fields.hasImage === true ?\n                                            <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" id=\"vendorLocationType\" >\n                                                    <div className=\"form-margin col-lg-6 col-lg-offset-1 col-md-6 col-sm-12 col-xs-12 pdcls\">\n                                                        <div id=\"OneFieldInput\">\n                                                            <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\">{this.props.fields.title} <i className=\"astrick\">*</i></label>\n                                                            <input type=\"text\"  className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" value={this.state.fieldName} ref={this.props.fields.attributeName} name=\"fieldName\" onChange={this.handleChange.bind(this)} placeholder={this.props.fields.placeholder}  required/>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"col-lg-3 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\" id=\"hide\">\n                                                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 OFFImageDiv \" id=\"LogoImageUpOne\" >\n                                                            <div><i className=\"fa fa-camera\"></i> <br /><p>UPLOAD IMAGE</p></div>\n                                                            <input onChange={this.docBrowse.bind(this)}  id=\"LogoImageUp\" type=\"file\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" title=\"\" name=\"profilePhoto\" />\n                                                        </div>\n                                                        {\n                                                          this.state.profilePhoto ?\n                                                            <div className=\"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\">\n                                                                  <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\" id=\"hide\">\n                                                                      <label className=\"labelform deletelogo col-lg-12 col-md-12 col-sm-12 col-xs-12\" id={this.state.profilePhoto} name=\"profilePhoto\" onClick={this.deleteDoc.bind(this)}>x</label>\n                                                                      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\" id=\"profilePhoto\">\n                                                                          {\n                                                                            this.state.profilePhoto.split('.').pop() === \"pdf\" || this.state.profilePhoto.split('.').pop() === \"PDF\" ?\n                                                                            <img src=\"/images/pdfImg.png\" className=\"img-responsive profileImageDivlogoStyleOF\"/>\n                                                                            \n                                                                            :\n                                                                           <img src={this.state.profilePhoto} className=\"img-responsive profileImageDivlogoStyleOF\" />\n                                                                      }\n                                                                      </div>\n                                                                  </div>\n                                                            </div>\n                                                            :\n                                                            null\n                                                        }\n                                                    </div>\n                                                    <div className=\"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\">\n                                                        {\n                                                            this.props.editId ?\n                                                            <button onClick={this.updateType.bind(this)} className=\"btn button3 pull-right\">Update</button>\n                                                            :\n                                                            <button onClick={this.submitType.bind(this)} className=\"btn button3 pull-right\">Submit</button>\n                                                        }\n                                                    </div>\n                                                    <br />\n                                                </form>\n                                            :\n                                            <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" id=\"vendorLocationType\" onSubmit={this.submitType.bind(this)} >\n                                                <div className=\"form-margin col-lg-8 col-lg-offset-2 col-md-6 col-sm-12 col-xs-12 pdcls\">\n                                                   <div id=\"OneFieldInput\">\n                                                        <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\">{this.props.fields.title} <i className=\"astrick\">*</i></label>\n                                                        <input type20=\"text\"  className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" value={this.state.fieldName} ref={this.props.fields.attributeName} name=\"fieldName\" onChange={this.handleChange.bind(this)} placeholder={this.props.fields.placeholder} required />\n                                                    </div>\n                                                </div>\n                                                <br />\n                                            </form>\n                                        }\n                                           \n                                            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                            <IAssureTable\n                                                tableHeading={this.props.tableHeading}\n                                                twoLevelHeader={this.state.twoLevelHeader}\n                                                dataCount={this.state.dataCount}\n                                                tableData={this.state.tableData}\n                                                getData={this.getData.bind(this)}\n                                                tableObjects={this.props.tableObjects}\n                                            />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </section>\n                            </div>\n                        </section>\n                    </div>\n                </div>\n            </div>\n\n        );\n    }\n}\nexport default withRouter(OneFieldForm)\n\n\n"]},"metadata":{},"sourceType":"module"}