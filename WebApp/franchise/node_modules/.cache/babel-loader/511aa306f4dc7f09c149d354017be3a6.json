{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/CenterwiseBudget.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport { render } from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport html2canvas from 'html2canvas';\nimport Chart from 'chart.js';\nimport BarChart from './BarChart.js';\nimport PieChart from './PieChart.js';\nimport CenterWisePieChart from './CenterWisePieChart.js';\nimport './Chart.css';\nimport IAssureTable from \"../../IAssureTable/IAssureTable.jsx\";\nexport default class Charts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      'year': \"FY 2019 - 2020\",\n      \"years\": [\"FY 2019 - 2020\", \"FY 2020 - 2021\", \"FY 2021 - 2022\"],\n      \"achievementFamilyUpgradation\": [],\n      \"achievementReach\": [],\n      \"annualPlanFamilyUpgradation\": [],\n      \"annualPlanReach\": [],\n      \"sector\": [],\n      piechartcolor: [],\n      \"tableHeading\": {\n        name: \"Sector\",\n        annualPlan_Reach: \"annPlan_Reach\",\n        annualPlan_FamilyUpgradation: \"anPlan_FamilyUpg\",\n        achievement_Reach: \"achie_Reach\",\n        achievement_FamilyUpgradation: \"achie_FamilyUpg\",\n        annualPlan_TotalBudget: \"annualPlan_TotalBudget\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"token\");\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    this.setState({\n      [event.target.name]: event.target.value\n    }, () => {});\n  }\n\n  getAvailableCenters() {\n    axios({\n      method: 'get',\n      url: '/api/centers/list'\n    }).then(response => {\n      this.setState({\n        availableCenters: response.data,\n        center: response.data[0].centerName + '|' + response.data[0]._id\n      }, () => {\n        var center_ID = this.state.center.split('|')[1];\n        this.setState({\n          center_ID: center_ID\n        }, () => {\n          this.getData(this.state.year, this.state.center_ID);\n        });\n      });\n    }).catch(function (error) {});\n  }\n\n  selectCenter(event) {\n    var selectedCenter = event.target.value;\n    this.setState({\n      [event.target.name]: event.target.value,\n      selectedCenter: selectedCenter\n    }, () => {\n      var center_ID = this.state.selectedCenter.split('|')[1];\n      this.setState({\n        center_ID: center_ID\n      }, () => {\n        this.getData(this.state.year, this.state.center_ID);\n      });\n    });\n  }\n\n  getData(year, center_ID) {\n    var startDate = year.substring(3, 7) + \"-04-01\";\n    var endDate = year.substring(10, 15) + \"-03-31\"; // axios.get('/api/report/annual_completion_sector/'+year+'/'+centerID)\n\n    if (startDate, endDate, center_ID) {\n      axios.get('/api/report/center/' + startDate + '/' + endDate + '/all').then(response => {\n        var sector = [];\n        var annualPlanReach = [];\n        var annualPlanFamilyUpgradation = [];\n        var achievementReach = [];\n        var achievementFamilyUpgradation = [];\n        var annualPlanTotalBudget = [];\n        var piechartcolor = [];\n\n        if (response.data && response.data.length > 0) {\n          response.data.map((data, index) => {\n            sector.push(data.name);\n            annualPlanReach.push(data.annualPlan_Reach);\n            annualPlanFamilyUpgradation.push(data.annualPlan_FamilyUpgradation);\n            achievementReach.push(data.achievement_Reach);\n            achievementFamilyUpgradation.push(data.achievement_FamilyUpgradation);\n            annualPlanTotalBudget.push(data.annualPlan_TotalBudget);\n            piechartcolor.push(this.getRandomColor());\n          });\n          this.setState({\n            \"sector\": sector.splice(-2),\n            \"annualPlanReach1\": annualPlanReach.splice(-2),\n            \"annualPlanFamilyUpgradation1\": annualPlanFamilyUpgradation.splice(-2),\n            \"achievementReach1\": achievementReach.splice(-2),\n            \"achievementFamilyUpgradation1\": achievementFamilyUpgradation.splice(-2),\n            \"annualPlan_TotalBudget1\": annualPlanTotalBudget.splice(-2)\n          }, () => {\n            this.setState({\n              \"sector\": sector,\n              \"annualPlanReach\": annualPlanReach,\n              \"annualPlanFamilyUpgradation\": annualPlanFamilyUpgradation,\n              \"achievementReach\": achievementReach,\n              \"achievementFamilyUpgradation\": achievementFamilyUpgradation,\n              \"annualPlanTotalBudget\": annualPlanTotalBudget,\n              piechartcolor: piechartcolor\n            }, () => {});\n          });\n        }\n\n        var tableData = response.data.map((a, i) => {\n          return {\n            name: a.name,\n            annualPlan_Reach: a.annualPlan_Reach,\n            annualPlan_FamilyUpgradation: a.annualPlan_FamilyUpgradation,\n            achievement_Reach: a.achievement_Reach,\n            achievement_FamilyUpgradation: a.achievement_FamilyUpgradation,\n            annualPlan_TotalBudget: a.annualPlan_TotalBudget\n          };\n        });\n        this.setState({\n          tableData: tableData\n        }, () => {});\n      }).catch(function (error) {});\n    }\n  }\n\n  getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n\n    return color;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 marginTop11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formLable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"Center\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"asterix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 60\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"center\",\n      name: \"center\",\n      value: this.state.center,\n      onChange: this.selectCenter.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      className: \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }, \"-- Select --\"), this.state.availableCenters && this.state.availableCenters.length > 0 ? this.state.availableCenters.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: data._id,\n        value: data.centerName + '|' + data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 31\n        }\n      }, data.centerName);\n    }) : null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formLable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"asterix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 56\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"year\",\n      name: \"year\",\n      value: this.state.year,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      className: \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 18\n      }\n    }, \"-- Select Year --\"), this.state.years.map((data, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 28\n        }\n      }, data);\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, \"Center wise Budget\"), /*#__PURE__*/React.createElement(CenterWisePieChart, {\n      annualPlanTotalBudget: this.state.annualPlanTotalBudget,\n      piechartcolor: this.state.piechartcolor,\n      sector: this.state.sector,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      getData: this.getData.bind(this),\n      tableHeading: this.state.tableHeading,\n      tableData: this.state.tableData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/CenterwiseBudget.js"],"names":["React","Component","moment","$","axios","render","html2canvas","Chart","BarChart","PieChart","CenterWisePieChart","IAssureTable","Charts","constructor","props","state","piechartcolor","name","annualPlan_Reach","annualPlan_FamilyUpgradation","achievement_Reach","achievement_FamilyUpgradation","annualPlan_TotalBudget","componentDidMount","defaults","headers","common","localStorage","getItem","getAvailableCenters","getData","year","center_ID","componentWillReceiveProps","nextProps","handleChange","event","preventDefault","setState","target","value","method","url","then","response","availableCenters","data","center","centerName","_id","split","catch","error","selectCenter","selectedCenter","startDate","substring","endDate","get","sector","annualPlanReach","annualPlanFamilyUpgradation","achievementReach","achievementFamilyUpgradation","annualPlanTotalBudget","length","map","index","push","getRandomColor","splice","tableData","a","i","letters","color","Math","floor","random","bind","years","tableHeading"],"mappings":"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","sourcesContent":["import React, { Component }                                  from 'react';\nimport moment               from 'moment';\nimport $                                                     from 'jquery';\nimport axios                                                 from 'axios';\nimport { render } from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport html2canvas from 'html2canvas';\nimport Chart from 'chart.js';\nimport BarChart from './BarChart.js';\nimport PieChart from './PieChart.js';\nimport CenterWisePieChart from './CenterWisePieChart.js';\nimport './Chart.css';\nimport IAssureTable           from \"../../IAssureTable/IAssureTable.jsx\";\n\nexport default class Charts extends Component{\n  \n  constructor(props) {\n   super(props);\n    this.state = {\n      'year'                        : \"FY 2019 - 2020\",\n      \"years\"                       :[\"FY 2019 - 2020\",\"FY 2020 - 2021\",\"FY 2021 - 2022\"],      \n      \"achievementFamilyUpgradation\": [],\n      \"achievementReach\"            : [],\n      \"annualPlanFamilyUpgradation\" : [],\n      \"annualPlanReach\"             : [],\n      \"sector\"                      : [],\n      piechartcolor                 : [],\n      \"tableHeading\"                : {\n        name                                    : \"Sector\",\n        annualPlan_Reach                        : \"annPlan_Reach\",\n        annualPlan_FamilyUpgradation            : \"anPlan_FamilyUpg\",    \n        achievement_Reach                       : \"achie_Reach\",\n        achievement_FamilyUpgradation           : \"achie_FamilyUpg\",       \n        annualPlan_TotalBudget                  : \"annualPlan_TotalBudget\"     \n               \n      },\n    }\n  }\n\n  componentDidMount(){\n    axios.defaults.headers.common['Authorization'] = 'Bearer '+ localStorage.getItem(\"token\");\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n    componentWillReceiveProps(nextProps){\n      this.getAvailableCenters();\n      this.getData(this.state.year, this.state.center_ID);\n    }\n    handleChange(event){\n        event.preventDefault();\n        this.setState({\n          [event.target.name] : event.target.value\n        },()=>{\n        });\n    }\n    getAvailableCenters(){\n        axios({\n          method: 'get',\n          url: '/api/centers/list',\n        }).then((response)=> {\n          this.setState({\n            availableCenters : response.data,\n            center           : response.data[0].centerName+'|'+response.data[0]._id\n          },()=>{\n            var center_ID = this.state.center.split('|')[1];\n            this.setState({\n              center_ID        : center_ID\n            },()=>{\n            this.getData(this.state.year, this.state.center_ID);\n            })\n          })\n        }).catch(function (error) {\n        });\n    } \n    selectCenter(event){\n        var selectedCenter = event.target.value;\n        this.setState({\n          [event.target.name] : event.target.value,\n          selectedCenter : selectedCenter,\n        },()=>{\n          var center_ID = this.state.selectedCenter.split('|')[1];\n          this.setState({\n            center_ID :center_ID,            \n          },()=>{\n            this.getData(this.state.year, this.state.center_ID);\n          })\n        });\n    } \n\n\n  getData(year, center_ID){\n    var startDate = year.substring(3, 7)+\"-04-01\";\n    var endDate = year.substring(10, 15)+\"-03-31\";\n    // axios.get('/api/report/annual_completion_sector/'+year+'/'+centerID)\n    if(startDate, endDate, center_ID){\n        axios.get('/api/report/center/'+startDate+'/'+endDate+'/all')\n        .then((response)=>{\n\n          var sector = [];\n          var annualPlanReach = [];\n          var annualPlanFamilyUpgradation = [];\n          var achievementReach = [];\n          var achievementFamilyUpgradation = [];\n          var annualPlanTotalBudget = [];\n          var piechartcolor =[];\n         if(response.data&&response.data.length >0){\n            response.data.map((data,index)=>{\n              sector.push(data.name);\n              annualPlanReach.push(data.annualPlan_Reach);\n              annualPlanFamilyUpgradation.push(data.annualPlan_FamilyUpgradation);\n              achievementReach.push(data.achievement_Reach);\n              achievementFamilyUpgradation.push(data.achievement_FamilyUpgradation);\n              annualPlanTotalBudget.push(data.annualPlan_TotalBudget);\n              piechartcolor.push(this.getRandomColor());\n            })\n\n          this.setState({\n            \"sector\" : sector.splice(-2),\n            \"annualPlanReach1\" : annualPlanReach.splice(-2),\n            \"annualPlanFamilyUpgradation1\" : annualPlanFamilyUpgradation.splice(-2),\n            \"achievementReach1\" : achievementReach.splice(-2),\n            \"achievementFamilyUpgradation1\" : achievementFamilyUpgradation.splice(-2),\n            \"annualPlan_TotalBudget1\" : annualPlanTotalBudget.splice(-2),\n          },()=>{\n            this.setState({\n              \"sector\"                       : sector,\n              \"annualPlanReach\"              : annualPlanReach,\n              \"annualPlanFamilyUpgradation\"  : annualPlanFamilyUpgradation,\n              \"achievementReach\"             : achievementReach,\n              \"achievementFamilyUpgradation\" : achievementFamilyUpgradation,\n              \"annualPlanTotalBudget\"       : annualPlanTotalBudget,\n              piechartcolor                 : piechartcolor\n            },()=>{\n                    \n            });\n          \n          })\n        }    \n          var tableData = response.data.map((a, i)=>{\n            return {\n                name                                    : a.name,\n                annualPlan_Reach                        : a.annualPlan_Reach,\n                annualPlan_FamilyUpgradation            : a.annualPlan_FamilyUpgradation, \n                achievement_Reach                       : a.achievement_Reach,\n                achievement_FamilyUpgradation           : a.achievement_FamilyUpgradation,            \n                annualPlan_TotalBudget                  : a.annualPlan_TotalBudget,            \n            } \n        })  \n        this.setState({\n          tableData : tableData\n        },()=>{\n        })\n      })\n      .catch(function(error){        \n      });\n    }\n  }\n\n  getRandomColor(){\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n\n  render(){ \n\n    return(\n      <div>\n      <div className=\"row\">\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 marginTop11\">\n            <div className=\" col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n                <label className=\"formLable\">Center</label><span className=\"asterix\"></span>\n                <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"center\" >\n                    <select className=\"custom-select form-control inputBox\" ref=\"center\" name=\"center\" value={this.state.center} onChange={this.selectCenter.bind(this)} >\n                        <option className=\"hidden\" >-- Select --</option>\n                        {\n                          this.state.availableCenters && this.state.availableCenters.length >0 ?\n                          this.state.availableCenters.map((data, index)=>{\n                            return(\n                              <option key={data._id} value={data.centerName+'|'+data._id}>{data.centerName}</option>\n                            );\n                          })\n                          :\n                          null\n                        }\n                    </select>\n                </div>\n            </div>\n            <div className=\" col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n              <label className=\"formLable\">Year</label><span className=\"asterix\"></span>\n              <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"year\" >\n                <select className=\"custom-select form-control inputBox\" ref=\"year\" name=\"year\" value={this.state.year}  onChange={this.handleChange.bind(this)} >\n                 <option className=\"hidden\" >-- Select Year --</option>\n                 {\n                  this.state.years.map((data, i)=>{\n                    return <option key={i}>{data}</option>\n                  })\n                 }\n                </select>\n              </div>\n            </div>  \n        </div>  \n      \n        <div className=\"col-lg-6\">\n          <h3>Center wise Budget</h3>\n          <CenterWisePieChart annualPlanTotalBudget={this.state.annualPlanTotalBudget} piechartcolor={this.state.piechartcolor}  sector={this.state.sector}/>\n        </div>\n        <div className=\"col-lg-6\">\n        <IAssureTable \n         \n          getData={this.getData.bind(this)} \n          tableHeading={this.state.tableHeading} \n          tableData={this.state.tableData} \n          />\n  \n        </div>\n      </div>  \n        <br/>\n        \n      </div>\n      );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}