{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/Master/OneFieldForm/OneFieldForm.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { withRouter } from 'react-router-dom';\nimport S3FileUpload from 'react-s3';\nimport IAssureTable from '../../IAssureTable/IAssureTable.jsx';\nimport BulkUpload from \"../BulkUpload/BulkUpload.js\";\nimport 'bootstrap/js/tab.js';\nimport './OneField.css';\n\nclass OneFieldForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"user_ID\": \"\",\n      \"startRange\": 0,\n      \"limitRange\": 10000,\n      \"editId\": '',\n      \"fieldValue\": \"\",\n      \"categoryImage\": \"\",\n      \"pageUrl\": \"\",\n      \"apiLink\": \"\"\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"props one field form = \", this.props);\n    console.log(\"this.props.oneTableObjects One form field = \", this.props.oneTableObjects); // console.log(\"this.props.oneTableObjects two form field oneeditId = \", this.props.oneeditId);\n\n    const user_ID = localStorage.getItem(\"user_ID\");\n    const companyID = localStorage.getItem(\"companyID\");\n    this.setState({\n      apiLink: this.props.tableObjects.apiLink,\n      user_ID: user_ID,\n      companyID: companyID,\n      editId: this.props.editId\n    }, () => {// console.log(\"this.state = \", this.state);\n    });\n\n    if (this.props.editId) {\n      this.edit(this.props.editId);\n    } //========  Validation  ===========\n\n\n    $.validator.addMethod(\"regxonefield\", function (value, element, regexpr) {\n      return regexpr.test(value.trim());\n    }, \"Please enter valid field value\");\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#\" + this.props.fields.attributeName).validate({\n      rules: {\n        fieldName: {\n          required: true,\n          regxonefield: /^[-a-zA-Z0-9-()]+(\\s+[-a-zA-Z0-9-()]+)*$/\n        }\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"fieldName\") {\n          error.insertAfter(\"#OneFieldInput\");\n        }\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.editId !== this.state.editId) {\n      this.setState({\n        editId: this.props.editId\n      }, () => {//console.log(\"onefieldform 31 componentDidUpdate editId = \",this.state.editId);                            \n      });\n      this.edit(this.props.editId);\n    }\n  } // componentWillReceiveProps(nextProps) {\n  //     // console.log(\"nextProps\",nextProps)\n  // }\n\n\n  handleChange(event) {\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    var fieldName = this.props.fields.attributeName;\n    this.setState({\n      fieldName: event.target.value\n    }, () => {});\n  }\n\n  submitType(event) {\n    event.preventDefault();\n\n    if (this.props.editId) {\n      var formValues = {\n        \"companyID\": this.state.companyID,\n        \"fieldID\": this.props.editId,\n        \"fieldValue\": this.state.fieldName.trim(),\n        \"iconUrl\": this.state.categoryImage,\n        \"updatedBy\": this.state.user_ID\n      }; // console.log(\"formValues\",formValues);\n\n      if ($('#' + this.props.fields.attributeName).valid()) {\n        axios.patch(this.state.apiLink + '/patch', formValues).then(response => {\n          this.setState({\n            fieldName: \"\",\n            categoryImage: \"\",\n            editId: \"\"\n          }, () => {\n            if (this.props.tableObjects.editUrl1) {\n              this.props.history.push(this.props.tableObjects.editUrl1);\n            } else {\n              this.props.history.push(this.props.tableObjects.editUrl);\n            }\n          });\n\n          if (this.props.getSecondFieldData) {\n            this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n          }\n\n          this.getData(this.state.startRange, this.state.limitRange);\n          swal(\" \", this.props.fields.title + \" updated Successfully\");\n        }).catch(error => {});\n      }\n    } else {\n      var formValues = {\n        \"companyID\": this.state.companyID,\n        \"fieldValue\": this.state.fieldName.trim(),\n        \"iconUrl\": this.state.categoryImage,\n        \"createdBy\": this.state.user_ID\n      }; // console.log(\"this.props.fields.attributeName\",this.props.fields.attributeName);\n\n      if ($('#' + this.props.fields.attributeName).valid()) {\n        // console.log('this.state.apiLink = ',this.state.apiLink);\n        axios.post(this.state.apiLink + 'post', formValues).then(response => {\n          // console.log(\"response\",response);\n          if (response.data.created) {\n            swal(\" \", this.state.fieldName + \" \" + this.props.fields.title + \" submitted Successfully\");\n          } else {\n            swal(\" \", this.state.fieldName + \" \" + this.props.fields.title + \" already exists\");\n          }\n\n          this.getData(this.state.startRange, this.state.limitRange);\n\n          if (this.props.getSecondFieldData) {\n            this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n          }\n\n          this.setState({\n            fieldName: \"\",\n            categoryImage: \"\",\n            iconUrl: \"\"\n          });\n        }).catch(error => {});\n      }\n    }\n  }\n\n  updateType(event) {\n    event.preventDefault();\n    var formValues = {\n      \"companyID\": this.state.companyID,\n      \"fieldID\": this.props.editId,\n      \"fieldValue\": this.state.fieldName.trim(),\n      \"iconUrl\": this.state.categoryImage,\n      \"updatedBy\": this.state.user_ID\n    };\n    console.log(\"Update Onefield formValues = \", formValues);\n\n    if ($('#' + this.props.fields.attributeName).valid()) {\n      axios.patch(this.state.apiLink + '/patch', formValues).then(response => {\n        console.log(\"179 response = \", response.data);\n        this.setState({\n          fieldName: \"\",\n          categoryImage: \"\",\n          editId: \"\"\n        }, () => {\n          this.getData(this.state.startRange, this.state.limitRange); // this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n\n          swal(\" \", this.props.fields.title + \" updated Successfully\");\n          this.props.history.push(this.props.tableObjects.editUrl);\n        });\n      }).catch(error => {});\n    }\n  }\n\n  getDataCount() {\n    axios.get(this.state.apiLink + 'get/count').then(response => {\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {});\n  }\n\n  getData(startRange, limitRange) {\n    // console.log(\"this.props\",this.props)\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post(this.state.apiLink + 'get/list', data).then(response => {\n      // console.log('line 205 response',response.data);\n      var tableData = response.data.map((a, i) => {\n        return {\n          _id: a._id,\n          companyID: a.companyID ? a.companyID : this.state.companyID,\n          [this.props.fields.attributeName]: a[this.props.fields.attributeName],\n          iconUrl: \"<img class='uploadedImage' src=\" + a.iconUrl + \">\"\n        };\n      });\n      var filterByCompanyID = tableData.filter(field => field.companyID == this.state.companyID);\n      this.setState({\n        [\"tableData\" + this.props.fields.attributeName]: filterByCompanyID\n      }, () => {// console.log(\"line 219 this.state = \", this.state);\n      });\n    }).catch(error => {});\n  }\n\n  edit(editId) {\n    $('label.error').html('');\n    var fieldName = this.props.fields.attributeName;\n\n    if (editId) {\n      axios.get(this.state.apiLink + 'get/one/' + editId).then(response => {\n        // console.log('line 247 response',response.data);\n        if (response.data) {\n          this.setState({\n            \"fieldName\": response.data[fieldName],\n            \"categoryImage\": response.data.iconUrl\n          }, () => {});\n        }\n      }).catch(error => {\n        console.log(\"onefieldform edit function Error = \", error);\n      });\n    }\n  }\n\n  docBrowse(event) {\n    event.preventDefault();\n    var name = event.target.name;\n    var docBrowse = [];\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      for (var i = 0; i < event.currentTarget.files.length; i++) {\n        var file = event.currentTarget.files[i];\n\n        if (file) {\n          var fileName = file.name; // console.log('fileName',fileName);\n\n          var ext = fileName.split('.').pop();\n\n          if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n            if (file) {\n              var objTitle = {\n                fileInfo: file\n              };\n              docBrowse.push(objTitle);\n            } else {\n              swal(\" \", \"Files not uploaded\");\n            } //file\n\n          } else {\n            swal(\" \", \"Allowed images formats are (jpg,png,jpeg)\");\n          } //file types\n\n        } //file\n\n      } //for \n\n\n      if (event.currentTarget.files) {\n        this.setState({\n          [\"gotImage\" + name]: true\n        });\n        main().then(formValues => {\n          this.setState({\n            [name]: formValues[0].docBrowse\n          }, () => {// console.log(\"categoryImage0\",this.state.categoryImage)\n          });\n        });\n\n        async function main() {\n          var formValues = [];\n\n          for (var j = 0; j < docBrowse.length; j++) {\n            var config = await getConfig();\n            var s3url = await s3upload(docBrowse[j].fileInfo, config, this);\n            const formValue = {\n              \"docBrowse\": s3url,\n              \"status\": \"New\"\n            };\n            formValues.push(formValue);\n          }\n\n          return Promise.resolve(formValues);\n        }\n\n        function s3upload(image, configuration) {\n          return new Promise(function (resolve, reject) {\n            S3FileUpload.uploadFile(image, configuration).then(Data => {\n              resolve(Data.location);\n            }).catch(error => {});\n          });\n        }\n\n        function getConfig() {\n          return new Promise(function (resolve, reject) {\n            axios.get('/api/projectsettings/get/S3').then(response => {\n              const config = {\n                bucketName: response.data.bucket,\n                dirName: 'propertiesImages',\n                region: response.data.region,\n                accessKeyId: response.data.key,\n                secretAccessKey: response.data.secret\n              };\n              resolve(config);\n            }).catch(function (error) {});\n          });\n        }\n      }\n    }\n  }\n\n  deleteDoc(event) {\n    event.preventDefault();\n    var name = event.target.getAttribute(\"name\");\n    this.setState({\n      [name]: \"\",\n      [\"gotImage\" + name]: false\n    }, () => {// console.log('name',this.state.categoryImage);\n    });\n  }\n\n  render() {\n    // console.log(\"this.props.editId = \",this.props.editId);\n    // console.log(\"typeof this.props.editId = \",typeof this.props.editId);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: this.props.masterFieldForm ? \"OneFieldModal\" : \"col-lg-12 col-md-12 col-sm-12 col-xs-12 pageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"weighttitle col-lg-9 col-md-9 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 37\n      }\n    }, this.props.fields.title === \"Location Type\" ? this.props.fields.title + \"s\" : this.props.fields.title, \" \"), this.props.bulkRequired ? /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav tabNav nav-pills col-lg-3 col-md-3 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"active col-lg-5 col-md-5 col-xs-5 col-sm-5 NOpadding text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"fieldTab\",\n      \"data-toggle\": \"pill\",\n      href: \"#manual\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 130\n      }\n    }, \"Manual\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"col-lg-6 col-md-6 col-xs-6 col-sm-6 NOpadding  text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"fieldTab\",\n      \"data-toggle\": \"pill\",\n      href: \"#bulk\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 124\n      }\n    }, \"Bulk Upload\"))) : null), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row tab-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"manual\",\n      className: this.props.masterFieldForm ? \"tab-pane fade in active mt\" : \"col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 41\n      }\n    }, this.props.fields.hasImage === true ? /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: this.props.fields.attributeName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-lg-offset-1 col-md-6 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"OneFieldInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 65\n      }\n    }, this.props.fields.title, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 175\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      value: this.state.fieldName,\n      ref: this.props.fields.attributeName,\n      name: \"fieldName\",\n      onChange: this.handleChange.bind(this),\n      placeholder: this.props.fields.placeholder,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 65\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-3 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\",\n      id: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 OFFImageDiv \",\n      id: \"LogoImageUpOne\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-camera\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 70\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 103\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 109\n      }\n    }, \"UPLOAD IMAGE\")), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.docBrowse.bind(this),\n      id: \"LogoImageUp\",\n      type: \"file\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      title: \"\",\n      name: \"categoryImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 65\n      }\n    })), this.state.categoryImage ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\",\n      id: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 71\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform deletelogo col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: this.state.categoryImage,\n      name: \"categoryImage\",\n      onClick: this.deleteDoc.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 75\n      }\n    }, \"x\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\",\n      id: \"categoryImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 75\n      }\n    }, this.state.categoryImage.split('.').pop() === \"pdf\" || this.state.categoryImage.split('.').pop() === \"PDF\" ? /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/pdfImg.png\",\n      className: \"img-responsive profileImageDivlogoStyleOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 81\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.categoryImage,\n      className: \"img-responsive profileImageDivlogoStyleOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 80\n      }\n    })))) : this.state.gotImagecategoryImage ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\",\n      id: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\",\n      id: \"categoryImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 77\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/loading.gif\",\n      className: \"img-responsive profileImageDivlogoStyleOF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 81\n      }\n    })))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 57\n      }\n    }, this.props.editId !== \"\" && typeof this.props.editId !== 'undefined' ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.updateType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 65\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submitType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 65\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 57\n      }\n    })) : /*#__PURE__*/React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      id: this.props.fields.attributeName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-8 col-lg-offset-2 col-md-6 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"OneFieldInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 60\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 65\n      }\n    }, this.props.fields.title, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 175\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      type20: \"text\",\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      value: this.state.fieldName,\n      ref: this.props.fields.attributeName,\n      name: \"fieldName\",\n      onChange: this.handleChange.bind(this),\n      placeholder: this.props.fields.placeholder,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 65\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 57\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 57\n      }\n    }, this.props.editId !== \"\" && typeof this.props.editId !== 'undefined' ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.updateType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 65\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submitType.bind(this),\n      className: \"btn button3 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 65\n      }\n    }, \"Submit\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"oneFieldTable col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.props.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state[\"tableData\" + this.props.fields.attributeName],\n      getData: this.getData.bind(this),\n      tableObjects: this.props.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 49\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"bulk\",\n      className: \"tab-pane fade in  col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"outerForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(BulkUpload, {\n      url: this.props.url,\n      data: this.props.data,\n      getData: this.getData.bind(this),\n      uploadedData: this.props.uploadedData,\n      fileurl: this.props.fileurl,\n      getFileDetails: this.props.getFileDetails,\n      fileDetails: this.props.fileDetails,\n      goodRecordsHeading: this.props.goodRecordsHeading,\n      failedtableHeading: this.props.failedtableHeading,\n      failedRecordsTable: this.props.failedRecordsTable,\n      failedRecordsCount: this.props.failedRecordsCount,\n      goodRecordsTable: this.props.goodRecordsTable,\n      goodDataCount: this.props.goodDataCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 49\n      }\n    })))))))))));\n  }\n\n}\n\nexport default withRouter(OneFieldForm);","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/Master/OneFieldForm/OneFieldForm.js"],"names":["React","Component","$","jQuery","axios","swal","withRouter","S3FileUpload","IAssureTable","BulkUpload","OneFieldForm","constructor","props","state","componentDidMount","console","log","oneTableObjects","user_ID","localStorage","getItem","companyID","setState","apiLink","tableObjects","editId","edit","validator","addMethod","value","element","regexpr","test","trim","setDefaults","debug","success","fields","attributeName","validate","rules","fieldName","required","regxonefield","errorPlacement","error","attr","insertAfter","componentDidUpdate","prevProps","handleChange","event","preventDefault","target","name","submitType","formValues","categoryImage","valid","patch","then","response","editUrl1","history","push","editUrl","getSecondFieldData","startRange","limitRange","getData","title","catch","post","data","created","iconUrl","updateType","getDataCount","get","dataCount","tableData","map","a","i","_id","filterByCompanyID","filter","field","html","docBrowse","currentTarget","files","length","file","fileName","ext","split","pop","objTitle","fileInfo","main","j","config","getConfig","s3url","s3upload","formValue","Promise","resolve","image","configuration","reject","uploadFile","Data","location","bucketName","bucket","dirName","region","accessKeyId","key","secretAccessKey","secret","deleteDoc","getAttribute","render","masterFieldForm","bulkRequired","hasImage","bind","placeholder","gotImagecategoryImage","tableHeading","twoLevelHeader","url","uploadedData","fileurl","getFileDetails","fileDetails","goodRecordsHeading","failedtableHeading","failedRecordsTable","failedRecordsCount","goodRecordsTable","goodDataCount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $                    from 'jquery';\nimport jQuery               from 'jquery';\nimport axios                from 'axios';\nimport swal                 from 'sweetalert';\nimport { withRouter }       from 'react-router-dom';\nimport S3FileUpload         from 'react-s3';\nimport IAssureTable         from '../../IAssureTable/IAssureTable.jsx';\nimport BulkUpload           from \"../BulkUpload/BulkUpload.js\";\nimport 'bootstrap/js/tab.js';\nimport './OneField.css'\n\nclass OneFieldForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"user_ID\"       : \"\",\n            \"startRange\"    : 0,\n            \"limitRange\"    : 10000,\n            \"editId\"        : '',\n            \"fieldValue\"    : \"\",\n            \"categoryImage\" : \"\",\n            \"pageUrl\"       : \"\",\n            \"apiLink\"       : \"\",\n        };\n    }\n    componentDidMount() {\n        console.log(\"props one field form = \", this.props);\n        console.log(\"this.props.oneTableObjects One form field = \", this.props.oneTableObjects);\n        // console.log(\"this.props.oneTableObjects two form field oneeditId = \", this.props.oneeditId);\n        const user_ID   = localStorage.getItem(\"user_ID\")\n        const companyID = localStorage.getItem(\"companyID\")\n        \n\n        this.setState({\n            apiLink     : this.props.tableObjects.apiLink,\n            user_ID     : user_ID,\n            companyID   : companyID,\n            editId      : this.props.editId\n        },()=>{\n            // console.log(\"this.state = \", this.state);\n        })\n\n        if(this.props.editId) {\n            this.edit(this.props.editId);\n        }\n\n        //========  Validation  ===========\n        $.validator.addMethod(\"regxonefield\", function (value, element, regexpr) {\n          return regexpr.test(value.trim());\n        }, \"Please enter valid field value\");            \n            jQuery.validator.setDefaults({\n              debug: true,\n              success: \"valid\"\n        });\n\n        $(\"#\"+this.props.fields.attributeName).validate({\n          rules: {\n            fieldName: {\n              required      : true,\n              regxonefield  :/^[-a-zA-Z0-9-()]+(\\s+[-a-zA-Z0-9-()]+)*$/,\n            },\n          },\n          errorPlacement: function (error, element) {\n            if (element.attr(\"name\") === \"fieldName\") {\n              error.insertAfter(\"#OneFieldInput\");\n            }\n          }\n        });\n\n    }\n   \n\n    componentDidUpdate(prevProps) {\n        if(this.props.editId !== this.state.editId){\n            this.setState({editId : this.props.editId},\n                            ()=>{\n                                //console.log(\"onefieldform 31 componentDidUpdate editId = \",this.state.editId);                            \n                         });            \n            this.edit(this.props.editId);\n        }\n    }\n\n\n    // componentWillReceiveProps(nextProps) {\n    //     // console.log(\"nextProps\",nextProps)\n    // }\n    handleChange(event) {\n        event.preventDefault();\n        const target = event.target;\n        const name = target.name;\n        var fieldName = this.props.fields.attributeName\n        this.setState({\n            fieldName : event.target.value\n        },()=>{\n        });\n    }\n    submitType(event) {\n        event.preventDefault();\n        if(this.props.editId)\n        {\n            var formValues ={\n                \"companyID\"     : this.state.companyID,\n                \"fieldID\"       : this.props.editId,\n                \"fieldValue\"    : this.state.fieldName.trim(),\n                \"iconUrl\"       : this.state.categoryImage,\n                \"updatedBy\"     : this.state.user_ID\n            }\n            // console.log(\"formValues\",formValues);\n        if ($('#'+this.props.fields.attributeName).valid()) {\n\n            axios.patch(this.state.apiLink+'/patch', formValues)\n                .then((response) => {\n                    this.setState({\n                        fieldName    : \"\",\n                        categoryImage :\"\",\n                        editId       : \"\"\n                    },()=>{\n                        if(this.props.tableObjects.editUrl1){\n                            this.props.history.push(this.props.tableObjects.editUrl1);\n                        }else{\n                            this.props.history.push(this.props.tableObjects.editUrl);\n                        }\n                    })\n                    if(this.props.getSecondFieldData){\n                        this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n                    }\n                    this.getData(this.state.startRange, this.state.limitRange);\n                    swal(\" \",this.props.fields.title+\" updated Successfully\");\n                })\n                .catch((error) => {\n                })\n        }\n        }else\n        {\n            var formValues = {\n                \"companyID\"     : this.state.companyID,\n                \"fieldValue\"    : this.state.fieldName.trim(),\n                \"iconUrl\"       : this.state.categoryImage,\n                \"createdBy\"     : this.state.user_ID\n            }\n            // console.log(\"this.props.fields.attributeName\",this.props.fields.attributeName);\n        if ($('#'+this.props.fields.attributeName).valid()) {\n            // console.log('this.state.apiLink = ',this.state.apiLink);\n            axios.post(this.state.apiLink+'post', formValues)\n                .then((response) => {\n                    // console.log(\"response\",response);\n                    if (response.data.created) {\n                        swal(\" \", this.state.fieldName+\" \"+this.props.fields.title+\" submitted Successfully\");\n                    }else{\n                        swal(\" \", this.state.fieldName+\" \"+this.props.fields.title+\" already exists\");\n                    }\n                    this.getData(this.state.startRange, this.state.limitRange);\n                    if(this.props.getSecondFieldData){\n                        this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n                    }\n                    this.setState({\n                       fieldName    : \"\",\n                       categoryImage : \"\",\n                       iconUrl      : \"\"\n                     })\n                })\n                .catch((error) => {\n                    \n                })\n        }\n\n        }      \n    }\n    updateType(event) {\n        event.preventDefault();\n\n         var formValues ={\n                \"companyID\"     : this.state.companyID,\n                \"fieldID\"       : this.props.editId,\n                \"fieldValue\"    : this.state.fieldName.trim(),\n                \"iconUrl\"       : this.state.categoryImage,\n                \"updatedBy\"     : this.state.user_ID\n            }\n            console.log(\"Update Onefield formValues = \", formValues);\n        if ($('#'+this.props.fields.attributeName).valid()) {\n            axios.patch(this.state.apiLink+'/patch', formValues)\n                .then((response) => {\n                    console.log(\"179 response = \",response.data);\n\n                    this.setState({\n                        fieldName    : \"\",\n                        categoryImage :\"\",\n                        editId       : \"\"\n                    },()=>{\n                        this.getData(this.state.startRange, this.state.limitRange);\n                        // this.props.getSecondFieldData(this.state.startRange, this.state.limitRange);\n                        swal(\" \",this.props.fields.title+\" updated Successfully\");\n                        this.props.history.push(this.props.tableObjects.editUrl);\n                    })\n                })\n                .catch((error) => {\n                })\n            }            \n    }\n    getDataCount() {\n        axios.get(this.state.apiLink+'get/count')\n            .then((response) => {\n               \n                this.setState({\n                    dataCount: response.data.dataCount\n                })\n\n            })\n            .catch((error) => {\n                \n            });\n    }\n    getData(startRange, limitRange) {\n        // console.log(\"this.props\",this.props)\n        var data = {\n            startRange: startRange,\n            limitRange: limitRange\n        }\n        axios.post(this.state.apiLink+'get/list', data)\n            .then((response) => {\n                // console.log('line 205 response',response.data);\n                var tableData = response.data.map((a, i)=>{\n                    return({\n                        _id                                 : a._id,\n                        companyID                           : a.companyID ? a.companyID : this.state.companyID,\n                        [this.props.fields.attributeName]   : a[this.props.fields.attributeName],\n                        iconUrl                             : \"<img class='uploadedImage' src=\"+a.iconUrl+\">\"\n                    })\n                })\n                var filterByCompanyID = tableData.filter(field => field.companyID == this.state.companyID);\n\n                this.setState({\n                    [\"tableData\"+this.props.fields.attributeName] : filterByCompanyID\n                },()=>{\n                    // console.log(\"line 219 this.state = \", this.state);\n                })\n\n            })\n            .catch((error) => {});\n    }\n    edit(editId) {\n        $('label.error').html('')\n        var fieldName = this.props.fields.attributeName;\n        if(editId){\n            \n            axios.get(this.state.apiLink+'get/one/' + editId)\n                .then((response) => {\n                    // console.log('line 247 response',response.data);\n                    if (response.data) {\n                        this.setState({\n                            \"fieldName\"     : response.data[fieldName],\n                            \"categoryImage\" : response.data.iconUrl,\n                        },()=>{\n                        });\n                    }\n                })\n                .catch((error) => {\n                    console.log(\"onefieldform edit function Error = \",error);                    \n                });\n\n        }\n    }\n    docBrowse(event) {\n        event.preventDefault();\n        var name = event.target.name\n        var docBrowse = [];\n        if (event.currentTarget.files && event.currentTarget.files[0]) {\n            for (var i = 0; i < event.currentTarget.files.length; i++) {\n                var file = event.currentTarget.files[i];\n                if (file) {\n                    var fileName = file.name;\n                    // console.log('fileName',fileName);\n                    var ext = fileName.split('.').pop();\n                    if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n                        if (file) {\n                            var objTitle = { fileInfo: file }\n                            docBrowse.push(objTitle);\n\n                        } else {\n                            swal(\" \",\"Files not uploaded\");\n                        }//file\n                    } else {\n                        swal(\" \",\"Allowed images formats are (jpg,png,jpeg)\");\n                    }//file types\n                }//file\n            }//for \n            \n            if (event.currentTarget.files) {\n                 this.setState({\n                    [\"gotImage\"+name]: true\n\n                })\n                main().then(formValues => {\n                        this.setState({\n                            [name]: formValues[0].docBrowse,\n                        },()=>{\n                             // console.log(\"categoryImage0\",this.state.categoryImage)\n                        })\n                });\n\n                async function main() {\n                    var formValues = [];\n                    for (var j = 0; j < docBrowse.length; j++) {\n                        var config = await getConfig();\n                        var s3url = await s3upload(docBrowse[j].fileInfo, config, this);\n                        const formValue = {\n                            \"docBrowse\": s3url,\n                            \"status\": \"New\"\n                        };\n                        formValues.push(formValue);\n                    }\n                    return Promise.resolve(formValues);\n                }\n\n\n                function s3upload(image, configuration) {\n\n                    return new Promise(function (resolve, reject) {\n                        S3FileUpload\n                            .uploadFile(image, configuration)\n                            .then((Data) => {\n                                resolve(Data.location);\n                            })\n                            .catch((error) => {\n                            })\n                    })\n                }\n                function getConfig() {\n                  return new Promise(function (resolve, reject) {\n                      axios\n                        .get('/api/projectsettings/get/S3')\n                        .then((response) => {\n                            const config = {\n                                bucketName: response.data.bucket,\n                                dirName: 'propertiesImages',\n                                region: response.data.region,\n                                accessKeyId: response.data.key,\n                                secretAccessKey: response.data.secret,\n                            }\n                            resolve(config);\n                        })\n                        .catch(function (error) {\n                        })\n                    })\n                }\n            }\n        }\n    }\n    deleteDoc(event){\n        event.preventDefault();\n        var name = event.target.getAttribute(\"name\");\n        this.setState({\n            [name]: \"\",\n            [\"gotImage\"+name]: false\n\n        },()=>{\n        // console.log('name',this.state.categoryImage);\n        })\n    }\n\n    render() {\n        // console.log(\"this.props.editId = \",this.props.editId);\n        // console.log(\"typeof this.props.editId = \",typeof this.props.editId);\n\n        return (\n            <div className=\"\">\n                <div className=\"\">\n                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\">\n                    <section className=\"content\">\n                        <div className={this.props.masterFieldForm ? \"OneFieldModal\" : \"col-lg-12 col-md-12 col-sm-12 col-xs-12 pageContent\"}>\n                            <div className=\"row\">\n                                <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                                    <h4 className=\"weighttitle col-lg-9 col-md-9 col-xs-12 col-sm-12 NOpadding-right\">{this.props.fields.title === \"Location Type\"? this.props.fields.title+\"s\" : this.props.fields.title } </h4>\n                                    {\n                                        this.props.bulkRequired ?\n                                            <ul className=\"nav tabNav nav-pills col-lg-3 col-md-3 col-sm-12 col-xs-12\">\n                                                <li className=\"active col-lg-5 col-md-5 col-xs-5 col-sm-5 NOpadding text-center\"><a className=\"fieldTab\" data-toggle=\"pill\" href=\"#manual\">Manual</a></li>\n                                                <li className=\"col-lg-6 col-md-6 col-xs-6 col-sm-6 NOpadding  text-center\"><a className=\"fieldTab\" data-toggle=\"pill\" href=\"#bulk\">Bulk Upload</a></li>\n                                            </ul>\n                                        : null \n                                    }\n                                </div>\n                                <section className=\"Content\">\n                                    <div className=\"row tab-content\">\n                                        <div id=\"manual\" className={this.props.masterFieldForm ? \"tab-pane fade in active mt\": \"col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-12 col-xs-12\"}>\n                                            {\n                                                this.props.fields.hasImage === true \n                                                ?\n                                                    <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" id={this.props.fields.attributeName} >\n                                                        <div className=\"form-margin col-lg-6 col-lg-offset-1 col-md-6 col-sm-12 col-xs-12 pdcls\">\n                                                            <div id=\"OneFieldInput\">\n                                                                <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\">{this.props.fields.title} <i className=\"astrick\">*</i></label>\n                                                                <input type=\"text\"  className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" value={this.state.fieldName} ref={this.props.fields.attributeName} name=\"fieldName\" onChange={this.handleChange.bind(this)} placeholder={this.props.fields.placeholder}  required/>\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"col-lg-3 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\" id=\"hide\">\n                                                            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 OFFImageDiv \" id=\"LogoImageUpOne\" >\n                                                                <div><i className=\"fa fa-camera\"></i> <br /><p>UPLOAD IMAGE</p></div>\n                                                                <input onChange={this.docBrowse.bind(this)}  id=\"LogoImageUp\" type=\"file\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" title=\"\" name=\"categoryImage\" />\n                                                            </div>\n                                                            {\n                                                              this.state.categoryImage ?\n                                                                <div className=\"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\">\n                                                                      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\" id=\"hide\">\n                                                                          <label className=\"labelform deletelogo col-lg-12 col-md-12 col-sm-12 col-xs-12\" id={this.state.categoryImage} name=\"categoryImage\" onClick={this.deleteDoc.bind(this)}>x</label>\n                                                                          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\" id=\"categoryImage\">\n                                                                              {\n                                                                                this.state.categoryImage.split('.').pop() === \"pdf\" || this.state.categoryImage.split('.').pop() === \"PDF\" ?\n                                                                                <img src=\"/images/pdfImg.png\" className=\"img-responsive profileImageDivlogoStyleOF\"/>\n                                                                                \n                                                                                :\n                                                                               <img src={this.state.categoryImage} className=\"img-responsive profileImageDivlogoStyleOF\" />\n                                                                          }\n                                                                          </div>\n                                                                      </div>\n                                                                </div>\n                                                                :\n                                                                 ( this.state.gotImagecategoryImage  ?\n                                                                    <div className=\"col-lg-12 col-md-2 col-sm-12 col-xs-12 nopadding CustomImageUploadOF\">\n                                                                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding marginsBottom\" id=\"hide\">\n                                                                            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 brdlogosOF\" id=\"categoryImage\">\n                                                                                <img src=\"/images/loading.gif\" className=\"img-responsive profileImageDivlogoStyleOF\"/>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                :\n                                                                null\n                                                                \n                                                                )\n                                                            }\n                                                        </div>\n                                                        <div className=\"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\">\n                                                            {\n                                                                (this.props.editId !== \"\" && typeof this.props.editId !== 'undefined') ?\n                                                                <button onClick={this.updateType.bind(this)} className=\"btn button3 pull-right\">Update</button>\n                                                                :\n                                                                <button onClick={this.submitType.bind(this)} className=\"btn button3 pull-right\">Submit</button>\n                                                            }\n                                                        </div>\n                                                        <br />\n                                                    </form>\n                                                :\n                                                    <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" id={this.props.fields.attributeName}>\n                                                        <div className=\"form-margin col-lg-8 col-lg-offset-2 col-md-6 col-sm-12 col-xs-12 pdcls\">\n                                                           <div id=\"OneFieldInput\">\n                                                                <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-left\">{this.props.fields.title} <i className=\"astrick\">*</i></label>\n                                                                <input type20=\"text\"  className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" value={this.state.fieldName} ref={this.props.fields.attributeName} name=\"fieldName\" onChange={this.handleChange.bind(this)} placeholder={this.props.fields.placeholder} required />\n                                                            </div>\n                                                        </div>\n                                                        <br />\n                                                        <div className=\"form-margin col-lg-6 col-lg-offset-6 col-md-6 col-sm-12 col-xs-12\">\n                                                            {\n                                                                (this.props.editId !== \"\" && typeof this.props.editId !== 'undefined') ?\n                                                                <button onClick={this.updateType.bind(this)} className=\"btn button3 pull-right\">Update</button>\n                                                                :\n                                                                <button onClick={this.submitType.bind(this)} className=\"btn button3 pull-right\">Submit</button>\n                                                            }\n                                                        </div>\n                                                    </form>\n                                            }\n                                            <div className=\"oneFieldTable col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                                <IAssureTable\n                                                    tableHeading={this.props.tableHeading}\n                                                    twoLevelHeader={this.state.twoLevelHeader}\n                                                    dataCount={this.state.dataCount}\n                                                    tableData={this.state[\"tableData\"+this.props.fields.attributeName]}\n                                                    getData={this.getData.bind(this)}\n                                                    tableObjects={this.props.tableObjects}\n                                                />\n                                            </div>\n                                        </div>\n                                        <div id=\"bulk\" className=\"tab-pane fade in  col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\">\n                                            <div className=\"outerForm\">\n                                                <BulkUpload \n                                                    url ={this.props.url}\n                                                    data ={this.props.data}\n                                                    getData={this.getData.bind(this)}\n                                                    uploadedData ={this.props.uploadedData}\n                                                    fileurl ={this.props.fileurl}\n                                                    getFileDetails ={this.props.getFileDetails}\n                                                    fileDetails ={this.props.fileDetails}\n                                                    goodRecordsHeading ={this.props.goodRecordsHeading}\n                                                    failedtableHeading ={this.props.failedtableHeading}\n                                                    failedRecordsTable ={this.props.failedRecordsTable}\n                                                    failedRecordsCount ={this.props.failedRecordsCount}\n                                                    goodRecordsTable ={this.props.goodRecordsTable}\n                                                    goodDataCount ={this.props.goodDataCount}\n                                                    />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </section>\n                            </div>\n                        </div>\n                    </section>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default withRouter(OneFieldForm)\n\n\n"]},"metadata":{},"sourceType":"module"}