{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/SourcewiseBarChart1.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport { render } from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport html2canvas from 'html2canvas';\nimport Chart from 'chart.js';\nimport SourcewiseBarChart from './SourcewiseBarChart.js';\nimport './Chart.css';\nimport IAssureTable from \"../../IAssureTable/IAssureTable.jsx\";\nexport default class SourcewiseBarChart1 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      'year': \"FY 2019 - 2020\",\n      \"years\": [\"FY 2019 - 2020\", \"FY 2020 - 2021\", \"FY 2021 - 2022\"],\n      \"per_cum_achi\": [],\n      \"cum_achi\": [],\n      \"cum_monthly\": [],\n      \"annualPlan\": [],\n      \"source\": [],\n      \"tableHeading\": {\n        source: \"source\",\n        annualPlan: \"annualPlan\",\n        cum_monthly: \"cum_monthly\",\n        cum_achi: \"cum_achi\",\n        per_cum_achi: \"per_cum_achi\",\n        monthlyPlan: \"monthlyPlan\",\n        achi_month: \"achi_month\",\n        per_achi: \"per_achi\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"token\");\n    var token = localStorage.getItem(\"token\");\n    this.setState({\n      token: token\n    }, () => {});\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    this.setState({\n      [event.target.name]: event.target.value\n    }, () => {});\n  }\n\n  getAvailableCenters() {\n    axios({\n      method: 'get',\n      url: '/api/centers/list'\n    }).then(response => {\n      this.setState({\n        availableCenters: response.data,\n        center: response.data[0].centerName + '|' + response.data[0]._id\n      }, () => {\n        var center_ID = this.state.center.split('|')[1];\n        this.setState({\n          center_ID: center_ID\n        }, () => {\n          this.getData(this.state.year, this.state.center_ID);\n        });\n      });\n    }).catch(function (error) {});\n  }\n\n  selectCenter(event) {\n    var selectedCenter = event.target.value;\n    this.setState({\n      [event.target.name]: event.target.value,\n      selectedCenter: selectedCenter\n    }, () => {\n      var center_ID = this.state.selectedCenter.split('|')[1];\n      this.setState({\n        center_ID: center_ID\n      }, () => {\n        this.getData(this.state.year, this.state.center_ID);\n      });\n    });\n  }\n\n  getData(year, center_ID) {\n    var startDate = year.substring(3, 7) + \"-04-01\";\n    var endDate = moment(new Date()).format(\"YYYY-MM-DD\");\n    var token = this.state.token;\n\n    if (startDate, endDate, center_ID, token) {\n      axios({\n        method: 'get',\n        url: 'http://localhost:3054/api/report/source/' + startDate + '/' + endDate + '/' + center_ID,\n        auth: {\n          'bearer': token\n        },\n        token: token\n      }) // axios.get('/api/report/source/'+startDate+'/'+endDate+'/'+center_ID, token)\n      .then(response => {\n        this.setState({\n          tableData: response.data\n        }, () => {});\n        var source = [];\n        var annualPlan = [];\n        var cum_monthly = [];\n        var cum_achi = [];\n        var per_cum_achi = [];\n        var monthlyPlan = [];\n        var achi_month = [];\n        var per_achi = [];\n\n        if (response.data && response.data.length > 0) {\n          response.data.map((data, index) => {\n            source.push(data.source);\n            annualPlan.push(data.annualPlan);\n            cum_monthly.push(data.cum_monthly);\n            cum_achi.push(data.cum_achi);\n            per_cum_achi.push(data.per_cum_achi);\n            monthlyPlan.push(data.monthlyPlan);\n            achi_month.push(data.achi_month);\n            per_achi.push(data.per_achi);\n          });\n          this.setState({\n            \"source\": source.splice(-1),\n            \"annualPlan1\": annualPlan.splice(-1),\n            \"cum_monthly1\": cum_monthly.splice(-1),\n            \"cum_achi1\": cum_achi.splice(-1),\n            \"per_cum_achi1\": per_cum_achi.splice(-1),\n            \"monthlyPlan1\": monthlyPlan.splice(-1),\n            \"achi_month1\": achi_month.splice(-1),\n            \"per_achi1\": per_achi.splice(-1)\n          }, () => {\n            this.setState({\n              \"source\": source,\n              \"annualPlan\": annualPlan,\n              \"cum_monthly\": cum_monthly,\n              \"cum_achi\": cum_achi,\n              \"per_cum_achi\": per_cum_achi,\n              \"monthlyPlan\": monthlyPlan,\n              \"achi_month\": achi_month,\n              \"per_achi\": per_achi\n            });\n          });\n        }\n\n        var tableData = response.data.map((a, i) => {\n          return {\n            source: a.source,\n            annualPlan: a.annualPlan,\n            cum_monthly: a.cum_monthly,\n            cum_achi: a.cum_achi,\n            per_cum_achi: a.per_cum_achi,\n            monthlyPlan: a.monthlyPlan,\n            achi_month: a.achi_month,\n            per_achi: a.per_achi\n          };\n        });\n        this.setState({\n          tableData: tableData\n        }, () => {});\n      }).catch(function (error) {});\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 marginTop11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formLable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"Center\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"asterix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 60\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"center\",\n      name: \"center\",\n      value: this.state.center,\n      onChange: this.selectCenter.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      className: \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }, \"-- Select --\"), this.state.availableCenters && this.state.availableCenters.length > 0 ? this.state.availableCenters.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: data._id,\n        value: data.centerName + '|' + data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 31\n        }\n      }, data.centerName);\n    }) : null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formLable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"asterix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 56\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"year\",\n      name: \"year\",\n      value: this.state.year,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      className: \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 18\n      }\n    }, \"-- Select Year --\"), this.state.years.map((data, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 28\n        }\n      }, data);\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SourcewiseBarChart, {\n      per_achi: this.state.per_achi,\n      achi_month: this.state.achi_month,\n      monthlyPlan: this.state.monthlyPlan,\n      annualPlan: this.state.annualPlan,\n      source: this.state.source,\n      cum_monthly: this.state.cum_monthly,\n      cum_achi: this.state.cum_achi,\n      per_cum_achi: this.state.per_cum_achi,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      getData: this.getData.bind(this),\n      tableHeading: this.state.tableHeading,\n      tableData: this.state.tableData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/SourcewiseBarChart1.js"],"names":["React","Component","moment","$","axios","render","html2canvas","Chart","SourcewiseBarChart","IAssureTable","SourcewiseBarChart1","constructor","props","state","source","annualPlan","cum_monthly","cum_achi","per_cum_achi","monthlyPlan","achi_month","per_achi","componentDidMount","defaults","headers","common","localStorage","getItem","token","setState","getAvailableCenters","getData","year","center_ID","componentWillReceiveProps","nextProps","handleChange","event","preventDefault","target","name","value","method","url","then","response","availableCenters","data","center","centerName","_id","split","catch","error","selectCenter","selectedCenter","startDate","substring","endDate","Date","format","auth","tableData","length","map","index","push","splice","a","i","bind","years","tableHeading"],"mappings":"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","sourcesContent":["import React, { Component }                                  from 'react';\nimport moment               from 'moment';\nimport $                                                     from 'jquery';\nimport axios                                                 from 'axios';\nimport { render } from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport html2canvas from 'html2canvas';\nimport Chart from 'chart.js';\nimport SourcewiseBarChart from './SourcewiseBarChart.js';\nimport './Chart.css';\nimport IAssureTable           from \"../../IAssureTable/IAssureTable.jsx\";\n\nexport default class SourcewiseBarChart1 extends Component{\n  \n  constructor(props) {\n   super(props);\n    this.state = {\n      'year'                        : \"FY 2019 - 2020\",\n      \"years\"                       :[\"FY 2019 - 2020\",\"FY 2020 - 2021\",\"FY 2021 - 2022\"],      \n      \"per_cum_achi\": [],\n      \"cum_achi\"            : [],\n      \"cum_monthly\" : [],\n      \"annualPlan\"             : [],\n      \"source\"                      : [],\n      \"tableHeading\"                : {\n        source       : \"source\",\n        annualPlan   : \"annualPlan\",\n        cum_monthly  : \"cum_monthly\",\n        cum_achi     : \"cum_achi\",\n        per_cum_achi : \"per_cum_achi\",\n        monthlyPlan  : \"monthlyPlan\",\n        achi_month   : \"achi_month\",\n        per_achi     : \"per_achi\",  \n               \n      },\n\n\n    }\n  }\n  \n  componentDidMount(){\n    axios.defaults.headers.common['Authorization'] = 'Bearer '+ localStorage.getItem(\"token\");\n    var token= localStorage.getItem(\"token\");\n    this.setState({\n      token : token\n    },()=>{\n    })\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }  \n  componentWillReceiveProps(nextProps){\n    this.getAvailableCenters();\n    this.getData(this.state.year, this.state.center_ID);\n  }\n  handleChange(event){\n      event.preventDefault();\n      this.setState({\n        [event.target.name] : event.target.value\n      },()=>{\n      });\n  }\n  getAvailableCenters(){\n      axios({\n        method: 'get',\n        url: '/api/centers/list',\n      }).then((response)=> {\n        this.setState({\n          availableCenters : response.data,\n          center           : response.data[0].centerName+'|'+response.data[0]._id\n        },()=>{\n          var center_ID = this.state.center.split('|')[1];\n          this.setState({\n            center_ID        : center_ID\n          },()=>{\n          this.getData(this.state.year, this.state.center_ID);\n          })\n        })\n      }).catch(function (error) {\n      });\n  } \n  selectCenter(event){\n      var selectedCenter = event.target.value;\n      this.setState({\n        [event.target.name] : event.target.value,\n        selectedCenter : selectedCenter,\n      },()=>{\n        var center_ID = this.state.selectedCenter.split('|')[1];\n        this.setState({\n          center_ID :center_ID,            \n        },()=>{\n          this.getData(this.state.year, this.state.center_ID);\n        })\n      });\n  } \n\n  getData(year, center_ID){\n    var startDate = year.substring(3, 7)+\"-04-01\";\n    var endDate = moment(new Date()).format(\"YYYY-MM-DD\");\n    var token = this.state.token;\n    if(startDate, endDate, center_ID, token){\n        axios({\n          method  : 'get',\n          url     : 'http://localhost:3054/api/report/source/'+startDate+'/'+endDate+'/'+center_ID,\n          auth  : {\n                     'bearer': token\n                    },\n          token : token\n        })\n        // axios.get('/api/report/source/'+startDate+'/'+endDate+'/'+center_ID, token)\n        .then((response)=>{\n        \n        this.setState({\n          tableData : response.data\n        },()=>{\n        })\n          var source = [];\n          var annualPlan = [];\n          var cum_monthly = [];\n          var cum_achi = [];\n          var per_cum_achi = [];\n          var monthlyPlan = [];\n          var achi_month = [];\n          var per_achi = [];\n         if(response.data&&response.data.length >0){\n            response.data.map((data,index)=>{\n              source.push(data.source);\n              annualPlan.push(data.annualPlan);\n              cum_monthly.push(data.cum_monthly);\n              cum_achi.push(data.cum_achi);\n              per_cum_achi.push(data.per_cum_achi);\n              monthlyPlan.push(data.monthlyPlan);\n              achi_month.push(data.achi_month);\n              per_achi.push(data.per_achi);\n            })\n          this.setState({\n            \"source\" : source.splice(-1),\n            \"annualPlan1\" : annualPlan.splice(-1),\n            \"cum_monthly1\" : cum_monthly.splice(-1),\n            \"cum_achi1\" : cum_achi.splice(-1),\n            \"per_cum_achi1\" : per_cum_achi.splice(-1),\n            \"monthlyPlan1\" : monthlyPlan.splice(-1),\n            \"achi_month1\" : achi_month.splice(-1),\n            \"per_achi1\" : per_achi.splice(-1),\n          },()=>{\n             this.setState({\n            \"source\" : source,\n            \"annualPlan\" : annualPlan,\n            \"cum_monthly\" : cum_monthly,\n            \"cum_achi\" : cum_achi,\n            \"per_cum_achi\" : per_cum_achi,\n            \"monthlyPlan\" : monthlyPlan,\n            \"achi_month\" : achi_month,\n            \"per_achi\" : per_achi,\n          });\n        \n          })\n        }\n        var tableData = response.data.map((a, i)=>{\n            return {\n              source       : a.source,\n              annualPlan   : a.annualPlan,\n              cum_monthly  : a.cum_monthly,\n              cum_achi     : a.cum_achi,\n              per_cum_achi : a.per_cum_achi,\n              monthlyPlan  : a.monthlyPlan,\n              achi_month   : a.achi_month,\n              per_achi     : a.per_achi,            \n            } \n        })  \n        this.setState({\n          tableData : tableData\n        },()=>{\n        })\n      })\n      .catch(function(error){        \n      });\n    }\n  }\n\n  render(){ \n    \n    return(\n      <div>\n      <div className=\"row\">\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 marginTop11\">\n            <div className=\" col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n                <label className=\"formLable\">Center</label><span className=\"asterix\"></span>\n                <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"center\" >\n                    <select className=\"custom-select form-control inputBox\" ref=\"center\" name=\"center\" value={this.state.center} onChange={this.selectCenter.bind(this)} >\n                        <option className=\"hidden\" >-- Select --</option>\n                        {\n                          this.state.availableCenters && this.state.availableCenters.length >0 ?\n                          this.state.availableCenters.map((data, index)=>{\n                            return(\n                              <option key={data._id} value={data.centerName+'|'+data._id}>{data.centerName}</option>\n                            );\n                          })\n                          :\n                          null\n                        }\n                    </select>\n                </div>\n            </div>\n            <div className=\" col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n              <label className=\"formLable\">Year</label><span className=\"asterix\"></span>\n              <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"year\" >\n                <select className=\"custom-select form-control inputBox\" ref=\"year\" name=\"year\" value={this.state.year}  onChange={this.handleChange.bind(this)} >\n                 <option className=\"hidden\" >-- Select Year --</option>\n                 {\n                  this.state.years.map((data, i)=>{\n                    return <option key={i}>{data}</option>\n                  })\n                 }\n                </select>\n              </div>\n            </div>  \n        </div>  \n        <div className=\"col-lg-6\">\n          <SourcewiseBarChart per_achi={this.state.per_achi} achi_month={this.state.achi_month} monthlyPlan={this.state.monthlyPlan} annualPlan={this.state.annualPlan} source={this.state.source} cum_monthly={this.state.cum_monthly} cum_achi={this.state.cum_achi} per_cum_achi={this.state.per_cum_achi}/>\n        </div>\n        <div className=\"col-lg-6\">\n          <IAssureTable \n         \n          getData={this.getData.bind(this)} \n          tableHeading={this.state.tableHeading} \n          tableData={this.state.tableData} \n          />\n  \n        </div>\n     \n      </div>  \n        <br/>\n        \n      </div>\n      );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}