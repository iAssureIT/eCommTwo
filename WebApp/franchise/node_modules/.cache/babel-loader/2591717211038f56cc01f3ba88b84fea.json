{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/product/sectionManagement/component/SectionManagement.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport ReactTable from \"react-table\";\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport S3FileUpload from 'react-s3'; // import validator              from 'validator';\n\nimport IAssureTable from '../../../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport 'jquery-validation';\nimport 'bootstrap/js/tab.js';\nimport '../css/SectionManagement.css';\n\nclass SectionManagement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"addEditMode\": \"\",\n      \"tableHeading\": {\n        section: \"Section\",\n        section: \"Section Title\",\n        actions: 'Action'\n      },\n      \"tableObjects\": {\n        deleteMethod: 'delete',\n        apiLink: '/api/sections/',\n        paginationApply: true,\n        searchApply: false,\n        editUrl: '/section-management'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": this.props.match.params ? this.props.match.params.sectionID : ''\n    };\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    var editId = nextProps.match.params.sectionID;\n\n    if (nextProps.match.params.sectionID) {\n      this.setState({\n        editId: editId\n      });\n      this.edit(editId);\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    if (this.state.editId) {\n      this.edit(this.state.editId);\n    }\n\n    $.validator.addMethod(\"regxA1\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid section title\");\n    $.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#sectionManagement\").validate({\n      rules: {\n        section: {\n          required: true,\n          regxA1: /^[a-zA-Z0-9@&()_+-\\s]*$/i\n        } // /^[^-\\s][a-zA-Z0-9_\\s-]+$/\n\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"section\") {\n          error.insertAfter(\"#section\");\n        }\n\n        if (element.attr(\"name\") === \"section\") {\n          error.insertAfter(\"#section\");\n        }\n      }\n    });\n    this.getDataCount();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n\n  getDataCount() {\n    axios.get('/api/sections/get/count').then(response => {\n      console.log('dataCount', response.data);\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  getData(startRange, limitRange) {\n    axios.get('/api/sections/get/list-with-limits/' + startRange + '/' + limitRange).then(response => {\n      console.log('tableData', response.data);\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  } // submitsection(event){\n  //   event.preventDefault();\n  //   if($('#sectionManagement').valid()){\n  //     var formValues = {\n  //         \"section\"                  : this.state.section,\n  //         \"createdBy\"                : localStorage.getItem(\"admin_ID\")\n  //     }\n  //     axios.post('/api/sections/post', formValues)\n  //       .then((response)=>{\n  //         swal({\n  //           text  : response.data.message,\n  //           title : response.data.message,\n  //         });\n  //         this.setState({\n  //           \"section\"                      : 'Select',\n  //           \"sectionUrl\"                   : '',\n  //           \"addEditModeSubsection\"        : '',\n  //         });\n  //         this.getData(this.state.startRange, this.state.limitRange);\n  //       })\n  //       .catch((error)=>{\n  //         console.log('error', error);\n  //       });\n  //   }\n  // }\n\n\n  submitsection(event) {\n    event.preventDefault();\n\n    if ($('#sectionManagement').valid()) {\n      var formValues = {\n        \"section\": this.state.section,\n        \"sectionRank\": this.state.sectionRank,\n        \"createdBy\": localStorage.getItem(\"admin_ID\")\n      };\n      axios.post('/api/sections/post', formValues).then(response => {\n        swal({\n          title: response.data.message\n        });\n        this.setState({\n          \"section\": '',\n          \"sectionUrl\": '',\n          \"addEditModeSubsection\": '',\n          \"sectionRank\": ''\n        });\n        this.getData(this.state.startRange, this.state.limitRange);\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  updatesection(event) {\n    event.preventDefault();\n\n    if ($('#sectionManagement').valid()) {\n      var formValues = {\n        \"sectionID\": this.props.match.params.sectionID,\n        \"section\": this.state.section,\n        \"sectionRank\": this.state.sectionRank\n      }; // console.log('form', formValues);\n\n      axios.patch('/api/sections/patch', formValues).then(response => {\n        swal({\n          title: response.data.message\n        });\n        this.getData(this.state.startRange, this.state.limitRange);\n        this.setState({\n          \"section\": '',\n          \"sectionUrl\": '',\n          \"editId\": '',\n          \"sectionRank\": ''\n        });\n        this.props.history.push('/section-management');\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  edit(id) {\n    axios.get('/api/sections/get/one/' + id).then(response => {\n      console.log('edit', response.data);\n\n      if (response.data) {\n        this.setState({\n          \"section\": response.data.section,\n          \"sectionRank\": response.data.sectionRank,\n          \"sectionUrl\": response.data.sectionUrl\n        });\n      } else {\n        this.setState({});\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  createsectionUrl(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n    var url = event.target.value; // console.log('url',url);\n\n    if (url) {\n      url = url.replace(/\\s+/g, '-').toLowerCase(); // $(\".productUrl\").val(url);\n\n      this.setState({\n        sectionUrl: url\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 23\n      }\n    }, \"Section Master \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 marginTopp NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"sectionManagement\",\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 31\n      }\n    }, \"Section Title \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 52\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.section,\n      name: \"section\",\n      id: \"section\",\n      onChange: this.createsectionUrl.bind(this),\n      type: \"text\",\n      className: \"form-control edit-catg-new\",\n      placeholder: \"Section Title\",\n      ref: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 31\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 31\n      }\n    }, \"Section URL \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 50\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      value: this.state.sectionUrl,\n      onChange: this.handleChange.bind(this),\n      id: \"sectionUrl\",\n      name: \"sectionUrl\",\n      type: \"text\",\n      className: \"form-control sectionUrl\",\n      placeholder: \"Section URL\",\n      ref: \"sectionUrl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 31\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 35\n      }\n    }, \"Section Rank \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 55\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.sectionRank,\n      onChange: this.handleChange.bind(this),\n      id: \"sectionRank\",\n      name: \"sectionRank\",\n      type: \"number\",\n      className: \"form-control sectionRank\",\n      placeholder: \"Section Rank\",\n      ref: \"sectionRank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 35\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 29\n      }\n    }, \"\\xA0\"), this.state.editId ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.updatesection.bind(this),\n      className: \"col-lg-12 btn-primary btn \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 35\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submitsection.bind(this),\n      className: \" col-lg-12 btn-primary btn \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 35\n      }\n    }, \"Submit\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getData.bind(this),\n      tableObjects: this.state.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 25\n      }\n    }))))))))));\n  }\n\n}\n\nexport default SectionManagement;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/product/sectionManagement/component/SectionManagement.js"],"names":["React","Component","$","axios","ReactTable","swal","_","S3FileUpload","IAssureTable","SectionManagement","constructor","props","state","section","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","match","params","sectionID","handleChange","event","target","name","setState","value","componentWillReceiveProps","nextProps","editId","edit","componentDidMount","window","scrollTo","validator","addMethod","element","regexpr","test","setDefaults","debug","success","validate","rules","required","regxA1","errorPlacement","error","attr","insertAfter","getDataCount","getData","startRange","limitRange","get","then","response","console","log","data","dataCount","catch","tableData","submitsection","preventDefault","valid","formValues","sectionRank","localStorage","getItem","post","title","message","updatesection","patch","history","push","id","sectionUrl","createsectionUrl","url","replace","toLowerCase","render","bind","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport ReactTable from \"react-table\";\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport S3FileUpload from 'react-s3';\n// import validator              from 'validator';\nimport IAssureTable from '../../../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport 'jquery-validation';\nimport 'bootstrap/js/tab.js';\nimport '../css/SectionManagement.css';\n\n\nclass SectionManagement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"addEditMode\": \"\",\n\n      \"tableHeading\": {\n        section: \"Section\",\n        section: \"Section Title\",\n        actions: 'Action',\n      },\n      \"tableObjects\": {\n        deleteMethod: 'delete',\n        apiLink: '/api/sections/',\n        paginationApply: true,\n        searchApply: false,\n        editUrl: '/section-management'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": this.props.match.params ? this.props.match.params.sectionID : ''\n    };\n  }\n  handleChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value,\n    });\n  }\n  componentWillReceiveProps(nextProps) {\n    var editId = nextProps.match.params.sectionID;\n    if (nextProps.match.params.sectionID) {\n      this.setState({\n        editId: editId\n      })\n      this.edit(editId);\n    }\n  }\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    if (this.state.editId) {\n      this.edit(this.state.editId);\n    }\n    \n    $.validator.addMethod(\"regxA1\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid section title\");\n\n    $.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n\n    $(\"#sectionManagement\").validate({\n      rules: {\n        \n        section: {\n          required: true,\n          regxA1: /^[a-zA-Z0-9@&()_+-\\s]*$/i,\n        },\n        // /^[^-\\s][a-zA-Z0-9_\\s-]+$/\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"section\") {\n          error.insertAfter(\"#section\");\n        }\n\n        if (element.attr(\"name\") === \"section\") {\n          error.insertAfter(\"#section\");\n        }\n      }\n    });\n    this.getDataCount();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n  getDataCount() {\n    axios.get('/api/sections/get/count')\n      .then((response) => {\n        console.log('dataCount', response.data);\n        this.setState({\n          dataCount: response.data.dataCount\n        })\n      })\n      .catch((error) => {\n        console.log('error', error);\n      });\n\n  }\n  getData(startRange, limitRange) {\n    axios.get('/api/sections/get/list-with-limits/' + startRange + '/' + limitRange)\n      .then((response) => {\n        console.log('tableData', response.data);\n        this.setState({\n          tableData: response.data\n        })\n      })\n      .catch((error) => {\n        console.log('error', error);\n      });\n    }\n    \n    // submitsection(event){\n    //   event.preventDefault();\n    //   if($('#sectionManagement').valid()){\n    //     var formValues = {\n    //         \"section\"                  : this.state.section,\n    //         \"createdBy\"                : localStorage.getItem(\"admin_ID\")\n    //     }\n    //     axios.post('/api/sections/post', formValues)\n    //       .then((response)=>{\n    //         swal({\n    //           text  : response.data.message,\n    //           title : response.data.message,\n    //         });\n    //         this.setState({\n    //           \"section\"                      : 'Select',\n    //           \"sectionUrl\"                   : '',\n    //           \"addEditModeSubsection\"        : '',\n    //         });\n    //         this.getData(this.state.startRange, this.state.limitRange);\n    //       })\n    //       .catch((error)=>{\n    //         console.log('error', error);\n    //       });\n    //   }\n    // }\n\n  submitsection(event) {\n    event.preventDefault();\n    if ($('#sectionManagement').valid()) {\n      var formValues = {\n        \"section\": this.state.section,\n        \"sectionRank\" : this.state.sectionRank,\n        \"createdBy\": localStorage.getItem(\"admin_ID\")\n      }\n      axios.post('/api/sections/post', formValues)\n        .then((response) => {\n          swal({\n            title: response.data.message,\n          });\n          this.setState({\n            \"section\": '',\n            \"sectionUrl\": '',\n            \"addEditModeSubsection\": '',\n            \"sectionRank\" : '',\n          });\n          this.getData(this.state.startRange, this.state.limitRange);\n        })\n        .catch((error) => {\n          console.log('error', error);\n        });\n\n    }\n  }\n  updatesection(event) {\n    event.preventDefault();\n    if ($('#sectionManagement').valid()) {\n      var formValues = {\n        \"sectionID\"   : this.props.match.params.sectionID,\n        \"section\"     : this.state.section,\n        \"sectionRank\" : this.state.sectionRank,\n      }\n      // console.log('form', formValues);\n      axios.patch('/api/sections/patch', formValues)\n        .then((response) => {\n          swal({\n            title: response.data.message,\n          });\n          this.getData(this.state.startRange, this.state.limitRange);\n          this.setState({\n            \"section\": '',\n            \"sectionUrl\": '',\n            \"editId\" : '',\n            \"sectionRank\": '',\n          });\n          this.props.history.push('/section-management');\n        })\n        .catch((error) => {\n          console.log('error', error);\n        });\n    }\n  }\n  edit(id) {\n    axios.get('/api/sections/get/one/' + id)\n      .then((response) => {\n        console.log('edit', response.data);\n        if (response.data) {\n          this.setState({\n            \"section\"     : response.data.section,\n            \"sectionRank\" : response.data.sectionRank,\n            \"sectionUrl\"  : response.data.sectionUrl\n          });\n        } else {\n          this.setState({\n\n          });\n        }\n      })\n      .catch((error) => {\n        console.log('error', error);\n      });\n  }\n\n  createsectionUrl(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value,\n    });\n    var url = event.target.value;\n    // console.log('url',url);\n    if (url) {\n      url = url.replace(/\\s+/g, '-').toLowerCase();\n      // $(\".productUrl\").val(url);\n      this.setState({\n        sectionUrl: url\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n        <div className=\"row\">\n          <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n          <div className=\"formWrapper\">\n            <section className=\"content\">\n              <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\">\n                <div className=\"row\">\n                  <div className=\"box\">\n                    <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                      <h4 className=\"NOpadding-right\">Section Master </h4>\n                    </div>\n                  \n                      <div className=\"col-lg-12 col-md-12 marginTopp NOpadding\">\n                      <form id=\"sectionManagement\" className=\"\">\n                          <div className=\"col-lg-5\">\n                            <div className=\"col-lg-12\">\n                              <label>Section Title <i className=\"redFont\">*</i></label>\n                              <input value={this.state.section} name=\"section\" id=\"section\" onChange={this.createsectionUrl.bind(this)} type=\"text\" className=\"form-control edit-catg-new\" placeholder=\"Section Title\" ref=\"section\" />\n                            </div>\n                          </div>\n                          <div className=\"col-lg-5\">\n                            <div className=\"col-lg-12\">\n                              <label>Section URL <i className=\"redFont\">*</i></label>\n                              <input disabled value={this.state.sectionUrl} onChange={this.handleChange.bind(this)} id=\"sectionUrl\" name=\"sectionUrl\" type=\"text\" className=\"form-control sectionUrl\" placeholder=\"Section URL\" ref=\"sectionUrl\" />\n                            </div>                            \n                          </div>\n                          <div className=\"col-lg-12\">\n                            <div className=\"col-lg-10\">\n                                  <label>Section Rank <i className=\"redFont\">*</i></label>                                                                    \n                                  <input value={this.state.sectionRank} onChange={this.handleChange.bind(this)} id=\"sectionRank\" name=\"sectionRank\" type=\"number\" className=\"form-control sectionRank\" placeholder=\"Section Rank\" ref=\"sectionRank\"  />\n                            </div>\n                          </div>\n                        \n                          <div className=\"col-lg-2\">\n                            <div className=\"col-lg-12\">\n                            <label>&nbsp;</label>\n                              {\n                                this.state.editId ?\n                                  <button onClick={this.updatesection.bind(this)} className=\"col-lg-12 btn-primary btn \">Update</button>\n                                  :\n                                  <button onClick={this.submitsection.bind(this)} className=\" col-lg-12 btn-primary btn \">Submit</button>\n                              }\n                              </div>\n                          </div>\n                        \n                      </form>\n                      </div>\n\n                      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                        <IAssureTable\n                          tableHeading={this.state.tableHeading}\n                          twoLevelHeader={this.state.twoLevelHeader}\n                          dataCount={this.state.dataCount}\n                          tableData={this.state.tableData}\n                          getData={this.getData.bind(this)}\n                          tableObjects={this.state.tableObjects}\n                        />\n                      </div>\n                    </div>\n                </div>\n              </div>\n            </section>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default SectionManagement;"]},"metadata":{},"sourceType":"module"}