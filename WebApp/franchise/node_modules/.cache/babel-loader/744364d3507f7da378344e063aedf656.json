{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/product/categoryManagement/component/CategoryManagement.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport S3FileUpload from 'react-s3';\nimport IAssureTable from '../../../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport 'jquery-validation';\nimport 'bootstrap/js/tab.js';\nimport '../css/CategoryManagement.css';\n\nclass CategoryManagement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"subcatgArr\": [],\n      \"addEditModeCategory\": \"\",\n      \"addEditModeSubCategory\": [],\n      \"addEditMode\": \"\",\n      \"categoryImage\": \"\",\n      \"tableHeading\": {\n        section: \"Section\",\n        category: \"Category Title\",\n        subCategory: \"Subcategory Title\",\n        categoryDescription: \"Category Description\",\n        actions: 'Action' // categoryRank                      : 1,\n\n      },\n      \"tableObjects\": {\n        deleteMethod: 'delete',\n        apiLink: '/api/category',\n        paginationApply: true,\n        searchApply: true,\n        editUrl: '/category-management',\n        deleteUrl: '/category-management'\n      },\n      \"sectionsList\": [],\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": this.props.match.params ? this.props.match.params.categoryID : ''\n    };\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  sectionChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      section: event.target.value.split('|')[0],\n      section_ID: event.target.value.split('|')[1]\n    }, () => {\n      console.log('sectionChange', this.state.section, this.state.section_ID);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    var editId = nextProps.match.params.categoryID;\n\n    if (nextProps.match.params.categoryID) {\n      this.setState({\n        editId: editId\n      });\n      this.edit(editId);\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    if (this.state.editId) {\n      this.edit(this.state.editId);\n    }\n\n    $.validator.addMethod(\"regxsection\", function (value, element, arg) {\n      return arg !== value;\n    }, \"Please select the section\");\n    $.validator.addMethod(\"valueNotEquals\", function (value, element, arg) {\n      return arg !== value;\n    }, \"Please select the category\"); // $.validator.addMethod(\"regxA1\", function(value, element, regexpr) {          \n    //   return regexpr.test(value);\n    // }, \"Name should only contain letters & number.\");\n\n    $.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#categoryManagement\").validate({\n      rules: {\n        section: {\n          required: true,\n          regxsection: \"Select Section\"\n        },\n        category: {\n          required: true // regxA1: /^[A-Za-z][A-Za-z0-9\\-\\s]/, \n\n        } // categoryDescription: {\n        //   required: true,\n        //   // regxA1: /^[A-Za-z][A-Za-z0-9\\-\\s]/, \n        // },\n\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"section\") {\n          error.insertAfter(\"#section\");\n        }\n\n        if (element.attr(\"name\") === \"category\") {\n          error.insertAfter(\"#category\");\n        } // if (element.attr(\"name\") === \"categoryDescription\"){\n        //   error.insertAfter(\"#categoryDescription\");\n        // }         \n\n      }\n    });\n    this.getSectionData();\n    this.getDataCount();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n\n  getDataCount() {\n    axios.get('/api/category/get/count').then(response => {\n      console.log('dataCount', response.data);\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  getData(startRange, limitRange) {\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post('/api/category/get/list', data).then(response => {\n      console.log('tableData', response.data);\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  addNewSubCatArray(event) {\n    let arrLength = this.state.subcatgArr;\n    arrLength.push({\n      subCategoryCode: \"a\" + arrLength.length,\n      subCategoryTitle: \"\"\n    });\n    this.setState({\n      subcatgArr: arrLength\n    }, () => {// console.log('subcatgArr',this.state.subcatgArr);\n    });\n  }\n\n  addNewRow(index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 NOpadding newSubCatgArr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-11 col-md-11 NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: index,\n      value: this.state['subCategoryTitle' + index],\n      name: \"subCategoryTitle\" + index,\n      onChange: this.handleChange.bind(this),\n      className: \"form-control newSubCatg\" + index,\n      placeholder: \"Category Title\",\n      \"aria-label\": \"Brand\",\n      \"aria-describedby\": \"basic-addon1\",\n      ref: \"newSubCatg\" + index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-1 col-md-1 deleteSubCategory fa fa-trash\",\n      id: index,\n      onClick: this.deleteSubCategory.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  getSectionData() {\n    axios.get('/api/sections/get/list').then(res => {\n      console.log('res', res.data);\n      this.setState({\n        sectionsList: res.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  deleteSubCategory(event) {\n    event.preventDefault();\n    var id = event.target.id; // console.log('subCategory Id',id);\n\n    let arrLength = this.state.subcatgArr; // console.log('arrLength',arrLength);\n\n    var index = arrLength.indexOf(id); // console.log('index',index);\n    // someArray3.splice(someArray3.findIndex(v => v.name === \"Kristian\"), 1);\n\n    arrLength.splice(arrLength.findIndex(v => v.subCategoryCode === id), 1);\n    this.setState({\n      subcatgArr: arrLength\n    }, () => {// console.log('subcatgArr', this.state.subcatgArr);\n    });\n  }\n\n  submitCategory(event) {\n    event.preventDefault();\n    console.log('bjgjbmbmb', $('#categoryManagement').valid());\n\n    if ($('#categoryManagement').valid()) {\n      var addRowLength = this.state.subcatgArr.length;\n      var categoryDimentionArray = [];\n      axios.get('/api/category/get/count').then(response => {\n        var catCodeLength = response.data.dataCount;\n        console.log(\"catCodeLength\", catCodeLength);\n        console.log(\"addRowLength\", addRowLength);\n\n        if (addRowLength) {\n          for (var i = 0; i < addRowLength; i++) {\n            var obj = {\n              \"index\": i,\n              \"subCategoryCode\": catCodeLength + '|' + i,\n              \"subCategoryTitle\": $(\".newSubCatg\" + i).val()\n            };\n\n            if ($(\".newSubCatg\" + i).val()) {\n              categoryDimentionArray.push(obj);\n              this.setState({\n                allowToSubmit: true\n              });\n            } else {\n              console.log(\"subCategoryTitleErrora\" + i, \" subCategoryTitlea0Error\");\n              this.setState({\n                [\"subCategoryTitleErrora\" + i]: \"This field is required.\",\n                allowToSubmit: false\n              });\n            }\n          }\n        }\n\n        console.log(\"categoryDimentionArray\", categoryDimentionArray);\n        var formValues = {\n          \"section\": this.state.section,\n          \"section_ID\": this.state.section_ID,\n          \"category\": this.refs.category.value,\n          \"categoryUrl\": this.refs.categoryUrl.value,\n          \"subCategory\": categoryDimentionArray ? categoryDimentionArray : \"\",\n          \"categoryDescription\": this.refs.categoryDescription.value,\n          \"categoryImage\": this.state.categoryImage,\n          \"categoryRank\": this.state.categoryRank\n        };\n        console.log(\"Formvalues = \", formValues);\n        axios.post('/api/category/post', formValues).then(response => {\n          swal({\n            text: response.data.message\n          });\n          this.setState({\n            \"section\": 'Select',\n            \"category\": '',\n            \"categoryUrl\": '',\n            \"addEditModeCategory\": '',\n            \"addEditModeSubCategory\": '',\n            \"categoryDescription\": '',\n            \"subcatgArr\": [],\n            \"categoryImage\": \"\",\n            \"categoryRank\": \"\"\n          });\n          $(':input').val('');\n          this.getData(this.state.startRange, this.state.limitRange);\n        }).catch(error => {\n          console.log('error', error);\n        });\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  updateCategory(event) {\n    event.preventDefault();\n    console.log('bjgjbmbmb', $('#categoryManagement').valid());\n\n    if ($('#categoryManagement').valid()) {\n      var addRowLength = this.state.subcatgArr.length;\n      var categoryDimentionArray = [];\n      var formValues = {\n        \"category_ID\": this.state.editId,\n        \"section\": this.state.section,\n        \"section_ID\": this.state.section_ID,\n        \"category\": this.refs.category.value,\n        \"categoryUrl\": this.refs.categoryUrl.value,\n        \"subCategory\": categoryDimentionArray,\n        \"categoryDescription\": this.refs.categoryDescription.value,\n        \"categoryImage\": this.state.categoryImage,\n        \"categoryRank\": this.state.categoryRank\n      };\n      console.log(\"formValues = \", formValues);\n      axios.get('/api/category/get/count').then(response => {\n        var catCodeLength = response.data.dataCount;\n\n        if (addRowLength) {\n          for (var i = 0; i < addRowLength; i++) {\n            var obj = {\n              \"index\": i,\n              \"subCategoryCode\": catCodeLength + '|' + i,\n              \"subCategoryTitle\": $(\".newSubCatg\" + i).val()\n            };\n\n            if ($(\".newSubCatg\" + i).val()) {\n              categoryDimentionArray.push(obj);\n              this.setState({\n                allowToUpdate: true\n              });\n            } else {\n              console.log(\"subCategoryTitleErrora\" + i, \" subCategoryTitlea0Error\");\n              this.setState({\n                [\"subCategoryTitleErrora\" + i]: \"This field is required.\",\n                allowToUpdate: false\n              });\n            }\n          }\n        } // if(this.state.allowToUpdate === true){\n\n\n        console.log(\"In update\");\n        axios.patch('/api/category/patch', formValues).then(response => {\n          swal({\n            text: response.data.message\n          });\n          this.getData(this.state.startRange, this.state.limitRange);\n          this.setState({\n            \"section\": 'Select',\n            \"category\": '',\n            \"categoryUrl\": '',\n            \"addEditModeCategory\": '',\n            \"addEditModeSubCategory\": '',\n            \"categoryDescription\": '',\n            \"editId\": '',\n            \"subcatgArr\": [],\n            categoryImage: \"\"\n          });\n          this.props.history.push('/category-management');\n        }).catch(error => {\n          console.log('error', error);\n        }); // }\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  edit(id) {\n    axios.get('/api/category/get/one/' + id).then(response => {\n      console.log('record to be edit', response.data);\n\n      if (response.data) {\n        this.setState({\n          \"section\": response.data.section,\n          \"section_ID\": response.data.section_ID,\n          \"category\": response.data.category,\n          \"categoryUrl\": response.data.categoryUrl,\n          \"addEditModeCategory\": response.data.category,\n          \"addEditModeSubCategory\": response.data.subCategory,\n          \"subcatgArr\": response.data.subCategory,\n          \"categoryDescription\": response.data.categoryDescription,\n          \"categoryImage\": response.data.categoryImage\n        }, () => {\n          var addRowLength = this.state.subcatgArr.length;\n\n          if (addRowLength) {\n            for (var i = 0; i < addRowLength; i++) {\n              this.setState({\n                ['subCategoryTitle' + response.data.subCategory[i].subCategoryCode]: response.data.subCategory[i].subCategoryTitle\n              }, () => {});\n            }\n          }\n        });\n      } else {\n        this.setState({});\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  uploadImage(event) {\n    event.preventDefault();\n    var categoryImage = \"\";\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      // for(var i=0; i<event.currentTarget.files.length; i++){\n      var file = event.currentTarget.files[0];\n\n      if (file) {\n        var fileName = file.name;\n        var ext = fileName.split('.').pop();\n\n        if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n          if (file) {\n            var objTitle = {\n              fileInfo: file\n            };\n            categoryImage = objTitle;\n          } else {\n            swal(\"Images not uploaded\");\n          } //file\n\n        } else {\n          swal(\"Allowed images formats are (jpg,png,jpeg)\");\n        } //file types\n\n      } //file\n      // }//for \n\n\n      if (event.currentTarget.files) {\n        this.setState({\n          categoryImage: categoryImage\n        });\n        main().then(formValues => {\n          this.setState({\n            categoryImage: formValues.categoryImage\n          });\n        });\n\n        async function main() {\n          var config = await getConfig();\n          console.log(\"line 429 config = \", config);\n          var s3url = await s3upload(categoryImage.fileInfo, config, this);\n          const formValues = {\n            \"categoryImage\": s3url,\n            \"status\": \"New\"\n          };\n          return Promise.resolve(formValues);\n        }\n\n        function s3upload(image, configuration) {\n          return new Promise(function (resolve, reject) {\n            S3FileUpload.uploadFile(image, configuration).then(Data => {\n              resolve(Data.location);\n            }).catch(error => {\n              console.log(error);\n            });\n          });\n        }\n\n        function getConfig() {\n          return new Promise(function (resolve, reject) {\n            axios // .get('/api/projectSettings/get/one/s3')\n            .get('/api/projectSettings/get/one/S3').then(response => {\n              console.log(\"s3 response :\", response.data);\n              const config = {\n                bucketName: response.data[0].bucket,\n                dirName: process.env.ENVIRONMENT,\n                region: response.data[0].region,\n                accessKeyId: response.data[0].key,\n                secretAccessKey: response.data[0].secret\n              };\n              resolve(config);\n            }).catch(function (error) {\n              console.log(error);\n            });\n          });\n        }\n      }\n    }\n  }\n\n  deleteImage(event) {\n    // console.log('delete');\n    var id = event.target.id;\n    var productImageArray = this.state.productImageArray; // console.log('productImage', productImageArray, id);\n\n    productImageArray.splice(productImageArray.findIndex(v => v === id), 1);\n    this.setState({\n      categoryImage: \"\",\n      productImageArray: productImageArray\n    }, () => {// console.log('subcatgArr', this.state.subcatgArr);\n    });\n  }\n\n  createCategoryUrl(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n    var url = event.target.value; // console.log('url',url);\n\n    if (url) {\n      url = url.replace(/\\s+/g, '-').toLowerCase(); // $(\".productUrl\").val(url);\n\n      this.setState({\n        categoryUrl: url\n      });\n    }\n  }\n\n  deleteImage(event) {\n    event.preventDefault();\n    this.setState({\n      categoryImage: \"\"\n    });\n  }\n\n  getSearchText(searchText, startRange, limitRange) {\n    this.getSearchCount(searchText);\n    var formValues = {\n      \"searchText\": searchText,\n      \"startRange\": startRange,\n      \"limitRange\": limitRange\n    };\n    axios.post(\"/api/category/searchCategory\", formValues).then(response => {\n      //console.log('tableData', response.data);\n      this.setState({\n        tableData: response.data //dataCount : response.data.length\n\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  getSearchCount(searchText) {\n    var formValues = {\n      \"searchText\": searchText\n    };\n    axios.post(\"/api/category/searchCategoryCount\", formValues).then(response => {\n      this.setState({\n        dataCount: response.data.dataCount\n      }, () => {});\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleSubCatChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value,\n      [\"subCategoryTitleError\" + event.target.id]: event.target.value ? \"\" : \"This field is required.\"\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 33\n      }\n    }, \"Category Management \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 marginTopp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"categoryManagement\",\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-12 col-xs-12 col-sm-12  NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 43\n      }\n    }, \"Section \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 58\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.sectionChange.bind(this),\n      value: this.state.section + '|' + this.state.section_ID,\n      name: \"section\",\n      className: \"form-control allProductCategories\",\n      \"aria-describedby\": \"basic-addon1\",\n      id: \"section\",\n      ref: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 43\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Select Section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 43\n      }\n    }, \"Select Section\"), this.state.sectionsList && this.state.sectionsList.length > 0 ? this.state.sectionsList.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: data.section + '|' + data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 51\n        }\n      }, data.section);\n    }) : null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 43\n      }\n    }, \"Category Title \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 65\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.category,\n      name: \"category\",\n      id: \"category\",\n      onChange: this.createCategoryUrl.bind(this),\n      type: \"text\",\n      className: \"form-control edit-catg-new\",\n      placeholder: \"Category Title\",\n      ref: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 43\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 43\n      }\n    }, \"Category URL \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 63\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      value: this.state.categoryUrl,\n      onChange: this.handleChange.bind(this),\n      id: \"categoryUrl\",\n      name: \"categoryUrl\",\n      type: \"text\",\n      className: \"form-control categoryUrl\",\n      placeholder: \"Category URL\",\n      ref: \"categoryUrl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 43\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 43\n      }\n    }, \"Category Rank \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 64\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.categoryRank,\n      onChange: this.handleChange.bind(this),\n      id: \"categoryRank\",\n      name: \"categoryRank\",\n      type: \"number\",\n      className: \"form-control categoryRank\",\n      placeholder: \"Category Rank\",\n      ref: \"categoryRank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 43\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 subCatAddLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 43\n      }\n    }, \"Subcategories \"), this.state.subcatgArr.map((dataRowArray, index) => {\n      console.log(dataRowArray, 'subCategoryTitle' + dataRowArray.subCategoryCode);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 NOpadding\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 55\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 NOpadding newSubCatgArr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 59\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-11 col-md-11 NOpadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 63\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: dataRowArray.subCategoryCode,\n        value: this.state['subCategoryTitle' + dataRowArray.subCategoryCode],\n        name: \"subCategoryTitle\" + dataRowArray.subCategoryCode,\n        onChange: this.handleSubCatChange.bind(this),\n        className: \"form-control newSubCatg\" + index,\n        placeholder: \"Category Title\",\n        \"aria-label\": \"Brand\",\n        \"aria-describedby\": \"basic-addon1\",\n        ref: \"newSubCatg\" + index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 67\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-1 col-md-1 deleteSubCategory fa fa-trash\",\n        id: dataRowArray.subCategoryCode,\n        onClick: this.deleteSubCategory.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 63\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"error\",\n        name: \"subCategoryTitleError\" + dataRowArray.subCategoryCode,\n        id: \"subCategoryTitle\" + dataRowArray.subCategoryCode,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 59\n        }\n      }, this.state[\"subCategoryTitleError\" + dataRowArray.subCategoryCode]));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.addNewSubCatArray.bind(this),\n      className: \"submitBtn btn categoryBtn col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 43\n      }\n    }, \"Add New Subcategory\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"divideCatgRows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 43\n      }\n    }, \"Category Short Description \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.categoryDescription,\n      onChange: this.handleChange.bind(this),\n      name: \"categoryDescription\",\n      id: \"categoryDescription\",\n      className: \"form-control categoryShortDesc\",\n      placeholder: \"Category Short Description\",\n      ref: \"categoryDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 43\n      }\n    })), this.state.categoryImage ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"divideCatgRows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 45\n      }\n    }, \"Category Image\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.uploadImage.bind(this),\n      title: \"Click to Edit Photo\",\n      className: \"\",\n      accept: \".jpg,.jpeg,.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 45\n      }\n    })), this.state.categoryImage ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 productImgCol\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 43\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prodImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prodImageInner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"prodImageCross\",\n      title: \"Delete\",\n      \"data-imageUrl\": this.state.categoryImage,\n      onClick: this.deleteImage.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 51\n      }\n    }, \"x\")), /*#__PURE__*/React.createElement(\"img\", {\n      title: \"view Image\",\n      alt: \"Please wait...\",\n      src: this.state.categoryImage ? this.state.categoryImage : \"/images/notavailable.jpg\",\n      className: \"img-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 47\n      }\n    })))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addCategoryNewBtn col-lg-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pull-right col-lg-6 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 43\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 47\n      }\n    }, this.state.editId ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.updateCategory.bind(this),\n      className: \"submitBtn btn categoryBtn col-lg-3 col-md-3 col-sm-12 col-xs-12 pull-right \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 51\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submitCategory.bind(this),\n      className: \"submitBtn btn categoryBtn col-lg-3 col-md-3 col-sm-12 col-xs-12 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 51\n      }\n    }, \"Submit\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getData.bind(this),\n      tableObjects: this.state.tableObjects,\n      getSearchText: this.getSearchText.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 35\n      }\n    }))))))))));\n  }\n\n}\n\nexport default CategoryManagement;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/product/categoryManagement/component/CategoryManagement.js"],"names":["React","Component","$","axios","swal","_","S3FileUpload","IAssureTable","CategoryManagement","constructor","props","state","section","category","subCategory","categoryDescription","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","deleteUrl","match","params","categoryID","handleChange","event","target","name","setState","value","sectionChange","split","section_ID","console","log","componentWillReceiveProps","nextProps","editId","edit","componentDidMount","window","scrollTo","validator","addMethod","element","arg","setDefaults","debug","success","validate","rules","required","regxsection","errorPlacement","error","attr","insertAfter","getSectionData","getDataCount","getData","startRange","limitRange","get","then","response","data","dataCount","catch","post","tableData","addNewSubCatArray","arrLength","subcatgArr","push","subCategoryCode","length","subCategoryTitle","addNewRow","index","bind","deleteSubCategory","res","sectionsList","preventDefault","id","indexOf","splice","findIndex","v","submitCategory","valid","addRowLength","categoryDimentionArray","catCodeLength","i","obj","val","allowToSubmit","formValues","refs","categoryUrl","categoryImage","categoryRank","text","message","updateCategory","allowToUpdate","patch","history","uploadImage","currentTarget","files","file","fileName","ext","pop","objTitle","fileInfo","main","config","getConfig","s3url","s3upload","Promise","resolve","image","configuration","reject","uploadFile","Data","location","bucketName","bucket","dirName","process","env","ENVIRONMENT","region","accessKeyId","key","secretAccessKey","secret","deleteImage","productImageArray","createCategoryUrl","url","replace","toLowerCase","getSearchText","searchText","getSearchCount","handleSubCatChange","render","map","_id","dataRowArray","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport $                      from 'jquery';\nimport axios                  from 'axios';\nimport swal                   from 'sweetalert';\nimport _                      from 'underscore';\nimport S3FileUpload           from 'react-s3';\nimport IAssureTable           from '../../../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport 'jquery-validation';\nimport 'bootstrap/js/tab.js';\nimport '../css/CategoryManagement.css';\n\nclass CategoryManagement extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"subcatgArr\"                        : [],\n            \"addEditModeCategory\"               : \"\",\n            \"addEditModeSubCategory\"            : [],\n            \"addEditMode\"                       : \"\",\n            \"categoryImage\"                     : \"\",\n            \"tableHeading\"                      : {\n              section                           : \"Section\",\n              category                          : \"Category Title\",\n              subCategory                       : \"Subcategory Title\",\n              categoryDescription               : \"Category Description\",\n              actions                           : 'Action',\n              // categoryRank                      : 1,\n            },\n            \"tableObjects\"              : {\n              deleteMethod              : 'delete',\n              apiLink                   : '/api/category',\n              paginationApply           : true,\n              searchApply               : true,\n              editUrl                   : '/category-management',\n              deleteUrl                 : '/category-management'\n            },\n            \"sectionsList\"              : [],\n            \"startRange\"                : 0,\n            \"limitRange\"                : 10,\n            \"editId\"                    : this.props.match.params ? this.props.match.params.categoryID : ''\n        };\n    }\n    handleChange(event){ \n        const target = event.target;\n        const name   = target.name;\n        this.setState({\n            [name]: event.target.value,\n        });\n    }\n    sectionChange(event){\n      const target = event.target;\n      const name   = target.name;\n      this.setState({\n          section     : event.target.value.split('|')[0],\n          section_ID  : event.target.value.split('|')[1],\n      },()=>{\n        console.log('sectionChange', this.state.section, this.state.section_ID);\n      });\n    }\n    componentWillReceiveProps(nextProps) {\n        var editId = nextProps.match.params.categoryID;\n        if(nextProps.match.params.categoryID){\n          this.setState({\n            editId : editId\n          })\n          this.edit(editId);\n        }\n    }\n    componentDidMount(){\n      window.scrollTo(0, 0);\n      if(this.state.editId){      \n        this.edit(this.state.editId);\n      }\n      $.validator.addMethod(\"regxsection\", function (value, element, arg) {\n        return arg !== value;\n      }, \"Please select the section\");\n      $.validator.addMethod(\"valueNotEquals\", function(value, element, arg){\n        return arg !== value;\n      }, \"Please select the category\");\n\n      // $.validator.addMethod(\"regxA1\", function(value, element, regexpr) {          \n      //   return regexpr.test(value);\n      // }, \"Name should only contain letters & number.\");\n  \n      $.validator.setDefaults({\n        debug: true,\n        success: \"valid\"\n      });\n\n      $(\"#categoryManagement\").validate({\n        rules: {\n          section: {\n            required: true,\n            regxsection: \"Select Section\"\n          },\n          category: {\n            required: true,\n            // regxA1: /^[A-Za-z][A-Za-z0-9\\-\\s]/, \n          },\n          // categoryDescription: {\n          //   required: true,\n          //   // regxA1: /^[A-Za-z][A-Za-z0-9\\-\\s]/, \n          // },\n        },\n        errorPlacement: function(error, element) {\n          if (element.attr(\"name\") === \"section\"){\n            error.insertAfter(\"#section\");\n          }\n          if (element.attr(\"name\") === \"category\"){\n            error.insertAfter(\"#category\");\n          }\n          // if (element.attr(\"name\") === \"categoryDescription\"){\n          //   error.insertAfter(\"#categoryDescription\");\n          // }         \n        }\n      });\n      this.getSectionData();\n      this.getDataCount();\n      this.getData(this.state.startRange,this.state.limitRange);\n    }\n    getDataCount(){\n      axios.get('/api/category/get/count')\n      .then((response)=>{\n        console.log('dataCount', response.data);\n        this.setState({\n          dataCount : response.data.dataCount\n        })\n      })\n      .catch((error)=>{\n        console.log('error', error);\n      });\n    }\n    getData(startRange, limitRange){\n      var data={\n        startRange : startRange,\n        limitRange : limitRange\n      }\n\n      axios.post('/api/category/get/list', data)\n      .then((response)=>{\n        console.log('tableData', response.data);\n        this.setState({\n          tableData : response.data\n        })\n      })\n      .catch((error)=>{\n        console.log('error', error);\n      });\n    }\n    addNewSubCatArray(event){\n      let arrLength = this.state.subcatgArr;\n      arrLength.push({\n          subCategoryCode: \"a\"+arrLength.length,\n          subCategoryTitle: \"\",\n      });\n      this.setState({\n          subcatgArr : arrLength,\n      },()=>{\n          // console.log('subcatgArr',this.state.subcatgArr);\n      }); \n    }\n    addNewRow(index){\n        return(\n            <div className=\"col-lg-12 col-md-12 NOpadding newSubCatgArr\">   \n                <div className=\"col-lg-11 col-md-11 NOpadding\">             \n                    <input type=\"text\" id={index} value={this.state['subCategoryTitle'+index]} name={\"subCategoryTitle\"+index} onChange={this.handleChange.bind(this)} className={\"form-control newSubCatg\"+index} placeholder=\"Category Title\" aria-label=\"Brand\" aria-describedby=\"basic-addon1\" ref={\"newSubCatg\"+index} />\n                </div>\n                <div className=\"col-lg-1 col-md-1 deleteSubCategory fa fa-trash\" id={index} onClick={this.deleteSubCategory.bind(this)}>\n                    \n                </div>\n            </div>\n        );\n    }\n    getSectionData(){\n      axios.get('/api/sections/get/list')\n      .then((res)=>{\n        console.log('res', res.data);\n        this.setState({\n          sectionsList : res.data\n        })\n      })\n      .catch((error)=>{\n        console.log('error', error);\n      })\n    }\n    deleteSubCategory(event){\n        event.preventDefault();\n        var id = event.target.id;\n        // console.log('subCategory Id',id);\n\n        let arrLength = this.state.subcatgArr;\n        // console.log('arrLength',arrLength);\n        var index = arrLength.indexOf(id);\n        // console.log('index',index);\n        // someArray3.splice(someArray3.findIndex(v => v.name === \"Kristian\"), 1);\n        arrLength.splice(arrLength.findIndex(v => v.subCategoryCode === id), 1);\n        this.setState({\n            subcatgArr: arrLength\n        },()=>{\n            // console.log('subcatgArr', this.state.subcatgArr);\n        });\n    }\n    submitCategory(event){\n      event.preventDefault();\n      console.log('bjgjbmbmb',$('#categoryManagement').valid());\n      if($('#categoryManagement').valid()){\n        var addRowLength = this.state.subcatgArr.length;\n        var categoryDimentionArray = [];\n        \n\n        axios.get('/api/category/get/count')\n        .then((response)=>{\n          var catCodeLength = response.data.dataCount;\n          console.log(\"catCodeLength\",catCodeLength);\n          console.log(\"addRowLength\",addRowLength);\n          if(addRowLength){\n            for(var i=0;i<addRowLength;i++){\n              var obj = {\n                   \"index\"             : i,\n                   \"subCategoryCode\"   : catCodeLength+'|'+i,\n                   \"subCategoryTitle\"  : $(\".newSubCatg\"+i).val(),\n              }\n              if($(\".newSubCatg\"+i).val()){\n                categoryDimentionArray.push(obj);\n                this.setState({\n                  allowToSubmit: true\n                })\n\n              }else{\n                console.log(\"subCategoryTitleErrora\"+i, \" subCategoryTitlea0Error\");\n                this.setState({\n                  [\"subCategoryTitleErrora\"+i] : \"This field is required.\",\n                  allowToSubmit: false\n                })\n              }\n            }\n          }\n          console.log(\"categoryDimentionArray\",categoryDimentionArray);\n\n          \n            var formValues = {\n              \"section\"                   : this.state.section,\n              \"section_ID\"                : this.state.section_ID,\n              \"category\"                  : this.refs.category.value,\n              \"categoryUrl\"               : this.refs.categoryUrl.value,\n              \"subCategory\"               : categoryDimentionArray ? categoryDimentionArray : \"\",\n              \"categoryDescription\"       : this.refs.categoryDescription.value,\n              \"categoryImage\"             : this.state.categoryImage,\n              \"categoryRank\"              : this.state.categoryRank,\n            }\n\n            console.log(\"Formvalues = \", formValues);\n\n            axios.post('/api/category/post', formValues)\n            .then((response)=>{\n\n              swal({\n                text  : response.data.message,\n              });\n\n              this.setState({\n                \"section\"                   : 'Select',\n                \"category\"                      : '',\n                \"categoryUrl\"                   : '',\n                \"addEditModeCategory\"           : '',\n                \"addEditModeSubCategory\"        : '',\n                \"categoryDescription\"           : '',\n                \"subcatgArr\"                    : [],\n                \"categoryImage\"                 : \"\",\n                \"categoryRank\"                  : \"\",\n              });\n              $(':input').val('');\n              this.getData(this.state.startRange, this.state.limitRange);\n            })\n            .catch((error)=>{\n              console.log('error', error);\n            });\n          \n\n\n\n\n        })\n        .catch((error)=>{\n          console.log('error', error);\n        });\n      }\n    }\n    updateCategory(event){\n      event.preventDefault();\n      console.log('bjgjbmbmb',$('#categoryManagement').valid());\n      if($('#categoryManagement').valid()){\n        var addRowLength = this.state.subcatgArr.length;\n        var categoryDimentionArray = [];\n        \n        var formValues = {\n          \"category_ID\"               : this.state.editId,\n          \"section\"                   : this.state.section,\n          \"section_ID\"                : this.state.section_ID,\n          \"category\"                  : this.refs.category.value,\n          \"categoryUrl\"               : this.refs.categoryUrl.value,\n          \"subCategory\"               : categoryDimentionArray,\n          \"categoryDescription\"       : this.refs.categoryDescription.value,\n          \"categoryImage\"             : this.state.categoryImage,\n          \"categoryRank\"              : this.state.categoryRank,\n        }\n\n        console.log(\"formValues = \", formValues);\n        axios.get('/api/category/get/count')\n        .then((response)=>{\n          var catCodeLength = response.data.dataCount;\n          if(addRowLength){\n            for(var i=0;i<addRowLength;i++){\n              var obj = {\n                   \"index\"             : i,\n                   \"subCategoryCode\"   : catCodeLength+'|'+i,\n                   \"subCategoryTitle\"  : $(\".newSubCatg\"+i).val(),\n              }\n              if($(\".newSubCatg\"+i).val()){\n                categoryDimentionArray.push(obj);\n                this.setState({\n                  allowToUpdate: true\n                })\n              }else{\n                console.log(\"subCategoryTitleErrora\"+i, \" subCategoryTitlea0Error\");\n                this.setState({\n                  [\"subCategoryTitleErrora\"+i] : \"This field is required.\",\n                  allowToUpdate: false\n                })\n              }\n            }\n          }\n\n          // if(this.state.allowToUpdate === true){\n            console.log(\"In update\");\n            axios.patch('/api/category/patch', formValues)\n            .then((response)=>{\n\n              swal({\n                text  : response.data.message,\n              });\n              this.getData(this.state.startRange, this.state.limitRange);\n              this.setState({\n                \"section\"                       : 'Select',\n                \"category\"                      : '',\n                \"categoryUrl\"                   : '',\n                \"addEditModeCategory\"           : '',\n                \"addEditModeSubCategory\"        : '',\n                \"categoryDescription\"           : '',\n                \"editId\"                        : '',\n                \"subcatgArr\"                    : [],\n                categoryImage : \"\",\n              });\n              this.props.history.push('/category-management');\n            })\n            .catch((error)=>{\n              console.log('error', error);\n            });\n          // }\n        })\n        .catch((error)=>{\n          console.log('error', error);\n        });\n      }\n    }\n    edit(id){\n      axios.get('/api/category/get/one/'+id)\n      .then((response)=>{\n        console.log('record to be edit', response.data);\n        if(response.data){\n            this.setState({\n              \"section\"                   : response.data.section,\n              \"section_ID\"                : response.data.section_ID,\n              \"category\"                  : response.data.category,\n              \"categoryUrl\"               : response.data.categoryUrl,\n              \"addEditModeCategory\"       : response.data.category,\n              \"addEditModeSubCategory\"    : response.data.subCategory,\n              \"subcatgArr\"                : response.data.subCategory,\n              \"categoryDescription\"       : response.data.categoryDescription,\n              \"categoryImage\"             : response.data.categoryImage,\n            },()=>{\n                var addRowLength = this.state.subcatgArr.length;\n\n                if(addRowLength){\n                    for(var i=0;i<addRowLength;i++){\n                        this.setState ({\n                          ['subCategoryTitle'+response.data.subCategory[i].subCategoryCode] : response.data.subCategory[i].subCategoryTitle\n                        },()=>{\n                          \n                        });\n                    }\n                }\n            });\n        } else{\n            this.setState ({\n\n            });\n        }\n      })\n      .catch((error)=>{\n        console.log('error', error);\n      });\n    }\n    uploadImage(event){\n      event.preventDefault();\n      var categoryImage = \"\";\n      if (event.currentTarget.files && event.currentTarget.files[0]) {\n          // for(var i=0; i<event.currentTarget.files.length; i++){\n              var file = event.currentTarget.files[0];\n              if (file) {\n                  var fileName  = file.name; \n                  var ext = fileName.split('.').pop();  \n                  if(ext===\"jpg\" || ext===\"png\" || ext===\"jpeg\" || ext===\"JPG\" || ext===\"PNG\" || ext===\"JPEG\"){\n                      if (file) {\n                          var objTitle = { fileInfo :file }\n                          categoryImage = objTitle ;\n                          \n                      }else{          \n                          swal(\"Images not uploaded\");  \n                      }//file\n                  }else{ \n                      swal(\"Allowed images formats are (jpg,png,jpeg)\");   \n                  }//file types\n              }//file\n          // }//for \n  \n          if(event.currentTarget.files){\n              this.setState({\n                categoryImage : categoryImage\n              });  \n              main().then(formValues=>{\n                  this.setState({\n                    categoryImage : formValues.categoryImage\n                  })\n              });\n              async function main(){\n                  var config = await getConfig();\n                  console.log(\"line 429 config = \",config);\n                  var s3url = await s3upload(categoryImage.fileInfo, config, this);\n\n                  const formValues = {\n                    \"categoryImage\"    : s3url,\n                    \"status\"           : \"New\"\n                  };\n    \n                  return Promise.resolve(formValues);\n              }\n              function s3upload(image,configuration){\n      \n                  return new Promise(function(resolve,reject){\n                      S3FileUpload\n                          .uploadFile(image,configuration)\n                          .then((Data)=>{\n                              resolve(Data.location);\n                          })\n                          .catch((error)=>{\n                              console.log(error);\n                          })\n                  })\n              }   \n              function getConfig(){\n                  return new Promise(function(resolve,reject){\n                      axios\n                          // .get('/api/projectSettings/get/one/s3')\n                          .get('/api/projectSettings/get/one/S3')\n                          .then((response)=>{\n                            console.log(\"s3 response :\",response.data);\n                              const config = {\n                                  bucketName      : response.data[0].bucket,\n                                  dirName         : process.env.ENVIRONMENT,\n                                  region          : response.data[0].region,\n                                  accessKeyId     : response.data[0].key,\n                                  secretAccessKey : response.data[0].secret,\n                              }\n                              resolve(config);                           \n                          })\n                          .catch(function(error){\n                              console.log(error);\n                          })\n      \n                  })\n              }        \n          }\n      }\n    }\n    deleteImage(event){\n        // console.log('delete');\n        \n        var id = event.target.id;\n        var productImageArray = this.state.productImageArray;\n        // console.log('productImage', productImageArray, id);\n\n        productImageArray.splice(productImageArray.findIndex(v => v === id), 1);\n        this.setState({\n            categoryImage : \"\",\n            productImageArray: productImageArray\n        },()=>{\n            // console.log('subcatgArr', this.state.subcatgArr);\n        });\n    }\n    createCategoryUrl(event){\n        const target = event.target;\n        const name   = target.name;\n        this.setState({\n            [name]: event.target.value,\n        });\n        var url = event.target.value;\n        // console.log('url',url);\n        if(url){\n            url = url.replace(/\\s+/g, '-').toLowerCase();\n            // $(\".productUrl\").val(url);\n            this.setState({\n                categoryUrl : url\n            })\n        }\n    }\n    deleteImage(event){\n      event.preventDefault();\n      this.setState({\n        categoryImage : \"\"\n      })\n    }\n    getSearchText(searchText, startRange, limitRange){\n      this.getSearchCount(searchText);\n      var formValues={ \n        \"searchText\"    : searchText,\n        \"startRange\"        : startRange,\n            \"limitRange\"        : limitRange\n      };\n      axios.post(\"/api/category/searchCategory\",formValues)\n        .then((response)=>{ \n            //console.log('tableData', response.data);\n       \n            this.setState({\n                tableData : response.data,\n                //dataCount : response.data.length\n            });\n        })\n        .catch((error)=>{\n              console.log('error', error);\n        })\n    }\n    getSearchCount(searchText){\n\n      var formValues={ \n        \"searchText\"    : searchText\n      };\n      axios.post(\"/api/category/searchCategoryCount\",formValues)\n        .then((response)=>{ \n            this.setState({\n                dataCount : response.data.dataCount\n            },()=>{\n            })\n        })\n        .catch((error)=>{\n              console.log('error', error);\n        })\n    }\n    handleSubCatChange(event){\n      this.setState({\n        [event.target.name] : event.target.value,\n        [\"subCategoryTitleError\"+event.target.id] : event.target.value ? \"\" : \"This field is required.\"\n      })\n    }\n    render(){\n        return(\n            <div className=\"container-fluid col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n              <div className=\"row\">\n                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                <div className=\"formWrapper\">\n                    <section className=\"content\">\n                      <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\">\n                        <div className=\"row\">\n                         <div className=\"box\">\n                            <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                                <h4 className=\"NOpadding-right\">Category Management </h4>\n                            </div>                          \n\n                              <div className=\"col-lg-12 col-md-12 marginTopp\">\n                                <form id=\"categoryManagement\" className=\"\">\n                                  <div className=\"col-lg-6 col-md-12 col-xs-12 col-sm-12  NOpadding\">\n                                      <div className=\"col-lg-12\">\n                                          <label>Section <i className=\"redFont\">*</i></label>\n                                          <select onChange={this.sectionChange.bind(this)} value={this.state.section+'|'+this.state.section_ID}  name=\"section\" className=\"form-control allProductCategories\" aria-describedby=\"basic-addon1\" id=\"section\" ref=\"section\">\n                                          <option value=\"Select Section\">Select Section</option>\n                                            {\n                                              this.state.sectionsList && this.state.sectionsList.length>0 ?\n                                              this.state.sectionsList.map((data, index)=>{\n                                                return(\n                                                  <option value={data.section+'|'+data._id}>{data.section}</option>\n                                                );\n                                              })\n                                              :\n                                              null\n                                            }                                       \n                                            \n                                          </select>\n                                      </div>\n\n                                      <div className=\"col-lg-12\">\n                                          <label>Category Title <i className=\"redFont\">*</i></label>\n                                          <input value={this.state.category} name=\"category\" id=\"category\" onChange={this.createCategoryUrl.bind(this)} type=\"text\" className=\"form-control edit-catg-new\" placeholder=\"Category Title\" ref=\"category\" />\n                                      </div>\n                                      <div className=\"col-lg-8\">\n                                          <label>Category URL <i className=\"redFont\">*</i></label>                                                                    \n                                          <input disabled value={this.state.categoryUrl} onChange={this.handleChange.bind(this)} id=\"categoryUrl\" name=\"categoryUrl\" type=\"text\" className=\"form-control categoryUrl\" placeholder=\"Category URL\" ref=\"categoryUrl\"  />\n                                      </div>\n                                      <div className=\"col-lg-4\">\n                                          <label>Category Rank <i className=\"redFont\">*</i></label>                                                                    \n                                          <input value={this.state.categoryRank} onChange={this.handleChange.bind(this)} id=\"categoryRank\" name=\"categoryRank\" type=\"number\" className=\"form-control categoryRank\" placeholder=\"Category Rank\" ref=\"categoryRank\"  />\n                                      </div>\n                                      <div className=\"col-lg-12 subCatAddLabel\">\n                                          <label>Subcategories </label>\n                                          {\n                                              this.state.subcatgArr.map((dataRowArray, index)=>{\n                                                  console.log(dataRowArray, 'subCategoryTitle'+dataRowArray.subCategoryCode);\n                                                  return(\n                                                      <div className=\"col-lg-12 col-md-12 NOpadding\" key={index}>                                                                                  \n                                                          <div className=\"col-lg-12 col-md-12 NOpadding newSubCatgArr\">   \n                                                              <div className=\"col-lg-11 col-md-11 NOpadding\">             \n                                                                  <input type=\"text\" id={dataRowArray.subCategoryCode} value={this.state['subCategoryTitle'+dataRowArray.subCategoryCode]} name={\"subCategoryTitle\"+dataRowArray.subCategoryCode} onChange={this.handleSubCatChange.bind(this)} className={\"form-control newSubCatg\"+index} placeholder=\"Category Title\" aria-label=\"Brand\" aria-describedby=\"basic-addon1\" ref={\"newSubCatg\"+index} />\n                                                              </div>\n                                                              <div className=\"col-lg-1 col-md-1 deleteSubCategory fa fa-trash\" id={dataRowArray.subCategoryCode} onClick={this.deleteSubCategory.bind(this)}>\n                                                              </div>\n                                                          </div>\n                                                          <div className=\"error\" name={\"subCategoryTitleError\"+dataRowArray.subCategoryCode} id={\"subCategoryTitle\"+dataRowArray.subCategoryCode}>{this.state[\"subCategoryTitleError\"+dataRowArray.subCategoryCode]}</div>\n                                                      </div>\n                                                  );\n                                              })\n                                          }\n                                      </div>\n                                      \n                                      <div className=\"col-lg-12 col-md-12\">\n                                          <div onClick={this.addNewSubCatArray.bind(this)}  className=\"submitBtn btn categoryBtn col-lg-12\">Add New Subcategory</div>\n                                      </div>\n\n                                  </div>\n                                  <div className=\"col-lg-6\">\n                                      <div className=\"divideCatgRows\">\n                                          <label>Category Short Description </label>                                                                    \n                                          <input type=\"text\" value={this.state.categoryDescription} onChange={this.handleChange.bind(this)} name=\"categoryDescription\" id=\"categoryDescription\" className=\"form-control categoryShortDesc\" placeholder=\"Category Short Description\" ref=\"categoryDescription\" />\n                                      </div>\n                                      {/* <div className=\"divideCatgRows\">\n                                        <label>Category Image</label>\n                                          <div className=\"col-lg-12 col-md-12 col-xs-6 col-sm-6\">\n                                          <div className=\"col-lg-12 col-md-12 col-xs-6 col-sm-6 categoryImage\" style={{\"backgroundImage\":`url(`+(this.state.categoryImage && this.state.categoryImage !== \"\" ? this.state.categoryImage : \"/images/notavailable.jpg\")+`)`}}>\n                                            <div className=\"row\">\n                                              <input type=\"file\" onChange={this.uploadImage.bind(this)} title=\"Click to Edit Photo\" className=\"imgUp col-lg-12 col-sm-12 col-xs-12 col-md-12\" accept=\".jpg,.jpeg,.png\" />\n                                            </div>\n                                          </div>\n                                          </div>\n                                      </div> */}\n                                      {\n                                        this.state.categoryImage ?\n                                        null\n                                        :\n                                        \n                                        <div className=\"divideCatgRows\">\n                                            <label>Category Image</label>                                                                    \n                                            <input type=\"file\" onChange={this.uploadImage.bind(this)} title=\"Click to Edit Photo\" className=\"\" accept=\".jpg,.jpeg,.png\" />\n                                        </div>\n                                      }\n                                      {\n                                        this.state.categoryImage ? \n                                        <div className=\"row\">\n                                          <div className=\"col-lg-4 productImgCol\">\n                                            <div className=\"prodImage\">\n                                              <div className=\"prodImageInner\">\n                                                  <span className=\"prodImageCross\" title=\"Delete\" data-imageUrl={this.state.categoryImage} onClick={this.deleteImage.bind(this)} >x</span>\n                                              </div>\n                                              <img title=\"view Image\" alt=\"Please wait...\" src={this.state.categoryImage ? this.state.categoryImage : \"/images/notavailable.jpg\"} className=\"img-responsive\" />\n                                            </div>    \n                                          </div>\n                                        </div>\n                                        :\n                                        null\n                                      }\n                                  </div>\n                                  <div className=\"col-lg-12 NOpadding-right\">\n                                      <div className=\"addCategoryNewBtn col-lg-12 NOpadding-right\">\n                                          <div className=\"pull-right col-lg-6 NOpadding-right\">\n                                              {/*<div className=\" col-lg-6\">\n                                                  <div onClick={this.cancelCategoryUpdate.bind(this)} className=\"edit-cancel-catg btn col-lg-12 col-md-12 col-sm-12 col-xs-12\">Cancel</div>\n                                              </div>*/}\n                                              <div className=\" col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\n                                                {\n                                                  this.state.editId ? \n                                                  <button onClick={this.updateCategory.bind(this)} className=\"submitBtn btn categoryBtn col-lg-3 col-md-3 col-sm-12 col-xs-12 pull-right \">Update</button>\n                                                  :\n                                                  <button onClick={this.submitCategory.bind(this)} className=\"submitBtn btn categoryBtn col-lg-3 col-md-3 col-sm-12 col-xs-12 pull-right\">Submit</button>\n                                                }\n                                              </div>\n                                          \n                                          </div>\n                                      </div>\n                                      \n                                  </div>\n                              </form>\n                              </div>\n\n                                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                  <IAssureTable \n                                    tableHeading={this.state.tableHeading}\n                                    twoLevelHeader={this.state.twoLevelHeader} \n                                    dataCount={this.state.dataCount}\n                                    tableData={this.state.tableData}\n                                    getData={this.getData.bind(this)}\n                                    tableObjects={this.state.tableObjects}\n                                    getSearchText={this.getSearchText.bind(this)} \n                                  />\n                                </div>\n                              </div>\n                          </div>\n                        </div>\n                      </section>\n                      </div>\n                    </div>\n                  </div>\n            </div>\n          );\n        }\n    }\nexport default CategoryManagement;"]},"metadata":{},"sourceType":"module"}