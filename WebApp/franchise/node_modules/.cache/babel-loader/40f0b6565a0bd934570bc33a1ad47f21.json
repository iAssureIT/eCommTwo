{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/addFile/AddImgPublicCompanySetting.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport S3FileUpload from 'react-s3';\nimport { deleteFile } from 'react-s3';\nimport 'react-table/react-table.css';\nimport \"./AddFile.css\";\n\nclass AddFile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"config\": \"\",\n      \"author\": \"\",\n      \"caseStudy_Image\": \"\",\n      logo: \"\",\n      \"caseStudy_File\": \"\",\n      \"configData\": props && props.configData ? props.configData : {},\n      \"fileArray\": props && props.fileArray ? props.fileArray : {},\n      \"fileType\": props && props.fileType ? props.fileType : {},\n      filenames: [],\n      filename: \"\"\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {}\n\n  componentDidMount() {\n    var configData = this.props.configData;\n    var fileType = this.props.fileType;\n    this.setState({\n      fileType: fileType\n    });\n    axios.get('http://qagangaexpressapi.iassureit.com/api/projectSettings/get/one/s3').then(response => {\n      const config = {\n        bucketName: response.data.bucket,\n        dirName: configData.dirName,\n        region: response.data.region,\n        accessKeyId: response.data.key,\n        secretAccessKey: response.data.secret\n      };\n      this.setState({\n        config: config\n      });\n    }).catch(function (error) {});\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n  }\n\n  uploadLogoImage(event) {\n    event.preventDefault();\n    var index = event.target.getAttribute('id');\n    let self = this;\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date())) + \"_\" + file.name;\n      var newFile = new File([file], newFileName);\n\n      if (newFile) {\n        var ext = newFile.name.split('.').pop();\n\n        if (ext == \"jpg\" || ext == \"png\" || ext == \"jpeg\" || ext == \"JPG\" || ext == \"PNG\" || ext == \"JPEG\") {\n          if (newFile) {\n            if (this.state.logo == \"\") {\n              S3FileUpload.uploadFile(newFile, this.state.config).then(Data => {\n                var fileName = file.name;\n                this.setState({\n                  fileName: fileName,\n                  logo: Data.location\n                }, () => {\n                  this.props.getLogo(this.state.logo, this.state.fileName);\n                });\n                this.deleteimageLogo(index);\n              }).catch(error => {});\n            } else {\n              swal({\n                title: \"Are you sure you want to replace this image?\",\n                text: \"Once replaced, you will not be able to recover this image!\",\n                icon: \"warning\",\n                buttons: true,\n                dangerMode: true\n              }).then(success => {\n                if (success) {\n                  S3FileUpload.uploadFile(newFile, this.state.config).then(Data => {\n                    this.setState({\n                      logo: Data.location\n                    }, () => {\n                      var logo = JSON.stringify(this.state.logo);\n                      this.props.getLogo(this.state.logo);\n                    });\n                    this.deleteimageLogo(index);\n                  }).catch(error => {});\n                } else {\n                  swal(\"Your information is safe!\");\n                }\n              });\n            }\n          } else {\n            swal(\"File not uploaded\", \"Something went wrong\");\n          }\n        } else {\n          swal(\"Format is incorrect\", \"Only Upload images format (jpg,png,jpeg)\");\n        }\n      }\n    }\n  }\n\n  deleteimageLogo(index) {\n    var data = index.split(\"/\");\n    var imageName = data[4];\n\n    if (index) {\n      S3FileUpload.deleteFile(imageName, this.state.config).then(response => {\n        swal(\"abc\", \"Image deleted successfully\");\n      }).catch(err => {});\n    }\n  }\n\n  deleteimagelogoDirect(event) {\n    event.preventDefault();\n    swal({\n      title: \"Are you sure you want to delete this image?\",\n      text: \"Once deleted, you will not be able to recover this image!\",\n      buttons: true,\n      dangerMode: true\n    }).then(success => {\n      if (success) {\n        swal(\"abc\", \"Your image is deleted!\");\n        this.setState({\n          logo: \"\"\n        });\n      } else {\n        swal(\"abc\", \"Your image is safe!\");\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, this.state.logo == \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row padTopC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row  col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"formLable col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, \"Add Logo \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clr_k \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-offset-1 col-lg-2 col-md-12 col-sm-12 col-xs-12 hand_icon move_hand_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/Upload-Icon.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-offset-2 col-lg-10 col-md-10 col-sm-10 col-xs-10 below_text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      className: \"text_k11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"under_ln formLable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 20\n      }\n    }, \"Choose Your Logo\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      title: \"Click to attach file\",\n      multiple: true,\n      name: \"userPic\",\n      onChange: this.uploadLogoImage.bind(this),\n      ref: \"logoImage\",\n      className: \"form-control click_input\",\n      id: \"upload-file2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 imgdetails\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, \"(Max size: 1 Mb, Format: JPEG, jpg, png)\")) : null, this.state.logo == \"\" ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \" padTopC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"formLable col-lg-12 col-md-12 col-sm-12 col-xs-12 row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"Logo \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 92\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"containerC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"logoImage\",\n      className: \"custFaTimes1\",\n      title: \"Delete image\",\n      onClick: this.deleteimagelogoDirect.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-times\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 133\n      }\n    })), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.logo,\n      alt: \"logo_Lupin\",\n      className: \" imageC row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nexport default AddFile;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/addFile/AddImgPublicCompanySetting.js"],"names":["React","Component","axios","swal","S3FileUpload","deleteFile","AddFile","constructor","props","state","logo","configData","fileArray","fileType","filenames","filename","componentWillReceiveProps","nextProps","componentDidMount","setState","get","then","response","config","bucketName","data","bucket","dirName","region","accessKeyId","key","secretAccessKey","secret","catch","error","handleChange","event","preventDefault","uploadLogoImage","index","target","getAttribute","self","currentTarget","files","file","newFileName","JSON","parse","stringify","Date","name","newFile","File","ext","split","pop","uploadFile","Data","fileName","location","getLogo","deleteimageLogo","title","text","icon","buttons","dangerMode","success","imageName","err","deleteimagelogoDirect","render","bind"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport axios                  from 'axios';\nimport swal                   from 'sweetalert';\nimport S3FileUpload           from 'react-s3';\nimport { deleteFile }         from 'react-s3';\n\nimport 'react-table/react-table.css';\nimport \"./AddFile.css\";\n\nclass AddFile extends Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n      \"config\"            :\"\",\n      \"author\"            :\"\",\n      \"caseStudy_Image\"   :\"\",\n      logo                :\"\",\n      \"caseStudy_File\"    :\"\",\n      \"configData\"        : props && props.configData ? props.configData : {},        \n      \"fileArray\"         : props && props.fileArray ? props.fileArray : {},        \n      \"fileType\"          : props && props.fileType ? props.fileType : {},        \n      filenames           : [],\n      filename            : \"\",\n    }\n  }\n  \n  componentWillReceiveProps(nextProps){\n   \n  }\n  \n  componentDidMount() {\n    var configData =  this.props.configData;\n    var fileType   =  this.props.fileType;\n    this.setState({\n      fileType : fileType\n    })\n    axios\n      .get('http://qagangaexpressapi.iassureit.com/api/projectSettings/get/one/s3')\n      .then((response)=>{\n        const config = {\n                          bucketName      : response.data.bucket,\n                          dirName         : configData.dirName,\n                          region          : response.data.region,\n                          accessKeyId     : response.data.key,\n                          secretAccessKey : response.data.secret,\n                       }\n        this.setState({\n          config : config\n        })\n      })\n      .catch(function(error){\n      })\n  }\n  \n  handleChange(event){\n    event.preventDefault();\n  }\n\n  uploadLogoImage(event){\n   event.preventDefault();\n    var index = event.target.getAttribute('id');\n    let self = this;\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date()))+\"_\"+file.name;\n      var newFile = new File([file],newFileName);\n      if (newFile) {\n        var ext = newFile.name.split('.').pop();\n        if(ext==\"jpg\" || ext==\"png\" || ext==\"jpeg\" || ext==\"JPG\" || ext==\"PNG\" || ext==\"JPEG\"){ \n          if (newFile) {\n            if(this.state.logo==\"\"){\n              S3FileUpload\n                .uploadFile(newFile,this.state.config)\n                .then((Data)=>{\n                  var fileName = file.name;\n                  this.setState({\n                    fileName : fileName,\n                    logo : Data.location\n                  },()=>{\n                    this.props.getLogo(this.state.logo, this.state.fileName);\n                    \n                  })\n                  this.deleteimageLogo(index)\n                })\n                .catch((error)=>{\n                })\n            }else{\n              swal({\n                    title: \"Are you sure you want to replace this image?\",\n                    text: \"Once replaced, you will not be able to recover this image!\",\n                    icon: \"warning\",\n                    buttons: true,\n                    dangerMode: true,\n                  })\n                  .then((success) => {\n                      if (success) {\n                        S3FileUpload\n                          .uploadFile(newFile,this.state.config)\n                          .then((Data)=>{\n                            this.setState({\n                              logo : Data.location\n                            },()=>{\n                              var logo = JSON.stringify(this.state.logo);\n                              this.props.getLogo(this.state.logo);\n                            })\n                            this.deleteimageLogo(index)\n                          })\n                          .catch((error)=>{\n                          })\n                      } else {\n                      swal(\"Your information is safe!\");\n                    }\n                  });\n            }         \n          }else{         \n            swal(\"File not uploaded\",\"Something went wrong\",); \n          }    \n        }else{\n          swal(\"Format is incorrect\",\"Only Upload images format (jpg,png,jpeg)\");  \n        }\n      }\n    }\n  }\n\n  deleteimageLogo(index){\n    var data = index.split(\"/\");\n    var imageName = data[4];\n      if(index){\n        S3FileUpload\n          .deleteFile(imageName,this.state.config)\n          .then((response) =>{\n            swal(\"abc\",\"Image deleted successfully\");\n          })\n          .catch((err) => {\n          })\n      }\n  }\n \n  deleteimagelogoDirect(event){\n    event.preventDefault();\n    swal({\n          title: \"Are you sure you want to delete this image?\",\n          text: \"Once deleted, you will not be able to recover this image!\",\n          buttons: true,\n          dangerMode: true,\n        })\n        .then((success) => {\n          if (success) {\n            swal(\"abc\",\"Your image is deleted!\");\n            this.setState({\n              logo : \"\"\n            })\n          } else {\n          swal(\"abc\",\"Your image is safe!\");\n        }\n      });\n  }\n  render() {\n    return (\n\n      <div className=\"\">\n        <div className=\"\">\n          {this.state.logo==\"\"?\n            <div className=\"row padTopC\">\n              <div className=\"row  col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                <h5 className=\"formLable col-lg-12 col-md-12 col-sm-12 col-xs-12\">Add Logo </h5>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                <div className=\"clr_k \">\n                  <div className=\"col-lg-offset-1 col-lg-2 col-md-12 col-sm-12 col-xs-12 hand_icon move_hand_icon\">\n                    <img src=\"/images/Upload-Icon.png\"/>\n                  </div>\n                  <div  className= \"col-lg-offset-2 col-lg-10 col-md-10 col-sm-10 col-xs-10 below_text\">\n                   <b className=\"text_k11\"></b>\n                   <span className=\"under_ln formLable\">Choose Your Logo</span>\n                  </div>     \n                  <input  type=\"file\" title=\"Click to attach file\" multiple name=\"userPic\" onChange={this.uploadLogoImage.bind(this)} ref=\"logoImage\"  className=\"form-control click_input\" id=\"upload-file2\" />\n                </div>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 imgdetails\">(Max size: 1 Mb, Format: JPEG, jpg, png)</div>\n            </div>\n            :null}\n          {this.state.logo==\"\"?\n            null\n          :\n            <div className=\" padTopC\">\n              <div className=\"row col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                <h5 className=\"formLable col-lg-12 col-md-12 col-sm-12 col-xs-12 row\">Logo <span className=\"astrick\">*</span></h5>\n              </div>\n              <div className=\"containerC\">\n                <label id=\"logoImage\" className=\"custFaTimes1\" title=\"Delete image\" onClick={this.deleteimagelogoDirect.bind(this)}><i className=\"fa fa-times\"></i></label>\n                <img src={this.state.logo} alt=\"logo_Lupin\" className=\" imageC row\"/>\n              </div>\n            </div>\n          }                 \n        </div>\n      </div>   \n    );\n  }\n}\nexport default AddFile"]},"metadata":{},"sourceType":"module"}