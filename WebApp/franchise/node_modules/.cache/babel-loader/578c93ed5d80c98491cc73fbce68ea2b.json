{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/admin/categoryWiseReports/WeeklyReport.js\";\nimport React, { Component } from 'react';\nimport IAssureTable from \"../../coreadmin/IAssureTable/IAssureTable.jsx\";\nimport moment from 'moment';\nimport $ from 'jquery';\nimport axios from 'axios';\nexport default class WeeklyReport extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"twoLevelHeader\": {\n        apply: false\n      },\n      \"tableHeading\": {\n        orderID: \"Order ID\",\n        cratedAt: \"Order Date\",\n        userFullName: \"Customer Name\",\n        totalAmount: \"Amount\",\n        deliveryStatus: \"Delivery Status\"\n      },\n      \"tableData\": [],\n      \"tableObjects\": {\n        apiLink: '/api/annualPlans/',\n        editUrl: '/Plan/',\n        paginationApply: true\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      fields: {},\n      errors: {},\n      selectedWeekYear: '',\n      selectedWeek: '',\n      startDate: '',\n      endDate: '',\n      dataCount: 0\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"/api/sections/get/list/\").then(response => {\n      this.setState({\n        sections: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n    this.setState({\n      selectedWeekYear: moment().format('Y') + '-' + moment().format('w') + 'W',\n      selectedWeek: moment().format('w'),\n      startDate: moment().year(moment().format('Y')).week(moment().format('W')).startOf('week').format('YYYY-MM-DD'),\n      endDate: moment().year(moment().format('Y')).week(moment().format('W')).endOf('week').format('YYYY-MM-DD')\n    }, () => {\n      var formValues = {\n        \"startTime\": this.state.startDate,\n        \"endTime\": this.state.endDate,\n        \"section\": null,\n        \"category\": null,\n        \"subcategory\": null\n      };\n      this.setState({\n        formValues: formValues\n      }, () => {\n        this.getCount();\n      });\n      this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, null, null, null);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.reportData) {\n      this.setState({\n        reportData: nextProps.reportData\n      });\n    }\n  }\n\n  getCount() {\n    axios.post(\"/api/orders/get/category-wise-report-count\", this.state.formValues).then(response => {\n      this.setState({\n        dataCount: response.data.dataCount\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  getData(startDate, endDate, startRange, limitRange, section, category, subcategory) {\n    var formValues = {\n      \"startTime\": startDate,\n      \"endTime\": endDate,\n      \"section\": section,\n      \"category\": category,\n      \"subcategory\": subcategory\n    };\n    this.setState({\n      formValues: formValues\n    }, () => {\n      this.getTableData(startRange, limitRange);\n    });\n  }\n\n  getTableData(startRange, limitRange) {\n    axios.post(\"/api/orders/get/category-wise-report/\" + startRange + '/' + limitRange, this.state.formValues).then(response => {\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  previousWeek(event) {\n    event.preventDefault();\n    var startDate = moment(this.state.startDate).subtract(1, \"week\").format('YYYY-MM-DD');\n    this.setState({\n      selectedWeekYear: moment(startDate).format('Y') + '-' + moment(startDate).format('w') + 'W',\n      selectedWeek: moment(startDate).format('w'),\n      startDate: startDate,\n      endDate: moment(startDate).add(1, \"week\").format('YYYY-MM-DD')\n    }, () => {\n      this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    });\n  }\n\n  nextWeek(event) {\n    event.preventDefault();\n    var startDate = moment(this.state.startDate).add(1, \"week\").format('YYYY-MM-DD');\n    this.setState({\n      selectedWeekYear: moment(startDate).format('Y') + '-' + moment(startDate).format('w') + 'W',\n      selectedWeek: moment(startDate).format('w'),\n      startDate: startDate,\n      endDate: moment(startDate).add(1, \"week\").format('YYYY-MM-DD')\n    }, () => {\n      this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val());\n    });\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  getSearchText(searchText, startRange, limitRange) {\n    this.setState({\n      tableData: []\n    });\n  }\n\n  handleSection(event) {\n    this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, event.target.value, null, null);\n    axios.get(\"/api/category/get/list/\" + event.target.value).then(response => {\n      this.setState({\n        categories: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleCategory(event) {\n    this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), event.target.value, null);\n    axios.get(\"/api/category/get/one/\" + event.target.value).then(response => {\n      this.setState({\n        subcategories: response.data.subCategory\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleSubCategory(event) {\n    event.preventDefault();\n    this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), event.target.value);\n  }\n\n  render() {\n    if (!this.props.loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 sales-report-main-class\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"reports-select-date-boxmain\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"reports-select-date-boxsec\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"reports-select-date-Title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 33\n        }\n      }, \"Weekly Reports\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.previousWeek.bind(this),\n        className: \"commonReportArrowPoiner input-group-addon\",\n        id: \"basic-addon1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-chevron-circle-left\",\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 155\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.handleChange,\n        name: \"inputweekpicker\",\n        value: this.state.selectedWeekYear,\n        type: \"text\",\n        className: \"reportsDateRef inputweekpicker form-control\",\n        placeholder: \"\",\n        \"aria-label\": \"Brand\",\n        \"aria-describedby\": \"basic-addon1\",\n        ref: \"inputweekpicker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.nextWeek.bind(this),\n        className: \"commonReportArrowPoiner input-group-addon\",\n        id: \"basic-addon1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-chevron-circle-right\",\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 150\n        }\n      }))))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      }, \"Section\"), /*#__PURE__*/React.createElement(\"select\", {\n        id: \"section\",\n        className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        ref: \"section\",\n        name: \"section\",\n        onChange: this.handleSection.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 27\n        }\n      }, \"-- Select --\"), this.state.sections && this.state.sections.map((data, index) => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 38\n          }\n        }, data.section);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }\n      }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n        id: \"category\",\n        className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        ref: \"category\",\n        name: \"category\",\n        onChange: this.handleCategory.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 27\n        }\n      }, \"-- Select --\"), this.state.categories && this.state.categories.map((data, index) => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 38\n          }\n        }, data.category);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-3 col-md-3 col-sm-3 col-xs-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }\n      }, \"Subcategory\"), /*#__PURE__*/React.createElement(\"select\", {\n        id: \"subcategory\",\n        className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        ref: \"subcategory\",\n        name: \"subcategory\",\n        onChange: this.handleSubCategory.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 27\n        }\n      }, \"-- Select --\"), this.state.subcategories && this.state.subcategories.map((data, index) => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 38\n          }\n        }, data.subCategoryTitle);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row tablebg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IAssureTable, {\n        tableHeading: this.state.tableHeading,\n        twoLevelHeader: this.state.twoLevelHeader,\n        dataCount: this.state.dataCount,\n        tableData: this.state.tableData,\n        getData: this.getTableData.bind(this),\n        tableObjects: this.state.tableObjects,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-12 col-xs-12 col-lg-8 col-lg-offset-4 col-md-12 loadingImg LoaderDiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"ldrImageforbulk\",\n        src: \"/images/Loadersglms.gif\",\n        alt: \"loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 110\n        }\n      }));\n    }\n  }\n\n} // export default WeeklyListContainer = withTracker(props =>{\n// var weekNumFromSess = Session.get(\"selectedWeek\");\n// var mondayInWeek = moment(weekNumFromSess).format();\n// var mondayInWeekDt = new Date(mondayInWeek);\n// var sundayOfWeek = moment(mondayInWeek).add(7,\"days\").format();\n// var sundayOfWeekDt = new Date(sundayOfWeek);\n// const reportHandle = Meteor.subscribe(\"OrdersData\");\n// var reportData = [];\n// if(props.selectedCategory){\n//     if(props.selectedSubCategory){\n//         reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid',  \"products\": { $elemMatch: { category: props.selectedCategory, subCategory: props.selectedSubCategory}}}, {sort: {'createdAt': -1}}).fetch();\n//     }else{\n//         reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid',  \"products\": { $elemMatch: { category: props.selectedCategory}}}, {sort: {'createdAt': -1}}).fetch();\n//     }\n// }else{\n//     reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid'}, {sort: {'createdAt': -1}}).fetch();\n// }\n// const loading = !reportHandle.ready();\n// return{\n//     loading,\n//     reportData,\n// };\n// })(CategoryWiseReportsWeeklyList);","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/admin/categoryWiseReports/WeeklyReport.js"],"names":["React","Component","IAssureTable","moment","$","axios","WeeklyReport","constructor","props","state","apply","orderID","cratedAt","userFullName","totalAmount","deliveryStatus","apiLink","editUrl","paginationApply","fields","errors","selectedWeekYear","selectedWeek","startDate","endDate","dataCount","componentDidMount","get","then","response","setState","sections","data","catch","error","console","log","format","year","week","startOf","endOf","formValues","getCount","getData","startRange","limitRange","componentWillReceiveProps","nextProps","reportData","post","section","category","subcategory","getTableData","tableData","previousWeek","event","preventDefault","subtract","add","val","nextWeek","handleChange","target","name","value","getSearchText","searchText","handleSection","categories","handleCategory","subcategories","subCategory","handleSubCategory","render","loading","bind","map","index","_id","subCategoryTitle","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }     from 'react';\nimport IAssureTable             from \"../../coreadmin/IAssureTable/IAssureTable.jsx\";\nimport moment from 'moment';\nimport $ from 'jquery';\nimport axios                  from 'axios';\n\nexport default class WeeklyReport extends Component{\n\tconstructor(props){\n        super(props);\n        this.state = {\n           \"twoLevelHeader\"     : {\n            apply               : false,\n          },\n          \"tableHeading\"        : {\n            orderID                    : \"Order ID\",\n            cratedAt                   : \"Order Date\",\n            userFullName               : \"Customer Name\",\n            totalAmount                : \"Amount\",\n            deliveryStatus             : \"Delivery Status\",\n\n          },\n          \"tableData\"           : [],\n          \"tableObjects\"        : {\n            apiLink             : '/api/annualPlans/',\n            editUrl             : '/Plan/',\n            paginationApply     : true,\n          },\n          \"startRange\"          : 0,\n          \"limitRange\"          : 10,\n          fields                : {},\n          errors                : {},\n          selectedWeekYear       : '',\n          selectedWeek           : '',\n          startDate             : '',\n          endDate               : '',\n          dataCount             : 0\n        } \n    }\n\n    componentDidMount(){\n        \n        axios.get(\"/api/sections/get/list/\")\n        .then((response)=>{\n          this.setState({ sections : response.data })\n        })\n        .catch((error)=>{\n            console.log('error', error);\n        })\n        this.setState({\n            selectedWeekYear : moment().format('Y')+'-'+moment().format('w')+'W',\n            selectedWeek : moment().format('w'),\n            startDate   : moment().year(moment().format('Y')).week(moment().format('W')).startOf('week').format('YYYY-MM-DD'),\n            endDate     : moment().year(moment().format('Y')).week(moment().format('W')).endOf('week').format('YYYY-MM-DD')\n            },\n            ()=>{\n\n            var formValues={\n                \"startTime\" : this.state.startDate,\n                \"endTime\"   : this.state.endDate,\n                \"section\"   : null,\n                \"category\"  : null,\n                \"subcategory\" : null\n              }\n            this.setState({ formValues : formValues} ,()=>{ this.getCount();  });  \n \n            this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, null, null, null )    \n        })\n    }\n    componentWillReceiveProps(nextProps){\n        if(nextProps.reportData){\n            this.setState({\n                reportData : nextProps.reportData\n            });\n        }\n    }\n    getCount(){\n        axios.post(\"/api/orders/get/category-wise-report-count\", this.state.formValues)\n        .then((response)=>{\n          this.setState({ \n            dataCount : response.data.dataCount\n          })\n        })\n        .catch((error)=>{\n            console.log('error', error);\n        })\n    }\n    getData(startDate,endDate, startRange,limitRange,section ,category, subcategory){\n        var formValues={\n              \"startTime\" : startDate,\n              \"endTime\"   : endDate,\n              \"section\"   : section,\n              \"category\"  : category,\n              \"subcategory\" : subcategory\n            }\n        this.setState({formValues : formValues},()=>{\n\n            this.getTableData(startRange,limitRange);\n        });    \n    }\n    getTableData(startRange,limitRange){\n      axios.post(\"/api/orders/get/category-wise-report/\"+startRange+'/'+limitRange,this.state.formValues)\n            .then((response)=>{\n              this.setState({ \n                tableData : response.data\n              })\n            })\n            .catch((error)=>{\n                console.log('error', error);\n            })\n    }\n\tpreviousWeek(event){\n\t\tevent.preventDefault();\n        \n        var startDate = moment(this.state.startDate).subtract(1, \"week\").format('YYYY-MM-DD');\n\n        this.setState({\n            selectedWeekYear: moment(startDate).format('Y')+'-'+moment(startDate).format('w')+'W',\n            selectedWeek    : moment(startDate).format('w'), \n            startDate       : startDate,\n            endDate         : moment(startDate).add(1, \"week\").format('YYYY-MM-DD')\n        },()=>{\n            this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val() )   \n        })\n\t}\n\tnextWeek(event){\n\t\tevent.preventDefault();\n        \n        var startDate = moment(this.state.startDate).add(1, \"week\").format('YYYY-MM-DD');\n\n        this.setState({\n            selectedWeekYear: moment(startDate).format('Y')+'-'+moment(startDate).format('w')+'W',\n            selectedWeek    : moment(startDate).format('w'), \n            startDate       : startDate,\n            endDate         : moment(startDate).add(1, \"week\").format('YYYY-MM-DD')\n        },()=>{\n            this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), $('#subcategory').val() )   \n        })\n    }\n    \n    handleChange(event){\n        event.preventDefault();\n        const target = event.target;\n        const name = target.name;\n\n        this.setState({\n           [name] : event.target.value,\n        });\n    }\n    \n    getSearchText(searchText, startRange, limitRange){\n        this.setState({\n            tableData : []\n        });\n    }\n    handleSection(event){\n      this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, event.target.value, null, null);\n    \n        axios.get(\"/api/category/get/list/\"+event.target.value)\n        .then((response)=>{\n          this.setState({ \n            categories : response.data\n          })\n        })\n        .catch((error)=>{\n            console.log('error', error);\n        })\n    }\n    handleCategory(event){\n        this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), event.target.value, null);\n        axios.get(\"/api/category/get/one/\"+event.target.value)\n        .then((response)=>{\n          this.setState({ \n            subcategories : response.data.subCategory\n          })\n        })\n        .catch((error)=>{\n            console.log('error', error);\n        })\n    }\n    handleSubCategory(event){\n      event.preventDefault();\n      this.getData(this.state.startDate, this.state.endDate, this.state.startRange, this.state.limitRange, $('#section').val(), $('#category').val(), event.target.value);\n    }\n    render(){\n        if(!this.props.loading){\n            return( \n                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 sales-report-main-class\">\n                    <div className=\"reports-select-date-boxmain\">\n                            <div className=\"reports-select-date-boxsec\">\n                                <div className=\"reports-select-date-Title\">Weekly Reports</div>\n                                <div className=\"input-group\">\n                                    <span  onClick={this.previousWeek.bind(this)} className=\"commonReportArrowPoiner input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"></i></span>\n                                    <input  onChange={this.handleChange} name=\"inputweekpicker\" value={this.state.selectedWeekYear}  type=\"text\" className=\"reportsDateRef inputweekpicker form-control\" placeholder=\"\" aria-label=\"Brand\" aria-describedby=\"basic-addon1\" ref=\"inputweekpicker\"  />\n                                    <span onClick={this.nextWeek.bind(this)} className=\"commonReportArrowPoiner input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"></i></span>\n                                </div>\n                            </div>\n                        </div>\n                        <br/>\n                      <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n                        <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Section \n                        </label>\n                        <select id=\"section\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n                          ref=\"section\" name=\"section\" onChange={this.handleSection.bind(this)} >\n                          <option selected={true} disabled={true}>-- Select --</option>\n                          {\n                            this.state.sections && this.state.sections.map((data,index)=>{\n                              return(<option value={data._id}>{data.section}</option>);\n                            })\n                          }\n                        </select>\n                      </div>\n                      <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n                        <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Category \n                        </label>\n                        <select id=\"category\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n                          ref=\"category\" name=\"category\" onChange={this.handleCategory.bind(this)} >\n                          <option selected={true} disabled={true}>-- Select --</option>\n                          {\n                            this.state.categories && this.state.categories.map((data,index)=>{\n                              return(<option value={data._id}>{data.category}</option>);\n                            })\n                          }\n                        </select>\n                      </div>\n                      <div className=\"col-lg-3 col-md-3 col-sm-3 col-xs-6\">\n                        <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12\">Subcategory \n                        </label>\n                        <select id=\"subcategory\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" \n                          ref=\"subcategory\" name=\"subcategory\" onChange={this.handleSubCategory.bind(this)} >\n                          <option selected={true} disabled={true}>-- Select --</option>\n                          {\n                            this.state.subcategories && this.state.subcategories.map((data,index)=>{\n                              return(<option value={data._id}>{data.subCategoryTitle}</option>);\n                            })\n                          }\n                        </select>\n                      </div>\n                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\">\n                            <div className=\"row tablebg\">   \n                            {\n                            <IAssureTable \n                                tableHeading={this.state.tableHeading}\n                                twoLevelHeader={this.state.twoLevelHeader} \n                                dataCount={this.state.dataCount}\n                                tableData={this.state.tableData}\n                                getData={this.getTableData.bind(this)}\n                                tableObjects={this.state.tableObjects}\n                            />\n                            }\n                            </div>\n                        </div>\n                </div>\n                \n            );\n        }else{\n            return(\n                <div className=\"col-sm-12 col-xs-12 col-lg-8 col-lg-offset-4 col-md-12 loadingImg LoaderDiv\"><img className=\"ldrImageforbulk\" src=\"/images/Loadersglms.gif\" alt=\"loading\"/></div>\n            );\n        } \n    }\n}\n// export default WeeklyListContainer = withTracker(props =>{\n// var weekNumFromSess = Session.get(\"selectedWeek\");\n        \n// var mondayInWeek = moment(weekNumFromSess).format();\n\n// var mondayInWeekDt = new Date(mondayInWeek);\n// var sundayOfWeek = moment(mondayInWeek).add(7,\"days\").format();\n// var sundayOfWeekDt = new Date(sundayOfWeek);\n\n// const reportHandle = Meteor.subscribe(\"OrdersData\");\n// var reportData = [];\n// if(props.selectedCategory){\n//     if(props.selectedSubCategory){\n//         reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid',  \"products\": { $elemMatch: { category: props.selectedCategory, subCategory: props.selectedSubCategory}}}, {sort: {'createdAt': -1}}).fetch();\n//     }else{\n//         reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid',  \"products\": { $elemMatch: { category: props.selectedCategory}}}, {sort: {'createdAt': -1}}).fetch();\n//     }\n// }else{\n//     reportData =  Orders.find({'createdAt':{$gte : mondayInWeekDt, $lt : sundayOfWeekDt }, 'status' : 'Paid'}, {sort: {'createdAt': -1}}).fetch();\n// }\n// const loading = !reportHandle.ready();\n// return{\n//     loading,\n//     reportData,\n// };\n// })(CategoryWiseReportsWeeklyList);"]},"metadata":{},"sourceType":"module"}