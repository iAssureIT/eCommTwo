{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/StoreManagement/product/productBulkUpload/component/BulkUploadComponent.js\";\nimport React, { Component } from 'react';\nimport XLSX from \"xlsx\"; //import './BulkUpload.css';\n\nimport axios from 'axios';\nimport Loader from '../../../../coreadmin/common/Loader/Loader.js';\nimport $ from 'jquery';\nimport Message from '../../../../storeAdmin/message/Message.js';\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\nimport IAssureTable from \"../../../../coreadmin/IAssureTable/IAssureTable.jsx\";\n\nclass BulkUploadComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"inputFileData\": [],\n      \"finalData\": [],\n      \"fileWarningError\": false,\n      tableData: [],\n      failedRecordsTable: [],\n      tableHeading: {\n        \"section\": 'Section',\n        \"category\": 'Category',\n        \"brand\": 'Brand',\n        \"productName\": 'Product Name',\n        \"productCode\": 'Product Code',\n        \"itemCode\": 'Item Code',\n        \"originalPrice\": 'Original Price',\n        \"discountedPrice\": 'Discounted Price',\n        \"size\": 'Size',\n        \"color\": 'Color'\n      },\n      failedtableHeading: {\n        \"remark\": 'Remark',\n        \"section\": 'Section',\n        \"category\": 'Category',\n        \"brand\": 'Brand',\n        \"productName\": 'Product Name',\n        \"productCode\": 'Product Code',\n        \"itemCode\": 'Item Code',\n        \"originalPrice\": 'Original Price',\n        \"discountedPrice\": 'Discounted Price',\n        \"size\": 'Size',\n        \"color\": 'Color'\n      },\n      tableObjects: {\n        paginationApply: false,\n        searchApply: false,\n        deleteMethod: 'delete',\n        apiLink: '/api/products',\n        editUrl: '/add-product/'\n      },\n      startRange: 0,\n      limitRange: 10\n    };\n    this.fileInput = React.createRef();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFile = this.handleFile.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    /*axios\n          .get(this.props.fileDetailUrl+\"products.xlsx\")\n          .then((response)=> {\n          if (response) {\n            this.setState({\n                              fileDetails:response.data,\n                              failedRecordsCount : response.data.failedRecords.length,\n                              goodDataCount : response.data.goodrecords.length\n                          });\n                             var tableData = response.data.goodrecords.map((a, i)=>{\n                            return{\n                                \"remark\"        : a.remark        ? a.remark    : '-',\n                                \"section\"       : a.section        ? a.section    : '-',\n                                \"category\"      : a.category     ? a.category : '-',\n                                \"brand\"         : a.brand     ? a.brand : '-',\n                                \"productName\"   : a.productName     ? a.productName : '-',\n                                \"productCode\"   : a.productCode     ? a.productCode : '-',\n                                \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                                \"productName\"   : a.productName     ? a.productName : '-',\n                                \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                                \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-', \n                                \"size\"   : a.size     ? a.size : '-', \n                                \"color\"   : a.color     ? a.color : '-'\n                            }\n                          })\n                           var failedRecordsTable = response.data.failedRecords.map((a, i)=>{\n                          return{ \n                              \"remark\"        : a.remark        ? a.remark    : '-',\n                              \"section\"       : a.section        ? a.section    : '-',\n                              \"category\"      : a.category     ? a.category : '-',\n                              \"brand\"         : a.brand     ? a.brand : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"productCode\"   : a.productCode     ? a.productCode : '-',\n                              \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                              \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-',\n                              \"size\"          : a.size     ? a.size : '-', \n                              \"color\"         : a.color     ? a.color : '-',\n                          }\n                          })\n                          this.setState({\n                              tableData : tableData,\n                              failedRecordsTable : failedRecordsTable\n                          })\n          }\n          })\n          .catch((error)=> { \n                \n          })   \n         */\n  }\n\n  handleChange(e) {\n    const files = e.target.files;\n\n    if (files && files[0]) {\n      var fileName = files[0].name;\n      var ext = fileName.split('.').pop();\n\n      if (ext === 'csv' || ext === 'xlsx' || ext === 'xls') {\n        this.handleFile(files[0]);\n        this.setState({\n          messageData: {}\n        });\n      } else {\n        this.fileInput.value = '';\n        this.setState({\n          finalData: [],\n          messageData: {\n            \"type\": \"outpage\",\n            \"icon\": \"fa fa-exclamation\",\n            \"message\": \"Invalid file format.\",\n            \"class\": \"warning\",\n            \"autoDismiss\": true\n          }\n        });\n      }\n    }\n  }\n\n  handleFile(file) {\n    // var format = /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,<>/?]/;\n    var format = /^\\s*$/;\n\n    if (format.test(file.name)) {\n      this.setState({\n        fileWarningError: true,\n        finalData: []\n      });\n    } else {\n      $('.fullpageLoader').show();\n      this.setState({\n        fileWarningError: false,\n        finalData: [],\n        fileName: file.name\n      });\n      const reader = new FileReader();\n      const rABS = !!reader.readAsBinaryString;\n\n      reader.onload = ({\n        target: {\n          result\n        }\n      }) => {\n        const wb = XLSX.read(result, {\n          type: rABS ? \"binary\" : \"array\"\n        });\n        const wsname = wb.SheetNames[0];\n        const ws = wb.Sheets[wsname];\n        const data = XLSX.utils.sheet_to_json(ws, {\n          header: 1\n        });\n        var documentObj = [];\n        let count = 0;\n        this.setState({\n          inputFileData: data\n        }, () => {\n          /*var productCodeArray = [];\n          for (var j=1; j <= this.state.inputFileData.length; j++){\n          var record = this.state.inputFileData[j];\n          let header = this.state.inputFileData[0];\n          if (record !== undefined) {\n          productCodeArray.push(record[header.indexOf('productCode')]);\n          }\n          } \n          productCodeArray = productCodeArray.filter((item, i, ar) => ar.indexOf(item) === i);\n          console.log('productCodeArray',productCodeArray)*/\n          var productCode = '';\n          productCode = this.state.inputFileData[1][this.state.inputFileData[0].indexOf('productCode')]; // loop on all the records in sheet\n\n          for (var j = 1; j <= this.state.inputFileData.length; j++) {\n            var record = this.state.inputFileData[j];\n            var attributeArray = [];\n\n            if (j === 1) {\n              var previousRecord = this.state.inputFileData[j];\n            } else {\n              var previousRecord = this.state.inputFileData[j - 1];\n            }\n\n            let header = this.state.inputFileData[0];\n\n            if (record !== undefined) {\n              var k; // loop on header columns\n\n              for (k in header) {\n                if (!documentObj.hasOwnProperty(count)) {\n                  documentObj.push({\n                    [header[k]]: record[k]\n                  });\n                } else {\n                  if (header[k].startsWith(\"feature list\")) {\n                    console.log(\"record[\" + k + \"]:\", record[k]);\n\n                    if (typeof record[k] !== 'undefined' && record[k].trim() !== '') {\n                      var featuresArray = record[k].split(\"\\n\");\n                      var featuresString = \"\";\n                      featuresArray.map((data, ind) => {\n                        featuresString += \"<li>\" + data + \"</li>\";\n                      });\n                      documentObj[count]['featureList'] = featuresString;\n                    }\n                  } else if (header[k].startsWith(\"attribute\")) {\n                    console.log(\"record[\" + k + \"]:\", record[k]); // if (typeof record[k] !== 'undefined' && record[k].trim() !== '') {\n\n                    if (typeof record[k] !== 'undefined') {\n                      attributeArray.push({\n                        attributeName: header[k].replace(/^attribute +/i, ''),\n                        attributeValue: record[k]\n                      });\n                      documentObj[count]['attributes'] = attributeArray;\n                    }\n                  } else if (header[k] === 'tags') {\n                    if (record[k] !== undefined) {\n                      documentObj[count]['tags'] = record[k].split(',');\n                    }\n                  } else if (header[k] === 'featured' || header[k] === 'exclusive' || header[k] === 'newProduct' || header[k] === 'bestSeller' || header[k] === 'taxInclude') {\n                    var tempflag = record[k] === 'yes' ? true : false;\n                    documentObj[count][header[k]] = tempflag;\n                  } else {\n                    documentObj[count][header[k]] = record[k];\n                  } // console.log(\" requireddata vendor props:\",this.props.requiredData.vendor);\n                  // console.log(\"localStorage.getItem('admin_ID'):\",localStorage.getItem('admin_ID'));\n\n\n                  documentObj[count]['filename'] = file.name;\n                  documentObj[count]['vendor'] = this.props.requiredData.vendor;\n                  documentObj[count]['createdBy'] = localStorage.getItem('admin_ID');\n                }\n              } //attributeArray = [];\n\n\n              count++;\n            }\n          }\n\n          this.setState({\n            finalData: documentObj\n          }, () => {\n            // console.log(\"final data:\",this.state.finalData);\n            $('.fullpageLoader').hide();\n          });\n        });\n      };\n\n      if (rABS) reader.readAsBinaryString(file);else reader.readAsArrayBuffer(file); //$('.submitBtn').prop('disabled',false);\n    }\n  } // Returns if a value is a string\n\n\n  isString(value) {\n    return typeof value === 'string' || value instanceof String;\n  } // Returns if a value is really a number\n\n\n  isNumber(value) {\n    return typeof value === 'number' && isFinite(value);\n  } // Returns if value is a date object\n\n\n  isDate(value) {\n    return value instanceof Date;\n  } // Returns if a value is a boolean\n\n\n  isBoolean(value) {\n    return typeof value === 'boolean';\n  } // Returns if a value is null\n\n\n  isNull(value) {\n    return value === null;\n  } // Returns if a value is undefined\n\n\n  isUndefined(value) {\n    return typeof value === 'undefined';\n  } // Returns if a value is an object\n\n\n  isObject(value) {\n    return value && typeof value === 'object' && value.constructor === Object;\n  } // Returns if a value is an array\n\n\n  isArray(value) {\n    return value && typeof value === 'object' && value.constructor === Array;\n  } // ES5 actually has a method for this (ie9+)\n  //Array.isArray(value);\n\n\n  bulkUpload() {\n    var formValues = this.state.finalData;\n    $('.fullpageLoader').show();\n\n    if (!this.state.fileWarningError) {\n      axios.post('/api/products/post/bulkUploadProduct', formValues).then(response => {\n        // console.log(\"response.data.message\",response.data.message);\n        this.fileInput.value = '';\n        this.setState({\n          finalData: [],\n          messageData: {\n            \"type\": \"outpage\",\n            \"icon\": \"fa fa-exclamation\",\n            \"message\": response.data.message,\n            \"class\": \"warning\",\n            \"autoDismiss\": false\n          }\n        });\n        $('.filedetailsDiv').show();\n        axios.get(this.props.fileDetailUrl + this.state.fileName).then(response => {\n          $('.fullpageLoader').hide();\n\n          if (response) {\n            this.setState({\n              fileDetails: response.data,\n              failedRecordsCount: response.data.failedRecords.length,\n              goodDataCount: response.data.goodrecords.length\n            });\n            var tableData = response.data.goodrecords.map((a, i) => {\n              return {\n                \"remark\": a.remark ? a.remark : '-',\n                \"section\": a.section ? a.section : '-',\n                \"category\": a.category ? a.category : '-',\n                \"brand\": a.brand ? a.brand : '-',\n                \"productName\": a.productName ? a.productName : '-',\n                \"productCode\": a.productCode ? a.productCode : '-',\n                \"itemCode\": a.itemCode ? a.itemCode : '-',\n                \"productName\": a.productName ? a.productName : '-',\n                \"originalPrice\": a.originalPrice ? \"<i class='fa fa-\" + a.currency.toLowerCase() + \"'></i> \" + a.originalPrice.toString() : '-',\n                \"discountedPrice\": a.discountedPrice ? \"<i class='fa fa-\" + a.currency.toLowerCase() + \"'></i> \" + a.discountedPrice.toString() : '-',\n                \"size\": a.size ? a.size : '-',\n                \"color\": a.color ? a.color : '-'\n              };\n            });\n            var failedRecordsTable = response.data.failedRecords.map((a, i) => {\n              return {\n                \"remark\": a.remark ? a.remark : '-',\n                \"section\": a.section ? a.section : '-',\n                \"category\": a.category ? a.category : '-',\n                \"brand\": a.brand ? a.brand : '-',\n                \"productName\": a.productName ? a.productName : '-',\n                \"productCode\": a.productCode ? a.productCode : '-',\n                \"itemCode\": a.itemCode ? a.itemCode : '-',\n                \"productName\": a.productName ? a.productName : '-',\n                \"originalPrice\": a.originalPrice ? \"<i class='fa fa-\" + a.currency.toLowerCase() + \"'></i> \" + a.originalPrice.toString() : '-',\n                \"discountedPrice\": a.discountedPrice ? \"<i class='fa fa-\" + a.currency.toLowerCase() + \"'></i> \" + a.discountedPrice.toString() : '-',\n                \"size\": a.size ? a.size : '-',\n                \"color\": a.color ? a.color : '-'\n              };\n            });\n            this.setState({\n              tableData: tableData,\n              failedRecordsTable: failedRecordsTable\n            });\n          }\n        }).catch(error => {});\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  render() {\n    //console.log('tableData',this.state.tableData)  \n    // console.log(\"===->\",this.state.finalData)\n    const SheetJSFT = [\"xlsx\", \"xls\", \"csv\"];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      type: \"fullpageLoader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Message, {\n      messageData: this.state.messageData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-6 col-xs-6 bulkEmployeeContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2 col-md-2 col-sm-12 col-xs-12 bulkEmployeeImg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: this.props.fileurl,\n      download: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://s3.ap-south-1.amazonaws.com/assureidportal/websiteImgs/filecsv.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-10 col-md-10 col-sm-12 col-xs-12 bulkEmployeeVerif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 15\n      }\n    }, \"Please use attached file format for bulkupload into this system.\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 15\n      }\n    }, \"Please do not change the column header of following file.\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 15\n      }\n    }, \"File format must be .csv or .xlsx or .xls.\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-5 col-md-5 col-sm-5 col-xs-5 bulkuploadFileouter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      ref: el => this.fileInput = el,\n      type: \"file\",\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\",\n      accept: SheetJSFT,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upldProdFileInstPre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 13\n      }\n    }), this.state.fileWarningError ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"fileWarningError\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 17\n      }\n    }, \"Filename should be proper. It should not contain any special character and spaces\") : null)), this.state.finalData.length > 0 ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"submitBtnGo btn btnSubmit col-lg-2 col-lg-offset-10 col-md-2 col-md-offset-10 col-sm-3 col-sm-offset-9 col-xs-3 col-xs-offset-9\",\n      onClick: this.bulkUpload.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 17\n      }\n    }, \"Submit\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"submitBtn btn btnSubmit col-lg-2 col-lg-offset-10 col-md-2 col-md-offset-10 col-sm-3 col-sm-offset-9 col-xs-3 col-xs-offset-9\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 filedetailsDiv\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 bulkEmployeeContent NoPadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }\n    }, this.state.fileDetails ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav nav-tabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      \"data-toggle\": \"tab\",\n      href: \"#failure\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 40\n      }\n    }, \"Failure\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      \"data-toggle\": \"tab\",\n      href: \"#success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 22\n      }\n    }, \"Success\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 15\n      }\n    }, \"Filename: \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 29\n      }\n    }, this.state.fileName)), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"failure\",\n      className: \"tab-pane fade in active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 17\n      }\n    }, \"Out of \", this.state.fileDetails.totalRecords, \" \", this.state.fileDetails.totalRecords > 1 ? \"records\" : \"record\", \",  \\xA0\", this.state.fileDetails.failedRecords.length, \" bad \", this.state.fileDetails.failedRecords.length > 1 ? \"records were \" : \"record was \", \"found.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(ReactHTMLTableToExcel, {\n      id: \"test-table-xls-button\",\n      className: \"download-table-xls-button\",\n      table: \"table-to-xls\",\n      filename: \"tablexls\",\n      sheet: \"tablexls\",\n      buttonText: \"Download as XLS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        overflowX: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.failedtableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.failedRecordsCount,\n      tableData: this.state.failedRecordsTable //getData={this.getData.bind(this)}\n      ,\n      tableObjects: this.state.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      width: \"50%\",\n      id: \"table-to-xls\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 25\n      }\n    }, \"Remark\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 25\n      }\n    }, \"section\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 25\n      }\n    }, \"category\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 25\n      }\n    }, \"subCategory\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 25\n      }\n    }, \"brand\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 25\n      }\n    }, \"productCode\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 25\n      }\n    }, \"itemCode\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 25\n      }\n    }, \"productName\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 25\n      }\n    }, \"productDetails\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 25\n      }\n    }, \"shortDescription\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 25\n      }\n    }, \"currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 25\n      }\n    }, \"originalPrice\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 25\n      }\n    }, \"discountPercent\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 25\n      }\n    }, \"discountedPrice\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 25\n      }\n    }, \"availableQuantity\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 25\n      }\n    }, \"unit\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 25\n      }\n    }, \"feature list\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 25\n      }\n    }, \"size\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 25\n      }\n    }, \"color\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 25\n      }\n    }, \"tags\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 25\n      }\n    }, \"taxInclude\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 25\n      }\n    }, \"taxRate\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 25\n      }\n    }, \"featured\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 25\n      }\n    }, \"exclusive\"), this.state.fileDetails.failedRecords.map((data, index) => {\n      if (data.attributes) {\n        return Object.entries(data.attributes).map(([key, value], i) => {\n          return /*#__PURE__*/React.createElement(\"th\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 40\n            }\n          }, \"attribute \" + value.attributeName);\n        });\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 23\n      }\n    }, this.state.fileDetails.failedRecords ? this.state.fileDetails.failedRecords.map((data, index) => {\n      //console.log(data.featureList);\n      var featuresString = \"\";\n\n      if (data.featureList) {\n        var featuresArray = data.featureList.split(\"</li>\");\n        featuresArray.map((data, ind) => {\n          featuresString += data;\n        });\n      }\n\n      featuresString = featuresString.replace('<li>', '\\n');\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 29\n        }\n      }, data.remark ? data.remark : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 29\n        }\n      }, data.section ? data.section : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 29\n        }\n      }, data.category ? data.category : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 29\n        }\n      }, data.subCategory ? data.subCategory : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 29\n        }\n      }, data.brand ? data.brand : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 29\n        }\n      }, data.productCode ? data.productCode : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 29\n        }\n      }, data.itemCode ? data.itemCode : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 29\n        }\n      }, data.productName ? data.productName : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 29\n        }\n      }, data.productDetails ? data.productDetails : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 29\n        }\n      }, data.shortDescription ? data.shortDescription : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 29\n        }\n      }, data.currency ? data.currency : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 29\n        }\n      }, data.originalPrice ? data.originalPrice : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 29\n        }\n      }, data.discountPercent ? data.discountPercent : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 29\n        }\n      }, data.discountedPrice ? data.discountedPrice : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 29\n        }\n      }, data.availableQuantity ? data.availableQuantity : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 29\n        }\n      }, data.unit ? data.unit : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 29\n        }\n      }, data.featureList ? featuresString : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 29\n        }\n      }, data.size ? data.size : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 29\n        }\n      }, data.color ? data.color : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 29\n        }\n      }, data.tags ? data.tags.join(\",#\") : null), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 29\n        }\n      }, data.taxInclude ? \"yes\" : \"no\"), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 29\n        }\n      }, data.taxRate ? data.taxRate : 0), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 29\n        }\n      }, data.featured ? \"yes\" : \"no\"), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 29\n        }\n      }, data.exclusive ? \"yes\" : \"no\"), data.attributes ? data.attributes.map((attr, aind) => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 41\n          }\n        }, attr.attributeValue);\n      }) : null);\n    }) : null)))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"success\",\n      className: \"tab-pane fade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 19\n      }\n    }, \"Out of \", this.state.fileDetails.totalRecords, \" \", this.state.fileDetails.totalRecords > 1 ? \"records\" : \"record\", \",  \", this.state.fileDetails.goodrecords.length, \" \", this.state.fileDetails.goodrecords.length > 1 ? \"records are\" : \"record is\", \" added successfully. \\xA0\"), /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.goodDataCount,\n      tableData: this.state.tableData // getData={this.getData.bind(this)}\n      ,\n      tableObjects: this.state.tableObjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 23\n      }\n    })))) : null)));\n  }\n\n}\n\nexport default BulkUploadComponent;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/StoreManagement/product/productBulkUpload/component/BulkUploadComponent.js"],"names":["React","Component","XLSX","axios","Loader","$","Message","ReactHTMLTableToExcel","IAssureTable","BulkUploadComponent","constructor","props","state","tableData","failedRecordsTable","tableHeading","failedtableHeading","tableObjects","paginationApply","searchApply","deleteMethod","apiLink","editUrl","startRange","limitRange","fileInput","createRef","handleChange","bind","handleFile","componentWillReceiveProps","nextProps","e","files","target","fileName","name","ext","split","pop","setState","messageData","value","finalData","file","format","test","fileWarningError","show","reader","FileReader","rABS","readAsBinaryString","onload","result","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_json","header","documentObj","count","inputFileData","productCode","indexOf","j","length","record","attributeArray","previousRecord","undefined","k","hasOwnProperty","push","startsWith","console","log","trim","featuresArray","featuresString","map","ind","attributeName","replace","attributeValue","tempflag","requiredData","vendor","localStorage","getItem","hide","readAsArrayBuffer","isString","String","isNumber","isFinite","isDate","Date","isBoolean","isNull","isUndefined","isObject","Object","isArray","Array","bulkUpload","formValues","post","then","response","message","get","fileDetailUrl","fileDetails","failedRecordsCount","failedRecords","goodDataCount","goodrecords","a","i","remark","section","category","brand","productName","itemCode","originalPrice","currency","toLowerCase","toString","discountedPrice","size","color","catch","error","render","SheetJSFT","fileurl","el","display","totalRecords","overflowX","twoLevelHeader","index","attributes","entries","key","featureList","subCategory","productDetails","shortDescription","discountPercent","availableQuantity","unit","tags","join","taxInclude","taxRate","featured","exclusive","attr","aind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAA0C,OAAOC,IAAP,MAAiB,MAAjB,C,CAC1C;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,+CAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,OAAP,MAAoB,2CAApB;AACA,OAAOC,qBAAP,MAAkC,2BAAlC;AACA,OAAOC,YAAP,MAAmC,qDAAnC;;AAEA,MAAMC,mBAAN,SAAkCR,SAAlC,CAA2C;AAC3CS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACb,uBAAkB,EADL;AAEb,mBAAa,EAFA;AAGb,0BAAoB,KAHP;AAIbC,MAAAA,SAAS,EAAC,EAJG;AAKbC,MAAAA,kBAAkB,EAAC,EALN;AAMbC,MAAAA,YAAY,EAAE;AACV,mBAAoB,SADV;AAEV,oBAAoB,UAFV;AAGV,iBAAoB,OAHV;AAIV,uBAAoB,cAJV;AAKV,uBAAoB,cALV;AAMV,oBAAoB,WANV;AAOV,yBAAoB,gBAPV;AAQV,2BAAoB,kBARV;AASV,gBAAoB,MATV;AAUV,iBAAoB;AAVV,OAND;AAkBbC,MAAAA,kBAAkB,EAAE;AAChB,kBAAoB,QADJ;AAEhB,mBAAoB,SAFJ;AAGhB,oBAAoB,UAHJ;AAIhB,iBAAoB,OAJJ;AAKhB,uBAAoB,cALJ;AAMhB,uBAAoB,cANJ;AAOhB,oBAAoB,WAPJ;AAQhB,yBAAoB,gBARJ;AAShB,2BAAoB,kBATJ;AAUhB,gBAAoB,MAVJ;AAWhB,iBAAoB;AAXJ,OAlBP;AA+BbC,MAAAA,YAAY,EAAG;AACXC,QAAAA,eAAe,EAAG,KADP;AAEXC,QAAAA,WAAW,EAAO,KAFP;AAGXC,QAAAA,YAAY,EAAM,QAHP;AAIXC,QAAAA,OAAO,EAAW,eAJP;AAKXC,QAAAA,OAAO,EAAW;AALP,OA/BF;AAsCbC,MAAAA,UAAU,EAAG,CAtCA;AAuCbC,MAAAA,UAAU,EAAG;AAvCA,KAAb;AAyCA,SAAKC,SAAL,GAAiBzB,KAAK,CAAC0B,SAAN,EAAjB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,UAAL,GAAoB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAApB;AACD;;AACDE,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACrC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDC;;AACDJ,EAAAA,YAAY,CAACK,CAAD,EAAI;AACd,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB;;AACA,QAAIA,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAlB,EAAsB;AACpB,UAAIE,QAAQ,GAAGF,KAAK,CAAC,CAAD,CAAL,CAASG,IAAxB;AACA,UAAIC,GAAG,GAAGF,QAAQ,CAACG,KAAT,CAAe,GAAf,EAAoBC,GAApB,EAAV;;AACA,UAAIF,GAAG,KAAK,KAAR,IAAiBA,GAAG,KAAK,MAAzB,IAAmCA,GAAG,KAAK,KAA/C,EAAsD;AACnD,aAAKR,UAAL,CAAgBI,KAAK,CAAC,CAAD,CAArB;AACA,aAAKO,QAAL,CAAc;AAAEC,UAAAA,WAAW,EAAG;AAAhB,SAAd;AACF,OAHD,MAGK;AACH,aAAKhB,SAAL,CAAeiB,KAAf,GAAuB,EAAvB;AAEA,aAAKF,QAAL,CAAc;AACVG,UAAAA,SAAS,EAAE,EADD;AAEVF,UAAAA,WAAW,EAAG;AACZ,oBAAS,SADG;AAEZ,oBAAS,mBAFG;AAGZ,uBAAY,sBAHA;AAIZ,qBAAS,SAJG;AAKZ,2BAAgB;AALJ;AAFJ,SAAd;AAWD;AACF;AACF;;AAGDZ,EAAAA,UAAU,CAACe,IAAD,EAAO;AAEX;AACA,QAAIC,MAAM,GAAG,OAAb;;AAEA,QAAIA,MAAM,CAACC,IAAP,CAAYF,IAAI,CAACR,IAAjB,CAAJ,EAA4B;AACxB,WAAKI,QAAL,CAAc;AAAEO,QAAAA,gBAAgB,EAAE,IAApB;AAA0BJ,QAAAA,SAAS,EAAE;AAArC,OAAd;AAEH,KAHD,MAGO;AACLtC,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB2C,IAArB;AACE,WAAKR,QAAL,CAAc;AAAEO,QAAAA,gBAAgB,EAAE,KAApB;AAA2BJ,QAAAA,SAAS,EAAE,EAAtC;AAA2CR,QAAAA,QAAQ,EAAES,IAAI,CAACR;AAA1D,OAAd;AACA,YAAMa,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACA,YAAMC,IAAI,GAAG,CAAC,CAACF,MAAM,CAACG,kBAAtB;;AACAH,MAAAA,MAAM,CAACI,MAAP,GAAgB,CAAC;AAAEnB,QAAAA,MAAM,EAAE;AAAEoB,UAAAA;AAAF;AAAV,OAAD,KAA4B;AAExC,cAAMC,EAAE,GAAGrD,IAAI,CAACsD,IAAL,CAAUF,MAAV,EAAkB;AAAEG,UAAAA,IAAI,EAAEN,IAAI,GAAG,QAAH,GAAc;AAA1B,SAAlB,CAAX;AACA,cAAMO,MAAM,GAAGH,EAAE,CAACI,UAAH,CAAc,CAAd,CAAf;AAEA,cAAMC,EAAE,GAAGL,EAAE,CAACM,MAAH,CAAUH,MAAV,CAAX;AACA,cAAMI,IAAI,GAAG5D,IAAI,CAAC6D,KAAL,CAAWC,aAAX,CAAyBJ,EAAzB,EAA6B;AAAEK,UAAAA,MAAM,EAAE;AAAV,SAA7B,CAAb;AAEA,YAAIC,WAAW,GAAG,EAAlB;AACA,YAAIC,KAAK,GAAG,CAAZ;AACA,aAAK3B,QAAL,CAAc;AAAE4B,UAAAA,aAAa,EAAEN;AAAjB,SAAd,EAAuC,MAAM;AACzC;;;;;;;;;;AAWA,cAAIO,WAAW,GAAG,EAAlB;AAEAA,UAAAA,WAAW,GAAG,KAAKzD,KAAL,CAAWwD,aAAX,CAAyB,CAAzB,EAA4B,KAAKxD,KAAL,CAAWwD,aAAX,CAAyB,CAAzB,EAA4BE,OAA5B,CAAoC,aAApC,CAA5B,CAAd,CAdyC,CAezC;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,KAAK3D,KAAL,CAAWwD,aAAX,CAAyBI,MAA9C,EAAsDD,CAAC,EAAvD,EAA2D;AACvD,gBAAIE,MAAM,GAAG,KAAK7D,KAAL,CAAWwD,aAAX,CAAyBG,CAAzB,CAAb;AACA,gBAAIG,cAAc,GAAG,EAArB;;AACA,gBAAIH,CAAC,KAAK,CAAV,EAAa;AACT,kBAAII,cAAc,GAAG,KAAK/D,KAAL,CAAWwD,aAAX,CAAyBG,CAAzB,CAArB;AACH,aAFD,MAEO;AACH,kBAAII,cAAc,GAAG,KAAK/D,KAAL,CAAWwD,aAAX,CAAyBG,CAAC,GAAG,CAA7B,CAArB;AACH;;AAED,gBAAIN,MAAM,GAAG,KAAKrD,KAAL,CAAWwD,aAAX,CAAyB,CAAzB,CAAb;;AAEA,gBAAIK,MAAM,KAAKG,SAAf,EAA0B;AACtB,kBAAIC,CAAJ,CADsB,CAEtB;;AACA,mBAAKA,CAAL,IAAUZ,MAAV,EAAkB;AACd,oBAAI,CAACC,WAAW,CAACY,cAAZ,CAA2BX,KAA3B,CAAL,EAAwC;AACnCD,kBAAAA,WAAW,CAACa,IAAZ,CAAiB;AAAE,qBAACd,MAAM,CAACY,CAAD,CAAP,GAAaJ,MAAM,CAACI,CAAD;AAArB,mBAAjB;AACJ,iBAFD,MAEO;AACH,sBAAIZ,MAAM,CAACY,CAAD,CAAN,CAAUG,UAAV,CAAqB,cAArB,CAAJ,EAA0C;AACxCC,oBAAAA,OAAO,CAACC,GAAR,CAAY,YAAUL,CAAV,GAAY,IAAxB,EAA6BJ,MAAM,CAACI,CAAD,CAAnC;;AACE,wBAAI,OAAOJ,MAAM,CAACI,CAAD,CAAb,KAAqB,WAArB,IAAoCJ,MAAM,CAACI,CAAD,CAAN,CAAUM,IAAV,OAAqB,EAA7D,EAAiE;AAE7D,0BAAIC,aAAa,GAAGX,MAAM,CAACI,CAAD,CAAN,CAAUvC,KAAV,CAAgB,IAAhB,CAApB;AACA,0BAAI+C,cAAc,GAAG,EAArB;AAEAD,sBAAAA,aAAa,CAACE,GAAd,CAAkB,CAACxB,IAAD,EAAMyB,GAAN,KAAY;AAE1BF,wBAAAA,cAAc,IAAI,SAAOvB,IAAP,GAAY,OAA9B;AACH,uBAHD;AAKAI,sBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,aAAnB,IAAoCkB,cAApC;AACH;AACJ,mBAdD,MAeK,IAAIpB,MAAM,CAACY,CAAD,CAAN,CAAUG,UAAV,CAAqB,WAArB,CAAJ,EAAuC;AACxCC,oBAAAA,OAAO,CAACC,GAAR,CAAY,YAAUL,CAAV,GAAY,IAAxB,EAA6BJ,MAAM,CAACI,CAAD,CAAnC,EADwC,CAExC;;AACI,wBAAI,OAAOJ,MAAM,CAACI,CAAD,CAAb,KAAqB,WAAzB,EAAsC;AACtCH,sBAAAA,cAAc,CAACK,IAAf,CAAoB;AAACS,wBAAAA,aAAa,EAAEvB,MAAM,CAACY,CAAD,CAAN,CAAUY,OAAV,CAAkB,eAAlB,EAAmC,EAAnC,CAAhB;AAAwDC,wBAAAA,cAAc,EAAEjB,MAAM,CAACI,CAAD;AAA9E,uBAApB;AACAX,sBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,YAAnB,IAAmCO,cAAnC;AACH;AAEJ,mBARI,MASA,IAAIT,MAAM,CAACY,CAAD,CAAN,KAAc,MAAlB,EAA0B;AAC3B,wBAAIJ,MAAM,CAACI,CAAD,CAAN,KAAcD,SAAlB,EAA6B;AACzBV,sBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,MAAnB,IAA6BM,MAAM,CAACI,CAAD,CAAN,CAAUvC,KAAV,CAAgB,GAAhB,CAA7B;AACH;AACJ,mBAJI,MAKA,IAAI2B,MAAM,CAACY,CAAD,CAAN,KAAc,UAAd,IAA4BZ,MAAM,CAACY,CAAD,CAAN,KAAc,WAA1C,IACEZ,MAAM,CAACY,CAAD,CAAN,KAAc,YADhB,IACgCZ,MAAM,CAACY,CAAD,CAAN,KAAc,YAD9C,IAEEZ,MAAM,CAACY,CAAD,CAAN,KAAc,YAFpB,EAEkC;AAC/B,wBAAIc,QAAQ,GAAGlB,MAAM,CAACI,CAAD,CAAN,KAAc,KAAd,GAAsB,IAAtB,GAA6B,KAA5C;AACAX,oBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmBF,MAAM,CAACY,CAAD,CAAzB,IAAgCc,QAAhC;AACP,mBALI,MAMA;AACDzB,oBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmBF,MAAM,CAACY,CAAD,CAAzB,IAAgCJ,MAAM,CAACI,CAAD,CAAtC;AACH,mBAtCE,CAuCH;AACA;;;AACAX,kBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,UAAnB,IAAiCvB,IAAI,CAACR,IAAtC;AACA8B,kBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,QAAnB,IAA+B,KAAKxD,KAAL,CAAWiF,YAAX,CAAwBC,MAAvD;AACA3B,kBAAAA,WAAW,CAACC,KAAD,CAAX,CAAmB,WAAnB,IAAkC2B,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAlC;AACH;AACJ,eAnDqB,CAoDtB;;;AACA5B,cAAAA,KAAK;AACR;AACJ;;AAED,eAAK3B,QAAL,CAAc;AAAEG,YAAAA,SAAS,EAAEuB;AAAb,WAAd,EAA0C,MAAM;AAC5C;AACA7D,YAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB2F,IAArB;AACH,WAHD;AAIH,SAxFD;AAyFH,OAnGD;;AAoGA,UAAI7C,IAAJ,EAAUF,MAAM,CAACG,kBAAP,CAA0BR,IAA1B,EAAV,KACKK,MAAM,CAACgD,iBAAP,CAAyBrD,IAAzB,EA1GF,CA2GH;AAEH;AACJ,GAxPsC,CAyPzC;;;AACAsD,EAAAA,QAAQ,CAAExD,KAAF,EAAS;AACf,WAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYyD,MAArD;AACD,GA5PwC,CA6PzC;;;AACAC,EAAAA,QAAQ,CAAE1D,KAAF,EAAS;AACf,WAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6B2D,QAAQ,CAAC3D,KAAD,CAA5C;AACD,GAhQwC,CAiQzC;;;AACA4D,EAAAA,MAAM,CAAE5D,KAAF,EAAS;AACb,WAAOA,KAAK,YAAY6D,IAAxB;AACD,GApQwC,CAqQzC;;;AACAC,EAAAA,SAAS,CAAE9D,KAAF,EAAS;AAChB,WAAO,OAAOA,KAAP,KAAiB,SAAxB;AACD,GAxQwC,CAyQzC;;;AACA+D,EAAAA,MAAM,CAAE/D,KAAF,EAAS;AACb,WAAOA,KAAK,KAAK,IAAjB;AACD,GA5QwC,CA6QzC;;;AACAgE,EAAAA,WAAW,CAAEhE,KAAF,EAAS;AAClB,WAAO,OAAOA,KAAP,KAAiB,WAAxB;AACD,GAhRwC,CAiRzC;;;AACAiE,EAAAA,QAAQ,CAAEjE,KAAF,EAAS;AACf,WAAOA,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA1B,IAAsCA,KAAK,CAAChC,WAAN,KAAsBkG,MAAnE;AACD,GApRwC,CAsRzC;;;AACAC,EAAAA,OAAO,CAAEnE,KAAF,EAAS;AACd,WAAOA,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA1B,IAAsCA,KAAK,CAAChC,WAAN,KAAsBoG,KAAnE;AACD,GAzRwC,CA2RzC;AACA;;;AAEAC,EAAAA,UAAU,GAAG;AACP,QAAIC,UAAU,GAAG,KAAKpG,KAAL,CAAW+B,SAA5B;AACAtC,IAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB2C,IAArB;;AACA,QAAI,CAAC,KAAKpC,KAAL,CAAWmC,gBAAhB,EAAkC;AAC9B5C,MAAAA,KAAK,CAAC8G,IAAN,CAAW,sCAAX,EAAmDD,UAAnD,EACKE,IADL,CACWC,QAAD,IAAc;AAEhB;AACA,aAAK1F,SAAL,CAAeiB,KAAf,GAAuB,EAAvB;AACA,aAAKF,QAAL,CAAc;AACRG,UAAAA,SAAS,EAAE,EADH;AAERF,UAAAA,WAAW,EAAG;AACZ,oBAAS,SADG;AAEZ,oBAAS,mBAFG;AAGZ,uBAAY0E,QAAQ,CAACrD,IAAT,CAAcsD,OAHd;AAIZ,qBAAS,SAJG;AAKZ,2BAAgB;AALJ;AAFN,SAAd;AAWA/G,QAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB2C,IAArB;AACA7C,QAAAA,KAAK,CACAkH,GADL,CACS,KAAK1G,KAAL,CAAW2G,aAAX,GAAyB,KAAK1G,KAAL,CAAWuB,QAD7C,EAEK+E,IAFL,CAEWC,QAAD,IAAa;AACnB9G,UAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB2F,IAArB;;AACA,cAAImB,QAAJ,EAAc;AACZ,iBAAK3E,QAAL,CAAc;AACV+E,cAAAA,WAAW,EAACJ,QAAQ,CAACrD,IADX;AAEV0D,cAAAA,kBAAkB,EAAGL,QAAQ,CAACrD,IAAT,CAAc2D,aAAd,CAA4BjD,MAFvC;AAGVkD,cAAAA,aAAa,EAAGP,QAAQ,CAACrD,IAAT,CAAc6D,WAAd,CAA0BnD;AAHhC,aAAd;AAME,gBAAI3D,SAAS,GAAGsG,QAAQ,CAACrD,IAAT,CAAc6D,WAAd,CAA0BrC,GAA1B,CAA8B,CAACsC,CAAD,EAAIC,CAAJ,KAAQ;AACtD,qBAAM;AACF,0BAAkBD,CAAC,CAACE,MAAF,GAAkBF,CAAC,CAACE,MAApB,GAAgC,GADhD;AAEF,2BAAkBF,CAAC,CAACG,OAAF,GAAmBH,CAAC,CAACG,OAArB,GAAkC,GAFlD;AAGF,4BAAkBH,CAAC,CAACI,QAAF,GAAiBJ,CAAC,CAACI,QAAnB,GAA8B,GAH9C;AAIF,yBAAkBJ,CAAC,CAACK,KAAF,GAAcL,CAAC,CAACK,KAAhB,GAAwB,GAJxC;AAKF,+BAAkBL,CAAC,CAACM,WAAF,GAAoBN,CAAC,CAACM,WAAtB,GAAoC,GALpD;AAMF,+BAAkBN,CAAC,CAACvD,WAAF,GAAoBuD,CAAC,CAACvD,WAAtB,GAAoC,GANpD;AAOF,4BAAkBuD,CAAC,CAACO,QAAF,GAAiBP,CAAC,CAACO,QAAnB,GAA8B,GAP9C;AAQF,+BAAkBP,CAAC,CAACM,WAAF,GAAoBN,CAAC,CAACM,WAAtB,GAAoC,GARpD;AASF,iCAAkBN,CAAC,CAACQ,aAAF,GAAkB,qBAAmBR,CAAC,CAACS,QAAF,CAAWC,WAAX,EAAnB,GAA4C,SAA5C,GAAsDV,CAAC,CAACQ,aAAF,CAAgBG,QAAhB,EAAxE,GAAqG,GATrH;AAUF,mCAAoBX,CAAC,CAACY,eAAF,GAAoB,qBAAmBZ,CAAC,CAACS,QAAF,CAAWC,WAAX,EAAnB,GAA4C,SAA5C,GAAsDV,CAAC,CAACY,eAAF,CAAkBD,QAAlB,EAA1E,GAAyG,GAV3H;AAWF,wBAAWX,CAAC,CAACa,IAAF,GAAab,CAAC,CAACa,IAAf,GAAsB,GAX/B;AAYF,yBAAYb,CAAC,CAACc,KAAF,GAAcd,CAAC,CAACc,KAAhB,GAAwB;AAZlC,eAAN;AAcD,aAfiB,CAAhB;AAiBF,gBAAI5H,kBAAkB,GAAGqG,QAAQ,CAACrD,IAAT,CAAc2D,aAAd,CAA4BnC,GAA5B,CAAgC,CAACsC,CAAD,EAAIC,CAAJ,KAAQ;AACjE,qBAAM;AACF,0BAAkBD,CAAC,CAACE,MAAF,GAAkBF,CAAC,CAACE,MAApB,GAAgC,GADhD;AAEF,2BAAkBF,CAAC,CAACG,OAAF,GAAmBH,CAAC,CAACG,OAArB,GAAkC,GAFlD;AAGF,4BAAkBH,CAAC,CAACI,QAAF,GAAiBJ,CAAC,CAACI,QAAnB,GAA8B,GAH9C;AAIF,yBAAkBJ,CAAC,CAACK,KAAF,GAAcL,CAAC,CAACK,KAAhB,GAAwB,GAJxC;AAKF,+BAAkBL,CAAC,CAACM,WAAF,GAAoBN,CAAC,CAACM,WAAtB,GAAoC,GALpD;AAMF,+BAAkBN,CAAC,CAACvD,WAAF,GAAoBuD,CAAC,CAACvD,WAAtB,GAAoC,GANpD;AAOF,4BAAkBuD,CAAC,CAACO,QAAF,GAAiBP,CAAC,CAACO,QAAnB,GAA8B,GAP9C;AAQF,+BAAkBP,CAAC,CAACM,WAAF,GAAoBN,CAAC,CAACM,WAAtB,GAAoC,GARpD;AASF,iCAAkBN,CAAC,CAACQ,aAAF,GAAkB,qBAAmBR,CAAC,CAACS,QAAF,CAAWC,WAAX,EAAnB,GAA4C,SAA5C,GAAsDV,CAAC,CAACQ,aAAF,CAAgBG,QAAhB,EAAxE,GAAqG,GATrH;AAUF,mCAAoBX,CAAC,CAACY,eAAF,GAAoB,qBAAmBZ,CAAC,CAACS,QAAF,CAAWC,WAAX,EAAnB,GAA4C,SAA5C,GAAsDV,CAAC,CAACY,eAAF,CAAkBD,QAAlB,EAA1E,GAAyG,GAV3H;AAWF,wBAAkBX,CAAC,CAACa,IAAF,GAAab,CAAC,CAACa,IAAf,GAAsB,GAXtC;AAYF,yBAAkBb,CAAC,CAACc,KAAF,GAAcd,CAAC,CAACc,KAAhB,GAAwB;AAZxC,eAAN;AAcC,aAfwB,CAAzB;AAgBA,iBAAKlG,QAAL,CAAc;AACV3B,cAAAA,SAAS,EAAGA,SADF;AAEVC,cAAAA,kBAAkB,EAAGA;AAFX,aAAd;AAID;AACA,SAjDL,EAkDK6H,KAlDL,CAkDYC,KAAD,IAAU,CAEhB,CApDL;AAqDH,OAtEL,EAuEKD,KAvEL,CAuEYC,KAAD,IAAW;AACd3D,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB0D,KAArB;AACH,OAzEL;AA0EH;AACN;;AAGDC,EAAAA,MAAM,GAAG;AACP;AACC;AACD,UAAMC,SAAS,GAAG,CACd,MADc,EAEd,KAFc,EAGd,KAHc,CAAlB;AAKA,wBACA;AAAK,MAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEA,oBAAC,OAAD;AAAS,MAAA,WAAW,EAAE,KAAKlI,KAAL,CAAW6B,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAGE;AAAK,MAAA,SAAS,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,yDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,uDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAE,KAAK9B,KAAL,CAAWoI,OAApB;AAA6B,MAAA,QAAQ,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,GAAG,EAAC,4EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADF,CADF,eAME;AAAK,MAAA,SAAS,EAAC,2DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,yCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0EADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAHF,CADF,CANF,CADF,eAeE;AAAK,MAAA,SAAS,EAAC,yDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,GAAG,EAAEC,EAAE,IAAI,KAAKvH,SAAL,GAAiBuH,EAD9B;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,SAAS,EAAC,mDAHZ;AAIE,MAAA,MAAM,EAAEF,SAJV;AAKE,MAAA,QAAQ,EAAE,KAAKnH,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEG,KAAKf,KAAL,CAAWmC,gBAAX,gBACG;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAgC,MAAA,KAAK,EAAE;AAAE2F,QAAAA,KAAK,EAAE;AAAT,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2FADH,GAEK,IAJR,CARF,CAfF,EAgCM,KAAK9H,KAAL,CAAW+B,SAAX,CAAqB6B,MAArB,GAA8B,CAA9B,gBACI;AAAQ,MAAA,SAAS,EAAC,iIAAlB;AACI,MAAA,OAAO,EAAE,KAAKuC,UAAL,CAAgBnF,IAAhB,CAAqB,IAArB,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,gBAII;AAAQ,MAAA,SAAS,EAAC,+HAAlB;AACI,MAAA,QAAQ,MADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApCV,CAHF,eA8CE;AAAK,MAAA,SAAS,EAAC,wDAAf;AAAwE,MAAA,KAAK,EAAE;AAACqH,QAAAA,OAAO,EAAC;AAAT,OAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,SAAS,EAAC,uEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,KAAKrI,KAAL,CAAW2G,WAAX,gBACA;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AAAG,qBAAY,KAAf;AAAqB,MAAA,IAAI,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAvB,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAK;AAAG,qBAAY,KAAf;AAAqB,MAAA,IAAI,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAL,CAFF,CADF,eAKE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO,KAAK3G,KAAL,CAAWuB,QAAlB,CAAd,CADA,eAEE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAkB,MAAA,SAAS,EAAC,yBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ,KAAKvB,KAAL,CAAW2G,WAAX,CAAuB2B,YAD/B,OAC+C,KAAKtI,KAAL,CAAW2G,WAAX,CAAuB2B,YAAvB,GAAsC,CAAtC,GAA0C,SAA1C,GAAsD,QADrG,aAGC,KAAKtI,KAAL,CAAW2G,WAAX,CAAuBE,aAAvB,CAAqCjD,MAHtC,WAGmD,KAAK5D,KAAL,CAAW2G,WAAX,CAAuBE,aAAvB,CAAqCjD,MAArC,GAA8C,CAA9C,GAAkD,eAAlD,GAAoE,aAHvH,WADA,eAME;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEC,oBAAC,qBAAD;AACG,MAAA,EAAE,EAAC,uBADN;AAEG,MAAA,SAAS,EAAC,2BAFb;AAGG,MAAA,KAAK,EAAC,cAHT;AAIG,MAAA,QAAQ,EAAC,UAJZ;AAKG,MAAA,KAAK,EAAC,UALT;AAMG,MAAA,UAAU,EAAC,iBANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CANF,eAiBI;AAAK,MAAA,KAAK,EAAE;AAAC2E,QAAAA,SAAS,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA,oBAAC,YAAD;AACE,MAAA,YAAY,EAAE,KAAKvI,KAAL,CAAWI,kBAD3B;AAEE,MAAA,cAAc,EAAE,KAAKJ,KAAL,CAAWwI,cAF7B;AAGE,MAAA,SAAS,EAAE,KAAKxI,KAAL,CAAW4G,kBAHxB;AAIE,MAAA,SAAS,EAAE,KAAK5G,KAAL,CAAWE,kBAJxB,CAKE;AALF;AAME,MAAA,YAAY,EAAE,KAAKF,KAAL,CAAWK,YAN3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAYA;AAAO,MAAA,SAAS,EAAC,OAAjB;AAAyB,MAAA,KAAK,EAAC,KAA/B;AAAqC,MAAA,EAAE,EAAC,cAAxC;AAAuD,MAAA,KAAK,EAAE;AAACgI,QAAAA,OAAO,EAAC;AAAT,OAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANA,eAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPA,eAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBARA,eASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBATA,eAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAVA,eAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXA,eAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAZA,eAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAbA,eAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAdA,eAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAfA,eAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBA,eAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAjBA,eAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBA,eAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAnBA,eAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cApBA,eAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBArBA,eAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAtBA,eAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvBA,eAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAxBA,EA0BE,KAAKrI,KAAL,CAAW2G,WAAX,CAAuBE,aAAvB,CAAqCnC,GAArC,CAAyC,CAACxB,IAAD,EAAMuF,KAAN,KAAc;AACrD,UAAIvF,IAAI,CAACwF,UAAT,EAAqB;AACrB,eACE1C,MAAM,CAAC2C,OAAP,CAAezF,IAAI,CAACwF,UAApB,EAAgChE,GAAhC,CAAoC,CAAC,CAACkE,GAAD,EAAM9G,KAAN,CAAD,EAAemF,CAAf,KAAoB;AACtD,8BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAK,eAAcnF,KAAK,CAAC8C,aAAzB,CAAP;AACD,SAFD,CADF;AAKC;AACF,KARD,CA1BF,CADF,CADF,eAwCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,KAAK5E,KAAL,CAAW2G,WAAX,CAAuBE,aAAvB,GACA,KAAK7G,KAAL,CAAW2G,WAAX,CAAuBE,aAAvB,CAAqCnC,GAArC,CAAyC,CAACxB,IAAD,EAAMuF,KAAN,KAAc;AACrD;AACA,UAAIhE,cAAc,GAAG,EAArB;;AAEA,UAAIvB,IAAI,CAAC2F,WAAT,EAAsB;AACpB,YAAIrE,aAAa,GAAGtB,IAAI,CAAC2F,WAAL,CAAiBnH,KAAjB,CAAuB,OAAvB,CAApB;AACA8C,QAAAA,aAAa,CAACE,GAAd,CAAkB,CAACxB,IAAD,EAAMyB,GAAN,KAAY;AAC1BF,UAAAA,cAAc,IAAIvB,IAAlB;AACH,SAFD;AAGD;;AACDuB,MAAAA,cAAc,GAAGA,cAAc,CAACI,OAAf,CAAuB,MAAvB,EAA+B,IAA/B,CAAjB;AACA,0BACE;AAAI,QAAA,GAAG,EAAE4D,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKvF,IAAI,CAACgE,MAAL,GAAchE,IAAI,CAACgE,MAAnB,GAA4B,IAAjC,CADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKhE,IAAI,CAACiE,OAAL,GAAejE,IAAI,CAACiE,OAApB,GAA8B,IAAnC,CAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKjE,IAAI,CAACkE,QAAL,GAAgBlE,IAAI,CAACkE,QAArB,GAAgC,IAArC,CAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKlE,IAAI,CAAC4F,WAAL,GAAmB5F,IAAI,CAAC4F,WAAxB,GAAsC,IAA3C,CAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK5F,IAAI,CAACmE,KAAL,GAAanE,IAAI,CAACmE,KAAlB,GAA0B,IAA/B,CALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKnE,IAAI,CAACO,WAAL,GAAmBP,IAAI,CAACO,WAAxB,GAAsC,IAA3C,CANA,eAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKP,IAAI,CAACqE,QAAL,GAAgBrE,IAAI,CAACqE,QAArB,GAAgC,IAArC,CAPA,eAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKrE,IAAI,CAACoE,WAAL,GAAmBpE,IAAI,CAACoE,WAAxB,GAAsC,IAA3C,CARA,eASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKpE,IAAI,CAAC6F,cAAL,GAAsB7F,IAAI,CAAC6F,cAA3B,GAA4C,IAAjD,CATA,eAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK7F,IAAI,CAAC8F,gBAAL,GAAwB9F,IAAI,CAAC8F,gBAA7B,GAAgD,IAArD,CAVA,eAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK9F,IAAI,CAACuE,QAAL,GAAgBvE,IAAI,CAACuE,QAArB,GAAgC,IAArC,CAXA,eAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKvE,IAAI,CAACsE,aAAL,GAAqBtE,IAAI,CAACsE,aAA1B,GAA0C,IAA/C,CAZA,eAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKtE,IAAI,CAAC+F,eAAL,GAAuB/F,IAAI,CAAC+F,eAA5B,GAA8C,IAAnD,CAbA,eAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK/F,IAAI,CAAC0E,eAAL,GAAuB1E,IAAI,CAAC0E,eAA5B,GAA8C,IAAnD,CAdA,eAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK1E,IAAI,CAACgG,iBAAL,GAAyBhG,IAAI,CAACgG,iBAA9B,GAAkD,IAAvD,CAfA,eAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKhG,IAAI,CAACiG,IAAL,GAAYjG,IAAI,CAACiG,IAAjB,GAAwB,IAA7B,CAhBA,eAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKjG,IAAI,CAAC2F,WAAL,GAAmBpE,cAAnB,GAAoC,IAAzC,CAjBA,eAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKvB,IAAI,CAAC2E,IAAL,GAAY3E,IAAI,CAAC2E,IAAjB,GAAwB,IAA7B,CAlBA,eAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK3E,IAAI,CAAC4E,KAAL,GAAa5E,IAAI,CAAC4E,KAAlB,GAA0B,IAA/B,CAnBA,eAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK5E,IAAI,CAACkG,IAAL,GAAYlG,IAAI,CAACkG,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ,GAAmC,IAAxC,CApBA,eAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKnG,IAAI,CAACoG,UAAL,GAAkB,KAAlB,GAA0B,IAA/B,CArBA,eAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKpG,IAAI,CAACqG,OAAL,GAAerG,IAAI,CAACqG,OAApB,GAA8B,CAAnC,CAtBA,eAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKrG,IAAI,CAACsG,QAAL,GAAgB,KAAhB,GAAwB,IAA7B,CAvBA,eAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKtG,IAAI,CAACuG,SAAL,GAAiB,KAAjB,GAAyB,IAA9B,CAxBA,EA0BEvG,IAAI,CAACwF,UAAL,GACAxF,IAAI,CAACwF,UAAL,CAAgBhE,GAAhB,CAAoB,CAACgF,IAAD,EAAMC,IAAN,KAAa;AAC9B,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,IAAI,CAAC5E,cAAV,CAAP;AACF,OAFD,CADA,GAGK,IA7BP,CADF;AAkCD,KA7CD,CADA,GA+CE,IAjDJ,CAxCF,CAZA,CAjBJ,CAFF,eA+HE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAkB,MAAA,SAAS,EAAC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ,KAAK9E,KAAL,CAAW2G,WAAX,CAAuB2B,YAD/B,OAC8C,KAAKtI,KAAL,CAAW2G,WAAX,CAAuB2B,YAAvB,GAAsC,CAAtC,GAA0C,SAA1C,GAAsD,QADpG,SACiH,KAAKtI,KAAL,CAAW2G,WAAX,CAAuBI,WAAvB,CAAmCnD,MADpJ,OAC6J,KAAK5D,KAAL,CAAW2G,WAAX,CAAuBI,WAAvB,CAAmCnD,MAAnC,GAA4C,CAA5C,GAAgD,aAAhD,GAAgE,WAD7N,8BADF,eAKM,oBAAC,YAAD;AACA,MAAA,YAAY,EAAE,KAAK5D,KAAL,CAAWG,YADzB;AAEA,MAAA,cAAc,EAAE,KAAKH,KAAL,CAAWwI,cAF3B;AAGA,MAAA,SAAS,EAAE,KAAKxI,KAAL,CAAW8G,aAHtB;AAIA,MAAA,SAAS,EAAE,KAAK9G,KAAL,CAAWC,SAJtB,CAKA;AALA;AAMA,MAAA,YAAY,EAAE,KAAKD,KAAL,CAAWK,YANzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALN,CA/HF,CALF,CADA,GAqLE,IAvLN,CAFF,CA9CF,CADA;AA+OD;;AAvmBwC;;AAymB3C,eAAeR,mBAAf","sourcesContent":["import React, { Component } from 'react'; import XLSX from \"xlsx\";\n//import './BulkUpload.css';\nimport axios from 'axios';\nimport Loader from '../../../../coreadmin/common/Loader/Loader.js';\nimport $ from 'jquery';\nimport Message from '../../../../storeAdmin/message/Message.js';\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\nimport IAssureTable           from \"../../../../coreadmin/IAssureTable/IAssureTable.jsx\";\n\nclass BulkUploadComponent extends Component{\nconstructor(props) {\n    super(props);\n    this.state = {\n    \"inputFileData\" : [],\n    \"finalData\": [],\n    \"fileWarningError\": false,\n    tableData:[],\n    failedRecordsTable:[],\n    tableHeading :{\n        \"section\"         : 'Section',\n        \"category\"        : 'Category',\n        \"brand\"           : 'Brand',\n        \"productName\"     : 'Product Name',\n        \"productCode\"     : 'Product Code',\n        \"itemCode\"        : 'Item Code',\n        \"originalPrice\"   : 'Original Price', \n        \"discountedPrice\" : 'Discounted Price', \n        \"size\"            : 'Size', \n        \"color\"           : 'Color',  \n    },\n    failedtableHeading :{\n        \"remark\"          : 'Remark',\n        \"section\"         : 'Section',\n        \"category\"        : 'Category',\n        \"brand\"           : 'Brand',\n        \"productName\"     : 'Product Name',\n        \"productCode\"     : 'Product Code',\n        \"itemCode\"        : 'Item Code',\n        \"originalPrice\"   : 'Original Price', \n        \"discountedPrice\" : 'Discounted Price', \n        \"size\"            : 'Size', \n        \"color\"           : 'Color',  \n    },\n    tableObjects : {\n        paginationApply : false,\n        searchApply     : false,\n        deleteMethod    : 'delete',\n        apiLink         : '/api/products',\n        editUrl         : '/add-product/'\n    },\n    startRange : 0,\n    limitRange : 10\n    }\n    this.fileInput = React.createRef();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFile   = this.handleFile.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n  /*axios\n        .get(this.props.fileDetailUrl+\"products.xlsx\")\n        .then((response)=> {\n        if (response) {\n          this.setState({\n                            fileDetails:response.data,\n                            failedRecordsCount : response.data.failedRecords.length,\n                            goodDataCount : response.data.goodrecords.length\n                        });\n\n                          var tableData = response.data.goodrecords.map((a, i)=>{\n                          return{\n                              \"remark\"        : a.remark        ? a.remark    : '-',\n                              \"section\"       : a.section        ? a.section    : '-',\n                              \"category\"      : a.category     ? a.category : '-',\n                              \"brand\"         : a.brand     ? a.brand : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"productCode\"   : a.productCode     ? a.productCode : '-',\n                              \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                              \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-', \n                              \"size\"   : a.size     ? a.size : '-', \n                              \"color\"   : a.color     ? a.color : '-'\n                          }\n                        })\n\n                        var failedRecordsTable = response.data.failedRecords.map((a, i)=>{\n                        return{ \n                            \"remark\"        : a.remark        ? a.remark    : '-',\n                            \"section\"       : a.section        ? a.section    : '-',\n                            \"category\"      : a.category     ? a.category : '-',\n                            \"brand\"         : a.brand     ? a.brand : '-',\n                            \"productName\"   : a.productName     ? a.productName : '-',\n                            \"productCode\"   : a.productCode     ? a.productCode : '-',\n                            \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                            \"productName\"   : a.productName     ? a.productName : '-',\n                            \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                            \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-',\n                            \"size\"          : a.size     ? a.size : '-', \n                            \"color\"         : a.color     ? a.color : '-',\n                        }\n                        })\n                        this.setState({\n                            tableData : tableData,\n                            failedRecordsTable : failedRecordsTable\n                        })\n        }\n        })\n        .catch((error)=> { \n              \n        })   \n       */\n  }\n  handleChange(e) {\n    const files = e.target.files;\n    if (files && files[0]){\n      var fileName = files[0].name;\n      var ext = fileName.split('.').pop();\n      if (ext === 'csv' || ext === 'xlsx' || ext === 'xls') {\n         this.handleFile(files[0]);\n         this.setState({ messageData : {} })\n      }else{\n        this.fileInput.value = '';\n\n        this.setState({\n            finalData: [],\n            messageData : {\n              \"type\" : \"outpage\",\n              \"icon\" : \"fa fa-exclamation\",\n              \"message\" : \"Invalid file format.\",\n              \"class\": \"warning\",\n              \"autoDismiss\" : true\n            }\n        })\n        \n      }\n    }\n  }\n  \n\n  handleFile(file) {\n            \n        // var format = /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,<>/?]/;\n        var format = /^\\s*$/;\n\n        if (format.test(file.name)) {\n            this.setState({ fileWarningError: true, finalData: [] });\n\n        } else {\n          $('.fullpageLoader').show();\n            this.setState({ fileWarningError: false, finalData: [],  fileName: file.name});\n            const reader = new FileReader();\n            const rABS = !!reader.readAsBinaryString;\n            reader.onload = ({ target: { result } }) => {\n\n                const wb = XLSX.read(result, { type: rABS ? \"binary\" : \"array\" });\n                const wsname = wb.SheetNames[0];\n\n                const ws = wb.Sheets[wsname];\n                const data = XLSX.utils.sheet_to_json(ws, { header: 1 });\n\n                var documentObj = [];\n                let count = 0;\n                this.setState({ inputFileData: data }, () => {\n                    /*var productCodeArray = [];\n                    for (var j=1; j <= this.state.inputFileData.length; j++){\n                    var record = this.state.inputFileData[j];\n                    let header = this.state.inputFileData[0];\n                    if (record !== undefined) {\n                    productCodeArray.push(record[header.indexOf('productCode')]);\n                    }\n                    } \n                    productCodeArray = productCodeArray.filter((item, i, ar) => ar.indexOf(item) === i);\n                    console.log('productCodeArray',productCodeArray)*/\n\n                    var productCode = '';\n\n                    productCode = this.state.inputFileData[1][this.state.inputFileData[0].indexOf('productCode')];\n                    // loop on all the records in sheet\n                    for (var j = 1; j <= this.state.inputFileData.length; j++) {\n                        var record = this.state.inputFileData[j];\n                        var attributeArray = [];\n                        if (j === 1) {\n                            var previousRecord = this.state.inputFileData[j];\n                        } else {\n                            var previousRecord = this.state.inputFileData[j - 1];\n                        }\n\n                        let header = this.state.inputFileData[0];\n\n                        if (record !== undefined) {\n                            var k;\n                            // loop on header columns\n                            for (k in header) {\n                                if (!documentObj.hasOwnProperty(count)) {\n                                     documentObj.push({ [header[k]]: record[k] });\n                                } else {\n                                    if (header[k].startsWith(\"feature list\")) {\n                                      console.log(\"record[\"+k+\"]:\",record[k]);\n                                        if (typeof record[k] !== 'undefined' && record[k].trim() !== '') {\n\n                                            var featuresArray = record[k].split(\"\\n\")\n                                            var featuresString = \"\";\n\n                                            featuresArray.map((data,ind)=>{\n                                                 \n                                                featuresString += \"<li>\"+data+\"</li>\"\n                                            })\n                                            \n                                            documentObj[count]['featureList'] = featuresString;\n                                        }\n                                    }\n                                    else if (header[k].startsWith(\"attribute\")) {\n                                        console.log(\"record[\"+k+\"]:\",record[k]);\n                                        // if (typeof record[k] !== 'undefined' && record[k].trim() !== '') {\n                                            if (typeof record[k] !== 'undefined') {\n                                            attributeArray.push({attributeName: header[k].replace(/^attribute +/i, ''), attributeValue: record[k]})\n                                            documentObj[count]['attributes'] = attributeArray;\n                                        }\n                                        \n                                    }\n                                    else if (header[k] === 'tags') {\n                                        if (record[k] !== undefined) {\n                                            documentObj[count]['tags'] = record[k].split(',');\n                                        }\n                                    }\n                                    else if (header[k] === 'featured' || header[k] === 'exclusive'\n                                            || header[k] === 'newProduct' || header[k] === 'bestSeller'\n                                            || header[k] === 'taxInclude') {\n                                            var tempflag = record[k] === 'yes' ? true : false\n                                            documentObj[count][header[k]] = tempflag;\n                                    }\n                                    else {\n                                        documentObj[count][header[k]] = record[k];\n                                    }\n                                    // console.log(\" requireddata vendor props:\",this.props.requiredData.vendor);\n                                    // console.log(\"localStorage.getItem('admin_ID'):\",localStorage.getItem('admin_ID'));\n                                    documentObj[count]['filename'] = file.name;\n                                    documentObj[count]['vendor'] = this.props.requiredData.vendor;\n                                    documentObj[count]['createdBy'] = localStorage.getItem('admin_ID');\n                                }\n                            }\n                            //attributeArray = [];\n                            count++;\n                        }\n                    }\n\n                    this.setState({ finalData: documentObj }, () => {\n                        // console.log(\"final data:\",this.state.finalData);\n                        $('.fullpageLoader').hide()\n                    });\n                });\n            };\n            if (rABS) reader.readAsBinaryString(file);\n            else reader.readAsArrayBuffer(file);\n            //$('.submitBtn').prop('disabled',false);\n\n        }\n    }\n  // Returns if a value is a string\n  isString (value) {\n    return typeof value === 'string' || value instanceof String;\n  }\n  // Returns if a value is really a number\n  isNumber (value) {\n    return typeof value === 'number' && isFinite(value);\n  }\n  // Returns if value is a date object\n  isDate (value) {\n    return value instanceof Date;\n  }\n  // Returns if a value is a boolean\n  isBoolean (value) {\n    return typeof value === 'boolean';\n  }\n  // Returns if a value is null\n  isNull (value) {\n    return value === null;\n  }\n  // Returns if a value is undefined\n  isUndefined (value) {\n    return typeof value === 'undefined';\n  }\n  // Returns if a value is an object\n  isObject (value) {\n    return value && typeof value === 'object' && value.constructor === Object;\n  }\n\n  // Returns if a value is an array\n  isArray (value) {\n    return value && typeof value === 'object' && value.constructor === Array;\n  }\n\n  // ES5 actually has a method for this (ie9+)\n  //Array.isArray(value);\n\n  bulkUpload() {\n        var formValues = this.state.finalData;\n        $('.fullpageLoader').show();\n        if (!this.state.fileWarningError) {\n            axios.post('/api/products/post/bulkUploadProduct', formValues)\n                .then((response) => {\n                    \n                    // console.log(\"response.data.message\",response.data.message);\n                    this.fileInput.value = '';\n                    this.setState({\n                          finalData: [],\n                          messageData : {\n                            \"type\" : \"outpage\",\n                            \"icon\" : \"fa fa-exclamation\",\n                            \"message\" : response.data.message,\n                            \"class\": \"warning\",\n                            \"autoDismiss\" : false\n                          }\n                    })\n                    \n                    $('.filedetailsDiv').show()\n                    axios\n                        .get(this.props.fileDetailUrl+this.state.fileName)\n                        .then((response)=> {\n                        $('.fullpageLoader').hide();  \n                        if (response) {\n                          this.setState({\n                              fileDetails:response.data,\n                              failedRecordsCount : response.data.failedRecords.length,\n                              goodDataCount : response.data.goodrecords.length\n                          });\n\n                            var tableData = response.data.goodrecords.map((a, i)=>{\n                            return{\n                                \"remark\"        : a.remark        ? a.remark    : '-',\n                                \"section\"       : a.section        ? a.section    : '-',\n                                \"category\"      : a.category     ? a.category : '-',\n                                \"brand\"         : a.brand     ? a.brand : '-',\n                                \"productName\"   : a.productName     ? a.productName : '-',\n                                \"productCode\"   : a.productCode     ? a.productCode : '-',\n                                \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                                \"productName\"   : a.productName     ? a.productName : '-',\n                                \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                                \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-', \n                                \"size\"   : a.size     ? a.size : '-', \n                                \"color\"   : a.color     ? a.color : '-'\n                            }\n                          })\n\n                          var failedRecordsTable = response.data.failedRecords.map((a, i)=>{\n                          return{\n                              \"remark\"        : a.remark        ? a.remark    : '-',\n                              \"section\"       : a.section        ? a.section    : '-',\n                              \"category\"      : a.category     ? a.category : '-',\n                              \"brand\"         : a.brand     ? a.brand : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"productCode\"   : a.productCode     ? a.productCode : '-',\n                              \"itemCode\"      : a.itemCode     ? a.itemCode : '-',\n                              \"productName\"   : a.productName     ? a.productName : '-',\n                              \"originalPrice\" : a.originalPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.originalPrice.toString() : '-',\n                              \"discountedPrice\" : a.discountedPrice ? \"<i class='fa fa-\"+a.currency.toLowerCase()+\"'></i> \"+a.discountedPrice.toString() : '-',\n                              \"size\"          : a.size     ? a.size : '-', \n                              \"color\"         : a.color     ? a.color : '-',\n                          }\n                          })\n                          this.setState({\n                              tableData : tableData,\n                              failedRecordsTable : failedRecordsTable\n                          })\n                        }\n                        })\n                        .catch((error)=> { \n                              \n                        })    \n                })\n                .catch((error) => {\n                    console.log('error', error);\n                })\n        }\n  }\n\n\n  render() {\n    //console.log('tableData',this.state.tableData)  \n     // console.log(\"===->\",this.state.finalData)\n    const SheetJSFT = [\n        \"xlsx\",\n        \"xls\",\n        \"csv\"\n      ]\n    return (\n    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n    <Loader type=\"fullpageLoader\" />\n    <Message messageData={this.state.messageData} />\n      <div className=\"mt\">\n        <div className=\"col-lg-6 col-md-6 col-sm-6 col-xs-6 bulkEmployeeContent\">\n          <div className=\"col-lg-2 col-md-2 col-sm-12 col-xs-12 bulkEmployeeImg\">\n            <a href={this.props.fileurl} download>\n            <img src=\"https://s3.ap-south-1.amazonaws.com/assureidportal/websiteImgs/filecsv.png\" />\n            </a>\n          </div>\n          <div className=\"col-lg-10 col-md-10 col-sm-12 col-xs-12 bulkEmployeeVerif\">\n            <ul className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n              <li>Please use attached file format for bulkupload into this system.</li>\n              <li>Please do not change the column header of following file.</li>\n              <li>File format must be .csv or .xlsx or .xls.</li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"col-lg-5 col-md-5 col-sm-5 col-xs-5 bulkuploadFileouter\">\n          <input\n            ref={el => this.fileInput = el}\n            type=\"file\"\n            className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\"\n            accept={SheetJSFT}\n            onChange={this.handleChange}\n          />\n          <div className=\"upldProdFileInstPre\">\n            <br />\n            {this.state.fileWarningError ?\n                <p className=\"fileWarningError\" style={{ color: \"red\" }}>Filename should be proper. It should not contain any special character and spaces</p>\n                : null}\n        </div>\n        \n        </div>\n        {\n            this.state.finalData.length > 0 ?\n                <button className=\"submitBtnGo btn btnSubmit col-lg-2 col-lg-offset-10 col-md-2 col-md-offset-10 col-sm-3 col-sm-offset-9 col-xs-3 col-xs-offset-9\"\n                    onClick={this.bulkUpload.bind(this)} >Submit</button>\n                :\n                <button className=\"submitBtn btn btnSubmit col-lg-2 col-lg-offset-10 col-md-2 col-md-offset-10 col-sm-3 col-sm-offset-9 col-xs-3 col-xs-offset-9\"\n                    disabled>Submit</button>\n\n        }\n      </div>  \n        \n\n      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 filedetailsDiv\" style={{display:\"none\"}}>\n        <br/>\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 bulkEmployeeContent NoPadding\">\n          {\n            this.state.fileDetails ?\n            <div className=\"\">\n              <ul className=\"nav nav-tabs\">\n                <li className=\"active\"><a data-toggle=\"tab\" href=\"#failure\">Failure</a></li>\n                <li ><a data-toggle=\"tab\" href=\"#success\">Success</a></li>\n              </ul>\n              <div className=\"tab-content\">\n              <h5>Filename: <span>{this.state.fileName}</span></h5>\n                <div id=\"failure\" className=\"tab-pane fade in active\">\n                <h5>\n                Out of {this.state.fileDetails.totalRecords } {this.state.fileDetails.totalRecords > 1 ? \"records\" : \"record\"},  &nbsp;\n\n                {this.state.fileDetails.failedRecords.length} bad {this.state.fileDetails.failedRecords.length > 1 ? \"records were \" : \"record was \" }found.\n                </h5>\n                  <div className=\"text-right\">\n                  <br/>\n                   <ReactHTMLTableToExcel\n                      id=\"test-table-xls-button\"\n                      className=\"download-table-xls-button\"\n                      table=\"table-to-xls\"\n                      filename=\"tablexls\"\n                      sheet=\"tablexls\"\n                      buttonText=\"Download as XLS\"/>\n                      <br/>\n                    </div>  \n                    <div style={{overflowX: \"auto\"}}>\n\n                    <IAssureTable \n                      tableHeading={this.state.failedtableHeading}\n                      twoLevelHeader={this.state.twoLevelHeader} \n                      dataCount={this.state.failedRecordsCount}\n                      tableData={this.state.failedRecordsTable}\n                      //getData={this.getData.bind(this)}\n                      tableObjects={this.state.tableObjects}\n                      />\n\n\n                    <table className=\"table\" width=\"50%\" id=\"table-to-xls\" style={{display:\"none\"}}>\n                      <thead>\n                        <tr>\n                        <th>Remark</th>\n                        <th>section</th>\n                        <th>category</th>\n                        <th>subCategory</th>\n                        <th>brand</th>\n                        <th>productCode</th>\n                        <th>itemCode</th>\n                        <th>productName</th>\n                        <th>productDetails</th>\n                        <th>shortDescription</th>\n                        <th>currency</th>\n                        <th>originalPrice</th>\n                        <th>discountPercent</th>\n                        <th>discountedPrice</th>\n                        <th>availableQuantity</th>\n                        <th>unit</th>\n                        <th>feature list</th>\n                        <th>size</th>\n                        <th>color</th>\n                        <th>tags</th>\n                        <th>taxInclude</th>\n                        <th>taxRate</th>\n                        <th>featured</th>\n                        <th>exclusive</th>\n                        {\n                          this.state.fileDetails.failedRecords.map((data,index)=>{\n                            if (data.attributes) {\n                            return (\n                              Object.entries(data.attributes).map(([key, value], i)=> {\n                                return(<th>{\"attribute \"+ value.attributeName}</th>);\n                              })\n                              );\n                            }\n                          })\n                        }\n                        </tr>\n                      </thead>\n                      <tbody>\n                      {\n                        this.state.fileDetails.failedRecords ? \n                        this.state.fileDetails.failedRecords.map((data,index)=>{\n                          //console.log(data.featureList);\n                          var featuresString = \"\";  \n\n                          if (data.featureList) {\n                            var featuresArray = data.featureList.split(\"</li>\")\n                            featuresArray.map((data,ind)=>{\n                                featuresString += data\n                            })\n                          }\n                          featuresString = featuresString.replace('<li>', '\\n');\n                          return(\n                            <tr key={index}>\n                            <td>{data.remark ? data.remark : null}</td>\n                            <td>{data.section ? data.section : null}</td>\n                            <td>{data.category ? data.category : null}</td>\n                            <td>{data.subCategory ? data.subCategory : null}</td>\n                            <td>{data.brand ? data.brand : null}</td>\n                            <td>{data.productCode ? data.productCode : null}</td>\n                            <td>{data.itemCode ? data.itemCode : null}</td>\n                            <td>{data.productName ? data.productName : null}</td>\n                            <td>{data.productDetails ? data.productDetails : null}</td>\n                            <td>{data.shortDescription ? data.shortDescription : null}</td>\n                            <td>{data.currency ? data.currency : null}</td>\n                            <td>{data.originalPrice ? data.originalPrice : null}</td>\n                            <td>{data.discountPercent ? data.discountPercent : null}</td>\n                            <td>{data.discountedPrice ? data.discountedPrice : null}</td>\n                            <td>{data.availableQuantity ? data.availableQuantity : null}</td>\n                            <td>{data.unit ? data.unit : null}</td>\n                            <td>{data.featureList ? featuresString : null}</td>\n                            <td>{data.size ? data.size : null}</td>\n                            <td>{data.color ? data.color : null}</td>\n                            <td>{data.tags ? data.tags.join(\",#\") : null}</td>\n                            <td>{data.taxInclude ? \"yes\" : \"no\"}</td>\n                            <td>{data.taxRate ? data.taxRate : 0}</td>\n                            <td>{data.featured ? \"yes\" : \"no\"}</td>\n                            <td>{data.exclusive ? \"yes\" : \"no\"}</td>\n                            {\n                              data.attributes ?\n                              data.attributes.map((attr,aind)=>{\n                                 return(<td>{attr.attributeValue}</td>)\n                              }) : null\n                            }\n                          </tr>\n                          );\n                        }) \n                        : null\n                      }\n                      </tbody>\n                    </table>\n                    </div>\n\n                  </div>\n                <div id=\"success\" className=\"tab-pane fade\">\n                  <h5>\n                  Out of {this.state.fileDetails.totalRecords} {this.state.fileDetails.totalRecords > 1 ? \"records\" : \"record\"},  {this.state.fileDetails.goodrecords.length} {this.state.fileDetails.goodrecords.length > 1 ? \"records are\" : \"record is\" } added successfully. &nbsp;\n                    \n                  </h5>\n                      <IAssureTable \n                      tableHeading={this.state.tableHeading}\n                      twoLevelHeader={this.state.twoLevelHeader} \n                      dataCount={this.state.goodDataCount}\n                      tableData={this.state.tableData}\n                      // getData={this.getData.bind(this)}\n                      tableObjects={this.state.tableObjects}\n                      />\n                  {\n                  /*<table className=\"table\" width=\"50%\" id=\"table-to-xls\">\n                    <thead>\n                      <tr>\n                      {\n                        this.state.fileDetails.goodrecords[0] ?\n                        Object.entries(this.state.fileDetails.goodrecords[0]).map(([key, value], i)=> {\n                          return(<th scope=\"row\">{key}</th>);\n                        }) :  null\n                      }\n                      </tr>\n                    </thead>\n                    <tbody>\n                    {\n                      this.state.fileDetails.goodrecords ? \n                      this.state.fileDetails.goodrecords.map((data,index)=>{\n                        return(\n                          <tr key={index}>\n                          {\n                              Object.entries(data).map(([key, value], i)=> {\n                                return(<td scope=\"row\">{value}</td>);\n                              })\n                          }\n                        </tr>\n                        );\n                      }) \n                      : null\n                    }\n                    </tbody>\n                  </table>*/\n                }\n                </div>\n                \n              </div>\n            </div>  \n            : null\n          }\n        </div>\n      </div>\n\n    </div>\n    )\n  }\n}\nexport default BulkUploadComponent;"]},"metadata":{},"sourceType":"module"}