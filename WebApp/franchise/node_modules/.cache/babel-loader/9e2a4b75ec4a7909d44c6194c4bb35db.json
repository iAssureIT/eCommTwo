{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/StoreManagement/product/productBulkUpload/component/ProductBulkUpload.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'underscore';\nimport { withRouter } from 'react-router-dom';\nimport BulkUploadComponent from './BulkUploadComponent';\nimport '../css/productBulkUpload.css';\nimport Message from '../../../../storeAdmin/message/Message.js';\n\nclass AddNewBulkProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"currentProducts\": [],\n      \"productData\": [],\n      \"file\": props && props.fileData && props.fileData[0] ? props.fileData[0].fileName : '',\n      \"vendor\": \"\"\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.productData) {\n      this.setState({\n        productData: nextProps.productData\n      }, () => {// console.log('productData', this.state.productData);\n      });\n    }\n\n    if (nextProps.fileData && nextProps.fileData.length > 0) {\n      var file = nextProps.fileData[0].fileName;\n      var productData = nextProps.productData;\n\n      function checkAdult(data) {\n        return data.fileName === file;\n      }\n\n      var x = productData.filter(checkAdult);\n      console.log('x', x);\n      this.setState({\n        productData: x\n      });\n    }\n  }\n\n  componentDidMount() {\n    const user_ID = localStorage.getItem(\"user_ID\"); // console.log(\"User ID = \", user_ID);\n\n    this.setState({\n      user_ID: user_ID\n    });\n    this.getVendorList();\n    this.getSectionData(); // var dbdata = [];\n    // dbdata.push({name: \"section\", type: \"string\", label:\"Section\"})\n    // dbdata.push({name: \"category\", type: \"string\", label:\"Category\"})\n    // dbdata.push({name: \"subCategory\", type: \"string\", label:\"Subcategory\" })\n    // dbdata.push({name: \"brand\", type: \"string\", label:\"Brand\"})\n    // dbdata.push({name: \"productCode\", type: \"string\", label:\"Product Code\"})\n    // dbdata.push({name: \"itemCode\", type: \"string\", label:\"Item Code\"})\n    // dbdata.push({name: \"productName\", type: \"string\", label:\"Product Name\"})\n    // dbdata.push({name: \"productDetails\", type: \"string\", label:\"Product Details\"})\n    // dbdata.push({name: \"shortDescription\", type: \"string\", label:\"Short Description\"})\n    // dbdata.push({name: \"featureList\", type: \"string\", label:\"Feature List\"})\n    // dbdata.push({name: \"currency\", type: \"string\", label:\"Currency\"})\n    // dbdata.push({name: \"originalPrice\", type: \"number\", label:\"Original Price\"})\n    // dbdata.push({name: \"discountPercent\", type: \"number\", label:\"Discount Percent\"})\n    // dbdata.push({name: \"discountedPrice\", type: \"number\", label:\"Discounted Price\"})\n    // dbdata.push({name: \"availableQuantity\", type: \"number\", label:\"Available Quantity\"})\n    // dbdata.push({name: \"unit\", type: \"string\", label:\"Unit\"})\n    // dbdata.push({name: \"size\", type: \"string\", label:\"Size\"})\n    // dbdata.push({name: \"color\", type: \"string\", label:\"Color\"})\n    // dbdata.push({name: \"exclusive\", type: \"string\", label:\"Does this product is Exclusive\"})\n    // dbdata.push({name: \"featured\", type: \"string\", label:\"Does this product Featured\"})\n    // dbdata.push({name: \"taxInclude\", type: \"string\", label:\"Does Tax Include\"})\n    // dbdata.push({name: \"taxRate\", type: \"string\", label:\"Tax Rate\"})\n    // this.setState({\n    //   dbdata: dbdata\n    // })\n    //console.log('dbdata',this.state.dbdata);  \n  }\n\n  getSectionData() {\n    axios.get('/api/sections/get/list').then(response => {\n      // console.log('getWebCategories', response.data);\n      this.setState({\n        sectionArray: response.data\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  showRelevantCategories(event) {\n    var section = event.target.value;\n    this.setState({\n      section: event.target.value,\n      section_ID: event.target.value.split('|')[1],\n      messageData: {},\n      fileurl: null\n    });\n    axios.get('/api/category/get/list/' + event.target.value.split('|')[1]).then(response => {\n      this.setState({\n        categoryArray: response.data,\n        category: \"Select Category\",\n        subCategory: \"Select Sub-Category\"\n      });\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  showProgressBar() {// var getPercernt = UserSession.get(\"progressbarSession\",Meteor.userId());\n    // var allPercernt = UserSession.get(\"allProgressbarSession\",Meteor.userId());\n    // if(getPercernt && allPercernt){\n    //     var total = getPercernt/allPercernt*100;\n    //     total = parseInt(total);\n    //     var styleC = {\n    //         width:total + \"%\",\n    //         display:\"block\",\n    //     }\n    //     var styleCBar = {\n    //         display:\"block\",\n    //     }\n    // }\n    // if(!getPercernt){\n    //     var total = 0;\n    //     var styleC = {\n    //         width:0 + \"%\",\n    //         display:\"none\",\n    //     }\n    //     var styleCBar = {\n    //         display:\"none\",\n    //     }\n    // }\n    // // console.log('total',total);\n    // if(total === 100){\n    //     return (\n    //         <div></div>\n    //     );\n    // }else{\n    //     return (\n    //         <div>\n    //             <div className=\"progress\"  style= {styleCBar}>\n    //                 <div className=\"progress-bar progress-bar-striped active\" role=\"progressbar\"\n    //                 aria-valuenow=\"40\" aria-valuemin=\"0\" aria-valuemax=\"100\" style= {styleC}>\n    //                     {total} %\n    //                 </div>\n    //             </div>\n    //         </div>\n    //     );\n    // }\n  }\n\n  selectOption(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value,\n      messageData: {}\n    });\n  }\n\n  getVendorList() {\n    axios.get(\"/api/entitymaster/get/Vendor\").then(response => {\n      if (response) {\n        console.log(\"vendor response:\", response);\n        this.setState({\n          vendorArray: response.data,\n          vendor: response.data._id\n        });\n        console.log(\"vendorArray:\", this.state.vendorArray);\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  handleChangeCategory(event) {\n    event.preventDefault();\n    this.setState({\n      category: event.target.value,\n      category_ID: event.target.value.split('|')[1]\n    });\n    axios.get('/api/bulkUploadTemplate/get/' + event.target.value.split('|')[1]).then(response => {\n      console.log(\"productBulkUpload :\", response.data);\n\n      if (response.data) {\n        this.setState({\n          fileurl: response.data.templateUrl,\n          messageData: {}\n        });\n      } else {\n        this.setState({\n          fileurl: null,\n          messageData: {\n            \"type\": \"outpage\",\n            \"icon\": \"fa fa-exclamation\",\n            \"message\": \"Selected category does not have any template. Please upload template.\",\n            \"class\": \"warning\",\n            \"autoDismiss\": true\n          }\n        });\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  render() {\n    // console.log(\"role:\",localStorage.getItem('roles'))\n    const SheetJSFT = [\"xlsx\", \"xls\"];\n    const requiredData = {\n      vendor: this.state.vendor\n    }; // console.log(\"required data:\",requiredData);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Message, {\n      messageData: this.state.messageData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addNewProductWrap col-lg-12 col-md-12 col-sm-12 col-xs-12 add-new-productCol\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 col-md-4 col-sm-4 col-xs-12 pull-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 37\n      }\n    }, \"Product Bulk Upload\"))), localStorage.getItem('roles') === 'admin' ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 addTemplateWrapper pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/template-management\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn col-lg-2 col-md-2 col-sm-12 col-xs-12 addexamform clickforhideshow pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 41\n      }\n    }, \"Add Template\"))) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 col-md-4 col-sm-4 col-xs-4 inputFields marginTopp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 33\n      }\n    }, \"Vendor \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 47\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.selectOption.bind(this),\n      value: this.state.vendor,\n      name: \"vendor\",\n      className: \"form-control allProductCategories\",\n      \"aria-describedby\": \"basic-addon1\",\n      id: \"vendor\",\n      ref: \"vendor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      selected: true,\n      defaultValue: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 37\n      }\n    }, \"Select Vendor\"), this.state.vendorArray && this.state.vendorArray.length > 0 ? this.state.vendorArray.map((data, index) => {\n      return (\n        /*#__PURE__*/\n        // <option key={index} value={data.companyName + '|' + data.user_ID + '|' + data._id}>{data.companyName} - ({\"VendorID : \"+data.companyID})</option>\n        React.createElement(\"option\", {\n          key: index,\n          value: data.companyName + '|' + this.state.user_ID + '|' + data._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 45\n          }\n        }, data.companyName, \" - (\", \"VendorID : \" + data.companyID, \")\")\n      );\n    }) : /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 41\n      }\n    }, \"No vendor added\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 col-md-4 col-sm-4 col-xs-6 inputFields marginTopp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 33\n      }\n    }, \"Section \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 48\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.showRelevantCategories.bind(this),\n      value: this.state.section,\n      name: \"section\",\n      className: \"form-control\",\n      \"aria-describedby\": \"basic-addon1\",\n      id: \"section\",\n      ref: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      selected: true,\n      defaultValue: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 37\n      }\n    }, \"Select Section\"), this.state.sectionArray && this.state.sectionArray.length > 0 ? this.state.sectionArray.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        value: data.section + '|' + data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 49\n        }\n      }, data.section);\n    }) : /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 41\n      }\n    }, \"Section not available\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 col-md-4 col-sm-4 col-xs-6 inputFields marginTopp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 33\n      }\n    }, \"Category \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"redFont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 49\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handleChangeCategory.bind(this),\n      value: this.state.section,\n      name: \"category\",\n      value: this.state.category,\n      className: \"form-control\",\n      \"aria-describedby\": \"basic-addon1\",\n      id: \"category\",\n      ref: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      selected: true,\n      defaultValue: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 37\n      }\n    }, \"Select Category\"), this.state.categoryArray && this.state.sectionArray.length > 0 ? this.state.categoryArray.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        value: data.category + '|' + data._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 49\n        }\n      }, data.category);\n    }) : /*#__PURE__*/React.createElement(\"option\", {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 41\n      }\n    }, \"Category not available\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 29\n      }\n    }), this.state.vendor && this.state.fileurl ? /*#__PURE__*/React.createElement(BulkUploadComponent, {\n      url: \"/api/states/post/bulkinsert\",\n      fileurl: this.state.fileurl,\n      fileDetailUrl: \"/api/products/get/filedetails/\",\n      requiredData: requiredData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 29\n      }\n    }) : null))))));\n  }\n\n}\n\nexport default withRouter(AddNewBulkProduct); // AddNewBulkProduct = withTracker(props => {\n//     var vendorData          = [];\n//     const productHandle     = Meteor.subscribe(\"productShopPublish\");\n//     const productData       = ProductShop.find({},{sort: {dateAdded: -1}}).fetch();\n//     const fileDatas         = ProductShop.find({},{sort: {dateAdded: -1}},{fields:{\"fileName\" : 1}}).fetch();\n//     const loading1          = !productHandle.ready();\n//     var fileData = Array.from(new Set(fileDatas.map(x => x.fileName))).map(\n//     fileName =>{\n//         return{\n//             fileName: fileName,\n//             _id     : fileDatas.find(s => s.fileName === fileName)._id\n//         };\n//     });\n//     console.log('fileData',fileData);\n//     const vendorHandle      = Meteor.subscribe(\"allSupplierList\");\n//     if(Roles.userIsInRole(Meteor.userId(), ['Vendor'])){\n//         vendorData        = Suppliers.find({\"OwnerId\":Meteor.userId()}).fetch();\n//     }else{\n//         vendorData        = Suppliers.find({}).fetch();\n//     }\n//     const loading2          = !vendorHandle.ready();\n//     return {\n//         productData,\n//         vendorData,\n//         fileData\n//     };    \n// })(AddNewBulkProduct);","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/StoreManagement/product/productBulkUpload/component/ProductBulkUpload.js"],"names":["React","Component","axios","_","withRouter","BulkUploadComponent","Message","AddNewBulkProduct","constructor","props","state","fileData","fileName","componentWillReceiveProps","nextProps","productData","setState","length","file","checkAdult","data","x","filter","console","log","componentDidMount","user_ID","localStorage","getItem","getVendorList","getSectionData","get","then","response","sectionArray","catch","error","showRelevantCategories","event","section","target","value","section_ID","split","messageData","fileurl","categoryArray","category","subCategory","showProgressBar","selectOption","name","vendorArray","vendor","_id","handleChangeCategory","preventDefault","category_ID","templateUrl","render","SheetJSFT","requiredData","bind","map","index","companyName","companyID"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'underscore';\nimport { withRouter } from 'react-router-dom';\nimport BulkUploadComponent from './BulkUploadComponent';\nimport  '../css/productBulkUpload.css'\nimport Message from '../../../../storeAdmin/message/Message.js';\n\nclass AddNewBulkProduct extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"currentProducts\"   : [],\n            \"productData\"       : [],\n            \"file\"              : props && props.fileData && props.fileData[0] ? props.fileData[0].fileName : '',\n            \"vendor\"            : \"\",\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.productData) {\n            this.setState({\n                productData: nextProps.productData\n            }, () => {\n                // console.log('productData', this.state.productData);\n            });\n        }\n        if (nextProps.fileData && nextProps.fileData.length > 0) {\n            var file = nextProps.fileData[0].fileName;\n            var productData = nextProps.productData;\n\n            function checkAdult(data) {\n                return data.fileName === file;\n            }\n            var x = productData.filter(checkAdult);\n            console.log('x',x);\n\n            this.setState({\n                productData: x\n            });\n        }\n    }\n\n    componentDidMount() {\n    const user_ID = localStorage.getItem(\"user_ID\");\n    // console.log(\"User ID = \", user_ID);\n    this.setState({\n      user_ID : user_ID\n    });\n\n        this.getVendorList();\n        this.getSectionData();\n        // var dbdata = [];\n        // dbdata.push({name: \"section\", type: \"string\", label:\"Section\"})\n        // dbdata.push({name: \"category\", type: \"string\", label:\"Category\"})\n        // dbdata.push({name: \"subCategory\", type: \"string\", label:\"Subcategory\" })\n        // dbdata.push({name: \"brand\", type: \"string\", label:\"Brand\"})\n        // dbdata.push({name: \"productCode\", type: \"string\", label:\"Product Code\"})\n        // dbdata.push({name: \"itemCode\", type: \"string\", label:\"Item Code\"})\n        // dbdata.push({name: \"productName\", type: \"string\", label:\"Product Name\"})\n        // dbdata.push({name: \"productDetails\", type: \"string\", label:\"Product Details\"})\n        // dbdata.push({name: \"shortDescription\", type: \"string\", label:\"Short Description\"})\n        // dbdata.push({name: \"featureList\", type: \"string\", label:\"Feature List\"})\n        // dbdata.push({name: \"currency\", type: \"string\", label:\"Currency\"})\n        // dbdata.push({name: \"originalPrice\", type: \"number\", label:\"Original Price\"})\n        // dbdata.push({name: \"discountPercent\", type: \"number\", label:\"Discount Percent\"})\n        // dbdata.push({name: \"discountedPrice\", type: \"number\", label:\"Discounted Price\"})\n        // dbdata.push({name: \"availableQuantity\", type: \"number\", label:\"Available Quantity\"})\n        // dbdata.push({name: \"unit\", type: \"string\", label:\"Unit\"})\n        // dbdata.push({name: \"size\", type: \"string\", label:\"Size\"})\n        // dbdata.push({name: \"color\", type: \"string\", label:\"Color\"})\n        // dbdata.push({name: \"exclusive\", type: \"string\", label:\"Does this product is Exclusive\"})\n        // dbdata.push({name: \"featured\", type: \"string\", label:\"Does this product Featured\"})\n        // dbdata.push({name: \"taxInclude\", type: \"string\", label:\"Does Tax Include\"})\n        // dbdata.push({name: \"taxRate\", type: \"string\", label:\"Tax Rate\"})\n\n        // this.setState({\n        //   dbdata: dbdata\n        // })\n        //console.log('dbdata',this.state.dbdata);  \n    }\n\n\n    getSectionData() {\n        axios.get('/api/sections/get/list')\n          .then((response) => {\n            // console.log('getWebCategories', response.data);\n            this.setState({\n              sectionArray: response.data\n            })\n          })\n          .catch((error) => {\n            console.log('error', error);\n          })\n    }\n    showRelevantCategories(event) {\n        var section = event.target.value;\n        this.setState({\n          section: event.target.value,\n          section_ID: event.target.value.split('|')[1],\n          messageData : {},\n          fileurl:null\n        })\n        axios.get('/api/category/get/list/' + event.target.value.split('|')[1])\n          .then((response) => {\n            this.setState({\n              categoryArray: response.data,\n              category: \"Select Category\",\n              subCategory: \"Select Sub-Category\",\n            })\n          })\n          .catch((error) => {\n            console.log('error', error);\n          })\n    }\n    showProgressBar() {\n        // var getPercernt = UserSession.get(\"progressbarSession\",Meteor.userId());\n        // var allPercernt = UserSession.get(\"allProgressbarSession\",Meteor.userId());\n\n        // if(getPercernt && allPercernt){\n        //     var total = getPercernt/allPercernt*100;\n        //     total = parseInt(total);\n        //     var styleC = {\n        //         width:total + \"%\",\n        //         display:\"block\",\n        //     }\n        //     var styleCBar = {\n        //         display:\"block\",\n        //     }\n        // }\n        // if(!getPercernt){\n        //     var total = 0;\n\n        //     var styleC = {\n        //         width:0 + \"%\",\n        //         display:\"none\",\n        //     }\n        //     var styleCBar = {\n        //         display:\"none\",\n        //     }\n        // }\n        // // console.log('total',total);\n        // if(total === 100){\n        //     return (\n        //         <div></div>\n        //     );\n        // }else{\n        //     return (\n        //         <div>\n        //             <div className=\"progress\"  style= {styleCBar}>\n        //                 <div className=\"progress-bar progress-bar-striped active\" role=\"progressbar\"\n        //                 aria-valuenow=\"40\" aria-valuemin=\"0\" aria-valuemax=\"100\" style= {styleC}>\n        //                     {total} %\n        //                 </div>\n        //             </div>\n        //         </div>\n        //     );\n        // }\n    }\n    \n    \n    selectOption(event) {\n        const target = event.target;\n        const name = target.name;\n        this.setState({\n            [name]: event.target.value,\n            messageData : {}\n        });\n    }\n    getVendorList() {\n        axios.get(\"/api/entitymaster/get/Vendor\")\n            .then((response) => {\n                if(response){\n                    console.log(\"vendor response:\",response);\n                    this.setState({\n                        vendorArray: response.data,\n                        vendor     : response.data._id\n                    })\n                    console.log(\"vendorArray:\",this.state.vendorArray);\n                }\n                \n            })\n            .catch((error) => {\n                console.log('error', error);\n            })\n    }\n    handleChangeCategory(event){\n        event.preventDefault();\n        this.setState({\n          category: event.target.value,\n          category_ID: event.target.value.split('|')[1],\n        })\n        axios.get('/api/bulkUploadTemplate/get/' + event.target.value.split('|')[1])\n          .then((response) => {\n            console.log(\"productBulkUpload :\",response.data);\n            if (response.data) {\n                this.setState({fileurl:response.data.templateUrl, messageData : {}})    \n            }else{\n                this.setState({\n                    fileurl:null,\n                        messageData : {\n                            \"type\" : \"outpage\",\n                            \"icon\" : \"fa fa-exclamation\",\n                            \"message\" : \"Selected category does not have any template. Please upload template.\",\n                            \"class\": \"warning\",\n                            \"autoDismiss\" : true\n                        }\n                    })\n            }\n            \n          })\n          .catch((error) => {\n            console.log('error', error);\n          })\n    }\n\n\n    render() {\n        // console.log(\"role:\",localStorage.getItem('roles'))\n        const SheetJSFT = [\n            \"xlsx\",\n            \"xls\"\n        ]\n        const requiredData = {vendor: this.state.vendor};\n        // console.log(\"required data:\",requiredData);\n        return (\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding-right\">\n            <section className=\"content\">\n            <Message messageData={this.state.messageData} />\n            <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\">\n                <div className=\"row\">\n                    <div className=\"addNewProductWrap col-lg-12 col-md-12 col-sm-12 col-xs-12 add-new-productCol\">\n                        <div className=\"\">\n                            <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                                <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-12 pull-left\" >\n                                    <h4 className=\"NOpadding-right\">Product Bulk Upload</h4>\n                                </div>\n                                \n                            </div> \n\n                            {\n                                localStorage.getItem('roles') === 'admin' ? \n                                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 addTemplateWrapper pull-right\" >\n                                    <a href=\"/template-management\">\n                                        <button type=\"button\" className=\"btn col-lg-2 col-md-2 col-sm-12 col-xs-12 addexamform clickforhideshow pull-right\" >Add Template</button>\n                                    </a>\n                                </div>\n                                : null\n                            }                       \n                        \n                            <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-4 inputFields marginTopp\">\n                                <label>Vendor <i className=\"redFont\">*</i></label>\n                                <select onChange={this.selectOption.bind(this)} value={this.state.vendor} name=\"vendor\" className=\"form-control allProductCategories\" aria-describedby=\"basic-addon1\" id=\"vendor\" ref=\"vendor\">\n                                    <option disabled selected defaultValue=\"\">Select Vendor</option>\n                                    {this.state.vendorArray && this.state.vendorArray.length > 0 ?\n                                        this.state.vendorArray.map((data, index) => {\n                                            return (\n                                            // <option key={index} value={data.companyName + '|' + data.user_ID + '|' + data._id}>{data.companyName} - ({\"VendorID : \"+data.companyID})</option>\n                                            <option key={index} value={data.companyName + '|' + this.state.user_ID + '|' + data._id}>{data.companyName} - ({\"VendorID : \"+data.companyID})</option>\n                                            );\n                                        })\n                                        :\n                                        <option disabled>{\"No vendor added\"}</option>\n                                    }\n                                </select>\n                            </div>\n                            <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-6 inputFields marginTopp\">\n                                <label>Section <i className=\"redFont\">*</i></label>\n                                <select onChange={this.showRelevantCategories.bind(this)} value={this.state.section} name=\"section\" className=\"form-control\" aria-describedby=\"basic-addon1\" id=\"section\" ref=\"section\">\n                                    <option disabled selected defaultValue=\"\">Select Section</option>\n                                    {this.state.sectionArray && this.state.sectionArray.length > 0 ?\n                                        this.state.sectionArray.map((data, index) => {\n                                            return (\n                                                <option key={index} value={data.section + '|' + data._id} >{data.section}</option>\n                                            );\n                                        })\n                                        :\n                                        <option disabled>{\"Section not available\"}</option>\n                                    }\n                                </select>\n                            </div>\n                            <div className=\"col-lg-4 col-md-4 col-sm-4 col-xs-6 inputFields marginTopp\">\n                                <label>Category <i className=\"redFont\">*</i></label>\n                                <select onChange={this.handleChangeCategory.bind(this)} value={this.state.section} name=\"category\" value={this.state.category}  className=\"form-control\" aria-describedby=\"basic-addon1\" id=\"category\" ref=\"category\">\n                                    <option disabled selected defaultValue=\"\">Select Category</option>\n                                    {this.state.categoryArray && this.state.sectionArray.length > 0 ?\n                                        this.state.categoryArray.map((data, index) => {\n                                            return (\n                                                <option key={index} value={data.category + '|' + data._id} >{data.category}</option>\n                                            );\n                                        })\n                                        :\n                                        <option disabled>{\"Category not available\"}</option>\n                                    }\n                                </select>\n                            </div>\n                            {\n\n                                /*<div className=\"col-lg-5 col-md-5 col-sm-5 col-xs-5 inputFields marginTopp\">\n                                    <label>Categroy <i className=\"redFont\">*</i></label>\n                                    <select onChange={this.selectOption.bind(this)} value={this.state.vendor} name=\"vendor\" className=\"form-control allProductCategories\" aria-describedby=\"basic-addon1\" id=\"vendor\" ref=\"vendor\">\n                                        <option disabled selected defaultValue=\"\">Select Category</option>\n                                        <option value={localStorage.getItem(\"admin_ID\")} >Admin</option>\n                                        {this.state.categoryArray && this.state.categoryArray.length > 0 ?\n                                            this.state.categoryArray.map((data, index) => {\n                                                return (\n                                                    <option key={index} value={data._id}>{data.companyName} - ({data.vendorID})</option>\n                                                );\n                                            })\n                                            :\n                                            <option disabled>{\"No vendor added\"}</option>\n                                        }\n                                    </select>\n                                    {this.state.category ? null : <span>Please select category to export excel file template</span>}\n                                </div>*/\n                            }\n                            <br/>\n                        \n                        {\n                           this.state.vendor &&  this.state.fileurl ?\n                            <BulkUploadComponent url=\"/api/states/post/bulkinsert\" \n                                fileurl={this.state.fileurl}\n                                fileDetailUrl=\"/api/products/get/filedetails/\"\n                                requiredData={requiredData}\n                                />   : null    \n                            \n                        }\n                        </div>\n                </div>\n                </div>\n            </div>\n        </section>\n      </div>\n        );\n    }\n}\nexport default withRouter(AddNewBulkProduct);\n\n// AddNewBulkProduct = withTracker(props => {\n//     var vendorData          = [];\n//     const productHandle     = Meteor.subscribe(\"productShopPublish\");\n//     const productData       = ProductShop.find({},{sort: {dateAdded: -1}}).fetch();\n//     const fileDatas         = ProductShop.find({},{sort: {dateAdded: -1}},{fields:{\"fileName\" : 1}}).fetch();\n//     const loading1          = !productHandle.ready();\n\n//     var fileData = Array.from(new Set(fileDatas.map(x => x.fileName))).map(\n//     fileName =>{\n//         return{\n//             fileName: fileName,\n//             _id     : fileDatas.find(s => s.fileName === fileName)._id\n//         };\n//     });\n//     console.log('fileData',fileData);\n//     const vendorHandle      = Meteor.subscribe(\"allSupplierList\");\n//     if(Roles.userIsInRole(Meteor.userId(), ['Vendor'])){\n//         vendorData        = Suppliers.find({\"OwnerId\":Meteor.userId()}).fetch();\n//     }else{\n//         vendorData        = Suppliers.find({}).fetch();\n//     }\n//     const loading2          = !vendorHandle.ready();\n//     return {\n//         productData,\n//         vendorData,\n//         fileData\n//     };    \n// })(AddNewBulkProduct);"]},"metadata":{},"sourceType":"module"}