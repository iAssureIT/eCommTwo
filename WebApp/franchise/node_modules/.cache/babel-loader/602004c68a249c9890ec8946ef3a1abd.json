{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/PieChart.js\";\nimport React, { Component } from 'react';\nimport { Pie } from 'react-chartjs-2';\nimport 'chartjs-plugin-labels';\nimport axios from 'axios';\nexport default class PieChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"data\": {\n        labels: [],\n        datasets: [{\n          data: [],\n          backgroundColor: [],\n          hoverBackgroundColor: []\n        }]\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getSectorwiseData(this.props.year, this.props.center_ID);\n  }\n\n  getSectorwiseData(year, center_ID) {\n    var sectordata = { ...this.state.data\n    };\n    var startDate = year.substring(3, 7) + \"-04-01\";\n    var endDate = year.substring(10, 15) + \"-03-31\";\n\n    if (startDate && endDate && center_ID) {\n      axios.get('/api/report/sector/' + startDate + '/' + endDate + '/' + center_ID + '/all/all/all').then(response => {\n        response.data.splice(-2);\n        var sector = [];\n        var piechartcolor = [];\n        var annualPlanTotalBudget = [];\n\n        if (response.data && response.data.length > 0) {\n          response.data.map((data, index) => {\n            if (data.annualPlan_TotalBudget > 0) {\n              sector.push(data.name);\n              annualPlanTotalBudget.push(data.annualPlan_TotalBudget);\n              piechartcolor.push(this.getRandomColor_sector());\n            }\n          });\n\n          if (annualPlanTotalBudget.length > 0) {\n            sectordata.datasets[0].data = annualPlanTotalBudget;\n            sectordata.labels = sector;\n            sectordata.datasets[0].backgroundColor = piechartcolor;\n            sectordata.datasets[0].hoverBackgroundColor = piechartcolor;\n            this.setState({\n              \"data\": sectordata\n            });\n          } else {\n            sectordata.datasets[0].data = [300000, 170000, 50000, 200000, 250000];\n            sectordata.labels = [\"Agriculture Development\", \"Natural Resource Management\", \"Animal Husbandry\", \"Educational Sector\", \"Health\"];\n            sectordata.datasets[0].backgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n            sectordata.datasets[0].hoverBackgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n            this.setState({\n              \"data\": sectordata\n            });\n          }\n        } else {\n          sectordata.datasets[0].data = [300000, 170000, 50000, 200000, 250000];\n          sectordata.labels = [\"Agriculture Development\", \"Natural Resource Management\", \"Animal Husbandry\", \"Educational Sector\", \"Health\"];\n          sectordata.datasets[0].backgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n          sectordata.datasets[0].hoverBackgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n          this.setState({\n            \"data\": sectordata\n          });\n        }\n      }).catch(function (error) {});\n    } else {\n      sectordata.datasets[0].data = [300000, 170000, 50000, 200000, 250000];\n      sectordata.labels = [\"Agriculture Development\", \"Natural Resource Management\", \"Animal Husbandry\", \"Educational Sector\", \"Health\"];\n      sectordata.datasets[0].backgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n      sectordata.datasets[0].hoverBackgroundColor = [\"#0275d8\", \"#5cb85c\", \"#5bc0de\", \"#f0ad4e\", \"#d9534f\"];\n      this.setState({\n        \"data\": sectordata\n      });\n    }\n  }\n\n  getRandomColor_sector() {\n    var letters = '01234ABCDEF56789';\n    var color = '#';\n\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n\n    return color;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Pie, {\n      height: 150,\n      data: this.state.data,\n      options: {\n        legend: {\n          display: false\n        },\n        plugins: {\n          labels: [{\n            render: 'label',\n            position: 'outside',\n            fontColor: '#000',\n            textMargin: 8\n          }, {\n            render: 'percentage',\n            fontColor: '#fff'\n          }]\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/coreadmin/dashboard/chart1/PieChart.js"],"names":["React","Component","Pie","axios","PieChart","constructor","props","state","labels","datasets","data","backgroundColor","hoverBackgroundColor","componentDidMount","getSectorwiseData","year","center_ID","sectordata","startDate","substring","endDate","get","then","response","splice","sector","piechartcolor","annualPlanTotalBudget","length","map","index","annualPlan_TotalBudget","push","name","getRandomColor_sector","setState","catch","error","letters","color","i","Math","floor","random","render","legend","display","plugins","position","fontColor","textMargin"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport {Pie} from 'react-chartjs-2';\nimport 'chartjs-plugin-labels';\nimport axios             from 'axios';\n\nexport default class PieChart extends Component {\n\n  constructor(props){\n    super(props);\n    this.state={\n      \"data\" : {\n      labels: [],\n      datasets: [{\n        data: [],\n        backgroundColor: [] ,\n        hoverBackgroundColor: []\n        }]\n      }\n    } \n  }\n\n  componentDidMount(){\n    this.getSectorwiseData(this.props.year,this.props.center_ID);\n  }\n  getSectorwiseData(year, center_ID){\n    var sectordata = {...this.state.data};\n    var startDate = year.substring(3, 7)+\"-04-01\";\n    var endDate = year.substring(10, 15)+\"-03-31\";\n    if(startDate && endDate && center_ID){\n        axios.get('/api/report/sector/'+startDate+'/'+endDate+'/'+center_ID+'/all/all/all')\n        .then((response)=>{ \n          response.data.splice(-2);\n          var sector = [];\n          var piechartcolor =[];\n          var annualPlanTotalBudget = [];\n         if(response.data&&response.data.length >0){\n            response.data.map((data,index)=>{ \n              if(data.annualPlan_TotalBudget > 0){\n                sector.push(data.name);\n                annualPlanTotalBudget.push(data.annualPlan_TotalBudget);\n                piechartcolor.push(this.getRandomColor_sector());\n              }\n            })\n          if (annualPlanTotalBudget.length > 0) {\n            sectordata.datasets[0].data = annualPlanTotalBudget;\n            sectordata.labels = sector;\n            sectordata.datasets[0].backgroundColor = piechartcolor;\n            sectordata.datasets[0].hoverBackgroundColor = piechartcolor;\n            this.setState({\n              \"data\" : sectordata\n            })\n            \n          }else{\n            sectordata.datasets[0].data = [300000,170000,50000,200000,250000];\n            sectordata.labels = [\"Agriculture Development\",\"Natural Resource Management\",\"Animal Husbandry\",\"Educational Sector\",\"Health\"];\n            sectordata.datasets[0].backgroundColor = [\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n            sectordata.datasets[0].hoverBackgroundColor =[\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n            this.setState({\n              \"data\" : sectordata\n            })\n          }\n        }else{\n          sectordata.datasets[0].data = [300000,170000,50000,200000,250000];\n          sectordata.labels = [\"Agriculture Development\",\"Natural Resource Management\",\"Animal Husbandry\",\"Educational Sector\",\"Health\"];\n          sectordata.datasets[0].backgroundColor = [\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n          sectordata.datasets[0].hoverBackgroundColor =[\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n          this.setState({\n            \"data\" : sectordata\n          })\n        }   \n      })\n      .catch(function(error){        \n      });\n    }else{\n      sectordata.datasets[0].data = [300000,170000,50000,200000,250000];\n      sectordata.labels = [\"Agriculture Development\",\"Natural Resource Management\",\"Animal Husbandry\",\"Educational Sector\",\"Health\"];\n      sectordata.datasets[0].backgroundColor = [\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n      sectordata.datasets[0].hoverBackgroundColor =[\"#0275d8\",\"#5cb85c\",\"#5bc0de\",\"#f0ad4e\",\"#d9534f\"];\n      this.setState({\n        \"data\" : sectordata\n      })\n \n    }\n  }\n  getRandomColor_sector(){\n      var letters = '01234ABCDEF56789';\n      var color = '#';\n      for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n      }\n      return color;\n    }\n  render() {\n    return ( \n      <div>\n        <Pie height={150} data={this.state.data} options={{legend: {display: false},\n        plugins: {\n           labels: [{\n            render: 'label',\n            position: 'outside',\n            fontColor: '#000',\n            textMargin: 8\n          },\n          {\n            render: 'percentage',\n            fontColor: '#fff',\n          }\n           ]} }} />\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}