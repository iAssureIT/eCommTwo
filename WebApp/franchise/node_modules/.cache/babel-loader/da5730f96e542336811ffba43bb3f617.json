{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/adminShoppingList/AdminShoppingList.js\";\nimport React from 'react';\nimport IAssureTableUM from '../../coreadmin/IAssureTableUM/IAssureTable.jsx';\nimport axios from 'axios';\nimport moment from 'moment';\nimport swal from 'sweetalert';\nimport './AdminShoppingList.css';\nexport default class AdminShoppingList extends React.Component {\n  constructor(props) {\n    super(props);\n    var userDetails = localStorage.getItem(\"userDetails\");\n    this.state = {\n      objects: [],\n      units: \"\",\n      productList: [],\n      currentStock: [],\n      prodStockOrder: [],\n      selectedSection: \"\",\n      date: moment(new Date()).format(\"YYYY-MM-DD\"),\n      editId: \"\",\n      allFrachiseList: \"\",\n      user_id: userDetails.user_id\n    };\n  }\n\n  componentDidMount() {\n    this.getAllfrachiseData();\n    let editid1 = window.location.pathname;\n    let editId = editid1 ? editid1.split('/')[2] : \"\";\n    const userDetails = JSON.parse(localStorage.getItem(\"userDetails\"));\n    console.log(\"userDetails = \", userDetails);\n    this.setState({\n      editId: editId,\n      user_id: userDetails.user_id\n    });\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    console.log(\"event.target.value = \", event.target.value);\n    this.setState({\n      [event.target.name]: event.target.value\n    }, () => {\n      this.getAllfrachiseData();\n    });\n  }\n\n  getAllfrachiseData() {\n    var dateOfOrder = this.state.date; // console.log(\"dateOfOrder\",dateOfOrder);\n\n    axios.get('/api/franchisepo/get/purchaseorderList/' + dateOfOrder).then(franchisePurOrders => {\n      this.setState({\n        \"allFrachiseList\": franchisePurOrders.data\n      });\n      this.getCurrentStock();\n    }).catch(error => {\n      console.log(\"error in getCurrentStock = \", error);\n    });\n  }\n\n  getCurrentStock() {\n    axios.get('/api/products/get/list').then(prodlist => {\n      var prodStockOrder = [];\n\n      if (Array.isArray(prodlist.data) && prodlist.data.length > 0) {\n        console.log(\"prodlist = \", prodlist.data); //Separate out the Unique values of Units \n\n        const units = [...new Set(prodlist.data.map(item => item.unit))];\n        this.setState({\n          \"units\": units\n        });\n\n        if (Array.isArray(this.state.allFrachiseList) && this.state.allFrachiseList.length > 0) {\n          console.log(\"this.state.allFrachiseList = \", this.state.allFrachiseList);\n          var allFranchiseOrders = [];\n\n          for (var i = 0; i < prodlist.data.length; i++) {\n            var totOrder = 0;\n            var obj = {};\n            var index = -1;\n\n            for (var j = 0; j < this.state.allFrachiseList.length; j++) {\n              obj.franchise_id = this.state.allFrachiseList[j].franchise_id;\n              obj.productCode = prodlist.data[i].productCode;\n              obj.itemCode = prodlist.data[i].itemCode;\n              obj.productName = prodlist.data[i].productName;\n              obj.currentStock = \"- NA -\";\n              obj.totOrder = 0;\n              obj.totUnit = \"\";\n              this.state.allFrachiseList[j].orderItems.some((orderItem, n) => {\n                return orderItem.productCode === prodlist.data[i].productCode && orderItem.itemCode === prodlist.data[i].itemCode ? (index = n, obj[\"orderQty\" + j] = parseFloat(this.state.allFrachiseList[j].orderItems[n].orderQty), obj[\"units\" + j] = this.state.allFrachiseList[j].orderItems[n].unit, totOrder = totOrder + parseFloat(this.state.allFrachiseList[j].orderItems[n].orderQty), true) : (obj[\"orderQty\" + j] = 0, obj[\"units\" + j] = \"\", false);\n              });\n            } //for j\t\t\t\t\t\t\t\t\t\n\n\n            obj.totOrder = totOrder;\n            obj.totUnit = prodlist.data[i].unit;\n\n            if (totOrder > 0) {\n              allFranchiseOrders.push(obj);\n            }\n          } //for i\n\n\n          if (i == prodlist.data.length) {\n            console.log(\"allFranchiseOrders = \", allFranchiseOrders);\n            this.setState({\n              \"allFranchiseOrders\": allFranchiseOrders\n            });\n          }\n        } //if\n\n      } else {\n        swal(\"Franchise Orders Not Yet Submitted\", \"error\");\n      }\n    }).catch(error => {\n      console.log(\"error in getCurrentStock = \", error);\n    });\n  }\n\n  Submit(event) {\n    event.preventDefault();\n    var orderArray = [];\n\n    for (var i = 0; i < this.state.allFranchiseOrders.length; i++) {\n      var obj = {};\n      obj.productCode = this.state.allFranchiseOrders[i].productCode;\n      obj.itemCode = this.state.allFranchiseOrders[i].itemCode;\n      obj.productName = this.state.allFranchiseOrders[i].productName;\n      obj.totOrder = this.state.allFranchiseOrders[i].totOrder;\n      obj.totUnit = this.state.allFranchiseOrders[i].totUnit;\n      orderArray.push(obj);\n    }\n\n    var formValues = {\n      orderDate: this.state.date,\n      orderItems: orderArray,\n      createdBy: this.state.user_id\n    };\n    console.log(\"formValues = \", formValues);\n    axios.post('/api/adminpo/post', formValues).then(function (response) {\n      console.log(\"response.data = \", response.data);\n      swal(\"Thank you. Your Product addeed successfully.\");\n    }).catch(function (error) {\n      // handle error\n      console.log(error);\n    });\n  }\n\n  setOrderQty(event) {\n    event.preventDefault();\n    var orderQty = event.target.value;\n    var index = event.target.name.split(\"_\")[1];\n    var allFranchiseOrders = this.state.allFranchiseOrders;\n    allFranchiseOrders[index].totOrder = parseFloat(orderQty);\n    this.setState({\n      allFranchiseOrders: allFranchiseOrders\n    });\n  }\n\n  setUnit(event) {\n    event.preventDefault();\n    var unit = event.target.value;\n    var index = event.target.name.split(\"-\")[1];\n    var prodStockOrder = this.state.prodStockOrder;\n    prodStockOrder[index].unit = unit;\n    this.setState({\n      prodStockOrder: prodStockOrder\n    });\n  }\n\n  handleSelectChange(event) {\n    var selectedValue = event.target.value;\n    this.setState({\n      selectedSection: selectedValue\n    });\n  }\n\n  render() {\n    // console.log(\"productList render = \",this.state.productList);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pmcontentWrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pmpageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 mtop20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, \"Admin Shopping List\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mtopbotm15\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-4 col-md-8 col-sm-12 col-xs-12 pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, \"Order Date :\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8 col-md-9 col-sm-12 col-xs-12  pull-right nopadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \" \",\n      id: \"date\",\n      type: \"date\",\n      name: \"date\",\n      refs: \"date\",\n      value: this.state.date,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-striped table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }, \"ProductID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 19\n      }\n    }, \"Product Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    }, \"Current Stock\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 19\n      }\n    }, \"Total Ordered \"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 19\n      }\n    }, \"Shopping Quantity \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 41\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"small\", {\n      style: {\n        fontWeight: 'normal'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 47\n      }\n    }, \"Change the quantity as required\"), \" \"), Array.isArray(this.state.allFrachiseList) && this.state.allFrachiseList.length > 0 ? this.state.allFrachiseList.map((franchisePO, index) => {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 23\n        }\n      }, \"Franchise\" + (index + 1) + \" Order\", \" \");\n    }) : null)), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 14\n      }\n    }, Array.isArray(this.state.allFranchiseOrders) && this.state.allFranchiseOrders.length > 0 ? this.state.allFranchiseOrders.map((result, index) => {\n      // console.log('result', result);\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 22\n        }\n      }, result.productCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 22\n        }\n      }, result.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 22\n        }\n      }, result.productName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 22\n        }\n      }, result.currentStock), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 22\n        }\n      }, result.totOrder), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control width90\",\n        name: \"orderedItems_\" + index,\n        id: result.productCode + \"-\" + result.itemCode,\n        value: this.state.allFranchiseOrders[index].totOrder,\n        onChange: this.setOrderQty.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-addon width90\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 25\n        }\n      }, result.totUnit)))), Object.values(result).map((fieldValue, index, allFields) => {\n        if (index > 6) {\n          if (index % 2 === 0) //Use Only even values like 8, 10, 12, etc\n            return /*#__PURE__*/React.createElement(\"td\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 30\n              }\n            }, \" \", allFields[index - 1] + \" \" + allFields[index], \" \");\n        }\n      }));\n    }) : null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 mtop20 Subbtnmtop20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary col-lg-3 col-md-3 col-xs-4 col-sm-4 pull-right\",\n      onClick: this.Submit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }\n    }, \"Submit\"))))));\n  }\n\n}","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/adminShoppingList/AdminShoppingList.js"],"names":["React","IAssureTableUM","axios","moment","swal","AdminShoppingList","Component","constructor","props","userDetails","localStorage","getItem","state","objects","units","productList","currentStock","prodStockOrder","selectedSection","date","Date","format","editId","allFrachiseList","user_id","componentDidMount","getAllfrachiseData","editid1","window","location","pathname","split","JSON","parse","console","log","setState","handleChange","event","preventDefault","target","value","name","dateOfOrder","get","then","franchisePurOrders","data","getCurrentStock","catch","error","prodlist","Array","isArray","length","Set","map","item","unit","allFranchiseOrders","i","totOrder","obj","index","j","franchise_id","productCode","itemCode","productName","totUnit","orderItems","some","orderItem","n","parseFloat","orderQty","push","Submit","orderArray","formValues","orderDate","createdBy","post","response","setOrderQty","setUnit","handleSelectChange","selectedValue","render","bind","fontWeight","franchisePO","result","Object","values","fieldValue","allFields"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IAssureTableUM from '../../coreadmin/IAssureTableUM/IAssureTable.jsx';\nimport axios from 'axios';\nimport moment from 'moment';\nimport swal from 'sweetalert';\nimport './AdminShoppingList.css';\n\n\nexport default class AdminShoppingList extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\tvar userDetails = localStorage.getItem(\"userDetails\");\n\t  \tthis.state = {\n          objects \t\t\t\t\t: [],\n          units \t\t\t\t\t\t: \"\",\n\t    \t\tproductList \t\t\t: [],\n          currentStock \t\t\t: [],\t\n         \tprodStockOrder \t\t: [],\t      \n\t        selectedSection \t: \"\",\t\n\t        date \t\t\t\t\t\t\t: moment(new Date()).format(\"YYYY-MM-DD\"),\n\t        editId \t\t\t\t\t\t: \"\",\n\t        allFrachiseList \t: \"\",\n\t        user_id \t\t\t\t\t: userDetails.user_id,\n   \t};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.getAllfrachiseData();\n\t\tlet editid1 \t= window.location.pathname;\n\t\tlet editId \t\t= editid1 ? editid1.split('/')[2] : \"\";\n\t  const userDetails = JSON.parse(localStorage.getItem(\"userDetails\"));\n\t  console.log(\"userDetails = \",userDetails);\n\t\tthis.setState({\n\t\t\t\teditId : editId,\n\t\t\t\tuser_id : userDetails.user_id,\n\t\t});\n\t}\n\n\thandleChange(event){\n\t\tevent.preventDefault();\n\t\tconsole.log(\"event.target.value = \",event.target.value);\n\n\t\tthis.setState({\n\t\t\t[event.target.name] : event.target.value,\t\t\t\n\t\t\t},()=>{\n\t\t\t\tthis.getAllfrachiseData();\n\t\t\t});\n\n\t}\n\n\tgetAllfrachiseData(){\n\t\tvar dateOfOrder = this.state.date;\n\t\t// console.log(\"dateOfOrder\",dateOfOrder);\n\t\taxios.get('/api/franchisepo/get/purchaseorderList/'+dateOfOrder)\n          .then((franchisePurOrders) => {\n\t\t\t\t\t\tthis.setState({\n\t\t             \"allFrachiseList\" : franchisePurOrders.data,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.getCurrentStock();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error=>{\n\t\t\t\t\t\tconsole.log(\"error in getCurrentStock = \", error);\n\t\t\t\t\t})\n\n\t}\n\n\tgetCurrentStock(){\n\t\taxios.get('/api/products/get/list')\n\t\t    .then(prodlist => {\n\t\t\t\t\tvar prodStockOrder = [];\n\t\t\t\t\tif(Array.isArray(prodlist.data) && prodlist.data.length > 0){\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(\"prodlist = \",prodlist.data);\n\n\t\t\t\t\t\t//Separate out the Unique values of Units \n\t\t\t\t\t\tconst units = [...new Set(prodlist.data.map(item => item.unit))];\n\t\t\t\t\t\tthis.setState({\n\t\t          \"units\" : units,\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tif ( Array.isArray(this.state.allFrachiseList) && \n\t\t\t\t\t\t\t\t this.state.allFrachiseList.length > 0) {\t\t\t\t\t\t\n\t\n\t\t\t\t\t\t\tconsole.log(\"this.state.allFrachiseList = \",this.state.allFrachiseList);\n\t\t\t\t\t\t\tvar allFranchiseOrders = []; \n\t\t\t\t\t\t\tfor (var i = 0; i < prodlist.data.length; i++) {\n\t\t\t\t\t\t\t\tvar totOrder = 0;\n\t\t\t\t\t\t\t\tvar obj = {};\n \t\t\t\t\t\t\t\tvar index = -1;\n\t\t\t\t\t\t\t\tfor (var j = 0; j < this.state.allFrachiseList.length; j++) {\n\t\t\t\t\t\t\t\t\tobj.franchise_id \t\t= \tthis.state.allFrachiseList[j].franchise_id;\n\t\t\t\t\t\t\t\t\tobj.productCode \t  = \tprodlist.data[i].productCode;\n\t\t\t\t\t\t\t\t\tobj.itemCode \t  \t\t= \tprodlist.data[i].itemCode;\n\t\t\t\t\t\t\t\t\tobj.productName \t  = \tprodlist.data[i].productName;\n\t\t\t\t\t\t\t\t\tobj.currentStock \t  = \t\"- NA -\";\n\t\t\t\t\t\t\t\t\tobj.totOrder\t\t\t\t=   0;\n\t\t\t\t\t\t\t\t\tobj.totUnit\t\t\t\t\t=   \"\";\n\n \t\t\t\t\t\t\t\t\tthis.state.allFrachiseList[j].orderItems.some((orderItem,n) => {\n \t\t\t\t\t\t\t\t\t\t\treturn \torderItem.productCode === prodlist.data[i].productCode &&\n \t\t\t\t\t\t\t\t\t\t\t\t \t\t\torderItem.itemCode === prodlist.data[i].itemCode\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?  \n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex = n, \n\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\tobj[\"orderQty\"+j] \t= parseFloat(this.state.allFrachiseList[j].orderItems[n].orderQty),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj[\"units\"+j]\t\t\t= this.state.allFrachiseList[j].orderItems[n].unit,\n\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\ttotOrder \t\t\t\t\t\t= totOrder +  parseFloat(this.state.allFrachiseList[j].orderItems[n].orderQty),\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:  \n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\tobj[\"orderQty\"+j] = 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj[\"units\"+j]\t\t= \"\",\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse \n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) ;\n \t\t\t\t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t\t}//for j\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tobj.totOrder = totOrder;\n\t\t\t\t\t\t\t\tobj.totUnit  = prodlist.data[i].unit;\n\n\t\t\t\t\t\t\t\tif(totOrder > 0){\n\t\t\t\t\t\t\t\t\tallFranchiseOrders.push(obj);\t\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}//for i\n\n\t\t\t\t\t\t\tif(i == prodlist.data.length){\n\t\t\t\t\t\t\t\tconsole.log(\"allFranchiseOrders = \",allFranchiseOrders);\n\t\t\t\t\t\t\t\tthis.setState({\"allFranchiseOrders\" : allFranchiseOrders});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}//if\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswal(\"Franchise Orders Not Yet Submitted\",\"error\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error=>{\n\t\t\t\t\tconsole.log(\"error in getCurrentStock = \", error);\n\t\t\t\t})\n\t}\n\n  Submit(event){\n    \tevent.preventDefault();\n    \tvar orderArray = [];\n    \tfor (var i = 0; i < this.state.allFranchiseOrders.length; i++) {\n    \t\tvar obj = {};\n    \t\tobj.productCode \t= this.state.allFranchiseOrders[i].productCode;\n    \t\tobj.itemCode \t\t\t= this.state.allFranchiseOrders[i].itemCode;\n    \t\tobj.productName \t= this.state.allFranchiseOrders[i].productName;\n    \t\tobj.totOrder \t\t\t= this.state.allFranchiseOrders[i].totOrder;\n    \t\tobj.totUnit \t\t\t= this.state.allFranchiseOrders[i].totUnit;\n    \t\torderArray.push(obj);\n    \t}\n    \tvar formValues = {\n    \t\torderDate \t: this.state.date,\n    \t\torderItems\t: orderArray,\n    \t\tcreatedBy \t: this.state.user_id,\n    \t};\n\n    \tconsole.log(\"formValues = \",formValues);\n      axios\n\t\t\t\t.post('/api/adminpo/post', formValues)\n\t\t  \t.then(function (response) {\n\t\t    \tconsole.log(\"response.data = \",response.data);\n\t\t    \tswal(\"Thank you. Your Product addeed successfully.\");\n\t\t  \t})\n\t\t  \t.catch(function (error) {\n\t\t    \t// handle error\n\t\t    \tconsole.log(error);\n\t\t  \t});\n\n\t}\n\n\tsetOrderQty(event){\n\t\tevent.preventDefault();\n\t\tvar orderQty = event.target.value;\n\t\tvar index  \t = event.target.name.split(\"_\")[1];\n\t\tvar allFranchiseOrders = this.state.allFranchiseOrders; \n\n\t\tallFranchiseOrders[index].totOrder = parseFloat(orderQty);\n\t\tthis.setState({allFranchiseOrders : allFranchiseOrders});\n\t}\n\n\tsetUnit(event){\n\t\tevent.preventDefault();\n\t\tvar unit \t= event.target.value;\n\t\tvar index  \t= event.target.name.split(\"-\")[1];\n\t\tvar prodStockOrder = this.state.prodStockOrder; \n\n\t\tprodStockOrder[index].unit = unit;\n\t\tthis.setState({prodStockOrder : prodStockOrder});\t\t\n\t}\n\n\thandleSelectChange(event){\n\t\tvar selectedValue = event.target.value;\n\t\tthis.setState({selectedSection : selectedValue});\n\t}\n\n\trender() {\n\t\t// console.log(\"productList render = \",this.state.productList);\n\n\t\treturn (\n\t\t\t\t<div  className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n\t\t\t\t\t<div  className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 pmcontentWrap\">\n\t\t\t\t\t\t<div className='col-lg-12 col-md-12 col-xs-12 col-sm-12 pmpageContent'>\n\t\t\t\t\t\t\t<div  className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 mtop20\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-center\">Admin Shopping List</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mtopbotm15\">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-4 col-md-8 col-sm-12 col-xs-12 pull-right\">\n\t\t\t\t\t\t\t\t    <label className=\" \">Order Date :</label>\n\t\t\t\t\t\t\t\t    <div className=\"col-lg-8 col-md-9 col-sm-12 col-xs-12  pull-right nopadding\">\n\t\t\t\t\t\t\t\t      <input className=\" \" id=\"date\" type=\"date\" name=\"date\" refs=\"date\" value={this.state.date} onChange={this.handleChange.bind(this)}/>\n\n\t\t\t\t\t\t\t\t      {/*<input className=\" \" id=\"theDate\" type=\"date\" value={this.state.date}/>*/}\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t<div className=\"table-responsive\">          \n\t\t\t\t\t\t\t    \t<table className=\"table table-bordered table-striped table-hover\">\n\t\t\t\t\t\t\t\t\t    <thead className=\"thead-dark text-center\">\n\t\t\t\t\t\t\t\t\t      \t<tr>\n\t\t\t\t\t\t\t\t\t\t        <th>ProductID</th>\n\t\t\t\t\t\t\t\t\t\t        <th>Item Code</th>\n\t\t\t\t\t\t\t\t\t\t        <th>Product Name</th>\n\t\t\t\t\t\t\t\t\t\t        <th>Current Stock</th>\n\t\t\t\t\t\t\t\t\t\t        <th>Total Ordered </th>\n\t\t\t\t\t\t\t\t\t\t        <th>Shopping Quantity <br/> <small style={{fontWeight:'normal'}}>Change the quantity as required</small> </th>\n\t\t\t\t\t\t\t\t\t\t        { Array.isArray(this.state.allFrachiseList) && \n\t\t\t\t\t\t\t\t\t\t        \tthis.state.allFrachiseList.length > 0\n\t\t\t\t\t\t\t\t\t\t        \t?\n\t\t\t\t\t\t\t\t\t\t        \t\tthis.state.allFrachiseList.map((franchisePO,index)=>{\t\t\t\t\t\t\t\t\t\t        \t\t\t\n\t\t\t\t\t\t\t\t\t\t        \t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t        \t\t\t\t<th>{\"Franchise\"+(index+1)+\" Order\"} </th>\n\t\t\t\t\t\t\t\t\t\t        \t\t\t)\n\t\t\t\t\t\t\t\t\t\t        \t\t})\n\t\t\t\t\t\t\t\t\t\t        \t:\n\t\t\t\t\t\t\t\t\t\t        \t\tnull\t\t\t\t\t\t\t\t\t\t        \t\n\t\t\t\t\t\t\t\t\t\t        }\n\t\t\t\t\t\t\t\t\t      \t</tr>\n\t\t\t\t\t\t\t\t\t    </thead>\n\t\t\t\t\t\t\t\t\t    <tbody>\n\t\t\t\t\t\t\t\t\t\t    {\n\t\t\t\t\t\t\t\t\t\t    \tArray.isArray(this.state.allFranchiseOrders) && this.state.allFranchiseOrders.length > 0\n\t\t\t\t\t\t\t\t\t\t    \t? \n\t\t\t\t\t\t\t\t\t\t    \t\tthis.state.allFranchiseOrders.map((result, index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log('result', result);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn( \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>{result.productCode}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>{result.itemCode}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>{result.productName}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>{result.currentStock}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>{result.totOrder}</td>\n\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        \t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t                      <div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t<input type=\"number\" className=\"form-control width90\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t\t name={\"orderedItems_\"+index} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t\t id={result.productCode+\"-\"+result.itemCode} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t\t value={this.state.allFranchiseOrders[index].totOrder} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t\t onChange={this.setOrderQty.bind(this)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t<div className=\"input-group-addon width90\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t{result.totUnit}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t{/* \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t<select id={\"totUnit\"+index} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t\t\t\t\tname={\"totUnit\"+index} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t\t\t  \tvalue={result.totUnit} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t\t\t  \tonChange={this.setUnit.bind(this)}  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t\t\t  \tclassName=\"input-group-addon width66h\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option selected={true}> Units</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Array.isArray(this.state.units) && this.state.units.length > 0 \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? this.state.units.map((unit,index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<option> {unit} </option>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </td>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.values(result).map((fieldValue,index,allFields)=>{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(index>6){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(index%2 === 0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//Use Only even values like 8, 10, 12, etc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<td> {allFields[index-1]+\" \"+allFields[index]} </td>)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t  \t}\n\t\t\t\t\t\t\t\t\t    </tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t<div  className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 mtop20 Subbtnmtop20\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary col-lg-3 col-md-3 col-xs-4 col-sm-4 pull-right\" onClick={this.Submit.bind(this)}>Submit</button>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}