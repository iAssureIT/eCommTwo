{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/allowablePincodes/AllowablePincodes.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport './AllowablePincodes.css';\n\nclass AllowablePincodes extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"editId\": \"\",\n      allowablePincodes: {},\n      franchiseList: [],\n      allowablePincodeList: []\n    };\n  }\n\n  componentDidMount() {\n    this.getEntityList();\n    this.getAllowablePincode();\n  }\n\n  componentWillReceiveProps(nextProps) {}\n\n  getAllowablePincode() {\n    axios.get(\"/api/allowablepincode/get\").then(response => {\n      if (response) {\n        // console.log(\"allowable pincodes list:\",response);\n        this.setState({\n          allowablePincodeList: response.data\n        });\n        console.log(\"list=======\", this.state.allowablePincodeList);\n      }\n    }).catch(error => {\n      console.log(\"Error while getting pincodes:\", error);\n    });\n  }\n\n  getEntityList() {\n    var entityType = \"franchise\";\n    axios.get(\"/api/entitymaster/get/\" + entityType).then(response => {\n      if (response) {\n        console.log(\"franchise list:\", response);\n        this.getAllowablePincode();\n        this.setState({\n          franchiseList: response.data\n        });\n        var finalList = [];\n        console.log(\"list length:\", this.state.franchiseList.length);\n\n        for (let i = 0; i < this.state.franchiseList.length; i++) {\n          console.log(\"inside for loop\");\n          finalList[i] = {\n            \"franchiseID\": this.state.franchiseList[i]._id,\n            \"companyID\": this.state.franchiseList[i].companyID,\n            \"allowablePincodes\": this.state.allowablePincodeList[i].allowablePincodes,\n            \"PincodesID\": this.state.allowablePincodeList[i]._id\n          };\n        }\n\n        console.log(\"finalList:\", finalList);\n      }\n    }).catch(error => {});\n  }\n\n  handleChange(event) {\n    // event.preventDefault();\n    const target = event.target;\n    var id = target.getAttribute('data-fid'); // console.log(\"franchise Id :\" ,id);\n\n    var allowablePincodes = this.state.allowablePincodes;\n    allowablePincodes[id] = {\n      \"pincodes\": event.target.value.split(','),\n      \"companyID\": target.getAttribute('data-cid'),\n      \"franchiseID\": id\n    };\n    console.log(\"allowablepincods object:\", this.state.allowablePincodes);\n  }\n\n  submit(event) {\n    event.preventDefault();\n    var formValues = this.state.allowablePincodes;\n    console.log('formValues', formValues);\n\n    if ($(\"#allowablePincodeId\").valid()) {\n      axios.post('/api/allowablepincode/post', formValues).then(response => {\n        console.log(\"response after insert pincode:\", response.data.message);\n        swal({\n          text: response.data.message\n        });\n      }).catch(error => {\n        console.log('error', error);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 paddingZeroo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 45\n      }\n    }, \"Franchise Allowable Pincodes\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"allowablePincodeId\",\n      className: \"col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 websiteModel NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      class: \"table table-bordered table-striped table-hover allowablePincodeTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      className: \"col-lg-1 col-md-1 col-sm-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 65\n      }\n    }, \"Sr. No.\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"col-lg-7 col-md-7 col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 65\n      }\n    }, \"Franchise Details\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"col-lg-4 col-md-4 col-sm-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 65\n      }\n    }, \"Allowable Pincodes\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 57\n      }\n    }, Array.isArray(this.state.franchiseList && this.state.allowablePincodeList) && this.state.franchiseList.map((data, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"pincodesRow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 73\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 77\n        }\n      }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 77\n        }\n      }, data.companyName, \",\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 100\n        }\n      }), data.locations[0].locationType !== undefined ? data.locations[0].locationType : null, \",\\xA0\", data.locations[0].addressLine1 !== undefined ? data.locations[0].addressLine1 : null, \",\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 261\n        }\n      }), data.locations.state), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 77\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"pincodes\",\n        \"data-cid\": data.companyID,\n        \"data-fid\": data._id,\n        className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        ref: \"pincodes\",\n        name: \"pincodes\",\n        defaultValue: this.state.allowablePincodeList.length > 0 ? this.state.allowablePincodeList[index].allowablePincodes : null,\n        onChange: this.handleChange.bind(this),\n        placeholder: \"Enter allowable pincodes..\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 81\n        }\n      })));\n    }), this.state.franchiseList.length === 0 ? /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"trAdmin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colspan: \"3\",\n      class: \"noTempData textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 69\n      }\n    }, \"No Record Found!\")) : null))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 49\n      }\n    }, this.state.editId ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.update.bind(this),\n      className: \"btn button3 btn-primary pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 57\n      }\n    }, \"Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.submit.bind(this),\n      className: \"btn button3 btn-primary pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 57\n      }\n    }, \"Submit\"))))))))))));\n  }\n\n}\n\nexport default AllowablePincodes;","map":{"version":3,"sources":["/home/iassureit/PriyaiAssureITWork/eCommTwo/WebApp/franchise/src/storeAdmin/allowablePincodes/AllowablePincodes.js"],"names":["React","Component","$","jQuery","axios","swal","AllowablePincodes","constructor","props","state","allowablePincodes","franchiseList","allowablePincodeList","componentDidMount","getEntityList","getAllowablePincode","componentWillReceiveProps","nextProps","get","then","response","setState","data","console","log","catch","error","entityType","finalList","length","i","_id","companyID","handleChange","event","target","id","getAttribute","value","split","submit","preventDefault","formValues","valid","post","message","text","render","Array","isArray","map","index","companyName","locations","locationType","undefined","addressLine1","bind","editId","update"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport $                      from 'jquery';\nimport jQuery                 from 'jquery';\nimport axios                  from 'axios';\nimport swal                   from 'sweetalert';\nimport  './AllowablePincodes.css';\n\nclass AllowablePincodes extends Component {\n    constructor(props) {        \n        super(props);\n        this.state = {\n            \"editId\" : \"\",\n            allowablePincodes : {},\n            franchiseList : [],\n            allowablePincodeList : [],\n        };\n        \n    }\n    componentDidMount() {\n        this.getEntityList();\n        this.getAllowablePincode();\n\n    }  \n    \n    componentWillReceiveProps(nextProps) {\n        \n    }\n    getAllowablePincode(){\n        axios.get(\"/api/allowablepincode/get\")\n\t\t\t.then((response) => {\n\t\t\t\tif(response){\n\t\t\t\t\t// console.log(\"allowable pincodes list:\",response);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tallowablePincodeList  : response.data,\t\t\t\t\t\t\t\t\t\t\t\t\n                    });\n                    console.log(\"list=======\",this.state.allowablePincodeList);\n                }\n            })\t\t\t\n\t\t\t.catch((error) => {\n                console.log(\"Error while getting pincodes:\",error);\n\t\t\t})\n    }\n\n    getEntityList(){\n        var entityType = \"franchise\";\n        axios.get(\"/api/entitymaster/get/\"+entityType)\n\n\t\t\t.then((response) => {\n\t\t\t\tif(response){\n                    console.log(\"franchise list:\",response);\n                    this.getAllowablePincode();\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tfranchiseList  : response.data,\t\t\t\t\t\t\n\t\t\t\t\t\t\n                    });\n                    var finalList = [];\n                    console.log(\"list length:\",this.state.franchiseList.length);\n                    for(let i=0;i<this.state.franchiseList.length;i++){\n                        console.log(\"inside for loop\");\n                        finalList[i] = {\n                            \"franchiseID\"       : this.state.franchiseList[i]._id,\n                            \"companyID\"         : this.state.franchiseList[i].companyID,\n                            \"allowablePincodes\" : this.state.allowablePincodeList[i].allowablePincodes,\n                            \"PincodesID\"        : this.state.allowablePincodeList[i]._id\n                        }\n                    }\n                    console.log(\"finalList:\" ,finalList);\n                }\n            })            \t\t\t\n\t\t\t.catch((error) => {\n\t\t\t})\n    }\n    handleChange(event) {\n        // event.preventDefault();\n        const target = event.target;\n        var id  = target.getAttribute('data-fid');\n        // console.log(\"franchise Id :\" ,id);\n        var allowablePincodes = this.state.allowablePincodes;\n\n        allowablePincodes[id]={\n                                \"pincodes\"    :event.target.value.split(','),\n                                \"companyID\"   :target.getAttribute('data-cid'),\n                                \"franchiseID\" : id,\n                              }\n       \n        console.log(\"allowablepincods object:\",this.state.allowablePincodes);\n       \n    }\n    submit(event){\n        event.preventDefault();    \n                var formValues = this.state.allowablePincodes         \n                \n                 console.log('formValues', formValues);\n                if($(\"#allowablePincodeId\").valid()){        \n                    axios.post('/api/allowablepincode/post', formValues)\n                    .then((response)=>{                \n                        console.log(\"response after insert pincode:\",response.data.message); \n                        swal({\n                            text : response.data.message\n                        })               \n                        \n                    })\n                    .catch((error)=>{\n                        console.log('error', error);\n                    })\n                }\n        \n        \n    }\n        \n    render() {\n        return (\n            <div className=\"container-fluid col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                <div className=\"row\">\n                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                    <section className=\"content\">\n                        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 pageContent\">\n                            <div className=\"row\">\n                                <div className=\"\">\n                                    <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 paddingZeroo\">\n                                        <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                                            <h4 className=\"\">Franchise Allowable Pincodes</h4>\n                                        </div>\n                                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                                            <br/>\n                                            <br/>\n                                            <form id=\"allowablePincodeId\" className=\"col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-12 col-xs-12\" >\n                                                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 websiteModel NOpadding\">                                                    \n                                                    <table class=\"table table-bordered table-striped table-hover allowablePincodeTable\">\n                                                        <thead>\n                                                            <tr>\n                                                                <th className=\"col-lg-1 col-md-1 col-sm-2\">Sr. No.</th>\n                                                                <th className=\"col-lg-7 col-md-7 col-sm-6\">Franchise Details</th>\n                                                                <th className=\"col-lg-4 col-md-4 col-sm-4\">Allowable Pincodes</th>                                                                \n                                                            </tr>\n\n                                                        </thead>\n                                                        <tbody>                                                              \n                                                            {Array.isArray(this.state.franchiseList && this.state.allowablePincodeList) &&\n                                                                this.state.franchiseList.map((data, index) => {\n                                                                    return (\n                                                                        <tr className =\"pincodesRow\">\n                                                                            <td>{index +1}</td>\n                                                                            <td>\n                                                                                {data.companyName},<br/>\n                                                                                {data.locations[0].locationType !== undefined ? data.locations[0].locationType : null},&nbsp;{data.locations[0].addressLine1 !== undefined ? data.locations[0].addressLine1 : null},<br/>\n                                                                                {data.locations.state}\n                                                                            </td>\n                                                                            <td>                                                              \n                                                                                {/* <input type=\"text\" id=\"pincodes\" className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\" value={this.state.pincodes}  ref=\"pincodes\" name=\"pincodes\" onChange={this.handleChange.bind(this)} placeholder=\"Enter allowable pincodes..\" required/> */}\n                                                                                <input type=\"text\" id=\"pincodes\" data-cid={data.companyID} data-fid={data._id} className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n                                                                                 ref=\"pincodes\" name=\"pincodes\" defaultValue={this.state.allowablePincodeList.length>0 ? this.state.allowablePincodeList[index].allowablePincodes:null}  onChange={this.handleChange.bind(this)} placeholder=\"Enter allowable pincodes..\"/>\n                                                                            </td>                                                                \n                                                                        </tr> \n                                                                    );\n                                                                }\n                                                                )\n                                                            } \n                                                            {this.state.franchiseList.length === 0 \n                                                                ?\n                                                                <tr className=\"trAdmin\">\n                                                                    <td colspan=\"3\" class=\"noTempData textAlignCenter\">No Record Found!</td>\n                                                                </tr> \n                                                                :null\n                                                            }\n\n                                                        </tbody>\n                                                    </table>\n                                                                                                                                                     \n                                                </div>\n                                                <br/> \n                                                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                                    {this.state.editId\n                                                        ?\n                                                        <button onClick={this.update.bind(this)} className=\"btn button3 btn-primary pull-right\">Update</button>\n                                                        :\n                                                        <button onClick={this.submit.bind(this)} className=\"btn button3 btn-primary pull-right\">Submit</button>\n                                                    }\n                                                </div> \n                                            </form>                                            \n                                        </div>                                        \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                    </div>\n                </div> \n            </div> \n        );\n    } \n}\nexport default AllowablePincodes;\n\n"]},"metadata":{},"sourceType":"module"}